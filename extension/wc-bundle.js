var Tx=Object.create;var Pc=Object.defineProperty;var Dx=Object.getOwnPropertyDescriptor;var Cx=Object.getOwnPropertyNames;var Lx=Object.getPrototypeOf,Fx=Object.prototype.hasOwnProperty;var tv=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Bx=(t,e)=>()=>(t&&(e=t(t=0)),e);var X=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hr=(t,e)=>{for(var r in e)Pc(t,r,{get:e[r],enumerable:!0})},Nc=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Cx(e))!Fx.call(t,n)&&n!==r&&Pc(t,n,{get:()=>e[n],enumerable:!(i=Dx(e,n))||i.enumerable});return t},Br=(t,e,r)=>(Nc(t,e,"default"),r&&Nc(r,e,"default")),Pe=(t,e,r)=>(r=t!=null?Tx(Lx(t)):{},Nc(e||!t||!t.__esModule?Pc(r,"default",{value:t,enumerable:!0}):r,t)),Ka=t=>Nc(Pc({},"__esModule",{value:!0}),t);var ln=X((Hj,Xd)=>{"use strict";var Mo=typeof Reflect=="object"?Reflect:null,rv=Mo&&typeof Mo.apply=="function"?Mo.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Tc;Mo&&typeof Mo.ownKeys=="function"?Tc=Mo.ownKeys:Object.getOwnPropertySymbols?Tc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Tc=function(e){return Object.getOwnPropertyNames(e)};function Ux(t){console&&console.warn&&console.warn(t)}var nv=Number.isNaN||function(e){return e!==e};function Ge(){Ge.init.call(this)}Xd.exports=Ge;Xd.exports.once=jx;Ge.EventEmitter=Ge;Ge.prototype._events=void 0;Ge.prototype._eventsCount=0;Ge.prototype._maxListeners=void 0;var iv=10;function Dc(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ge,"defaultMaxListeners",{enumerable:!0,get:function(){return iv},set:function(t){if(typeof t!="number"||t<0||nv(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");iv=t}});Ge.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ge.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||nv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function sv(t){return t._maxListeners===void 0?Ge.defaultMaxListeners:t._maxListeners}Ge.prototype.getMaxListeners=function(){return sv(this)};Ge.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var h=s[e];if(h===void 0)return!1;if(typeof h=="function")rv(h,this,r);else for(var d=h.length,g=uv(h,d),i=0;i<d;++i)rv(g[i],this,r);return!0};function ov(t,e,r,i){var n,s,o;if(Dc(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=sv(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ux(a)}return t}Ge.prototype.addListener=function(e,r){return ov(this,e,r,!1)};Ge.prototype.on=Ge.prototype.addListener;Ge.prototype.prependListener=function(e,r){return ov(this,e,r,!0)};function qx(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function av(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=qx.bind(i);return n.listener=r,i.wrapFn=n,n}Ge.prototype.once=function(e,r){return Dc(r),this.on(e,av(this,e,r)),this};Ge.prototype.prependOnceListener=function(e,r){return Dc(r),this.prependListener(e,av(this,e,r)),this};Ge.prototype.removeListener=function(e,r){var i,n,s,o,a;if(Dc(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():zx(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Ge.prototype.off=Ge.prototype.removeListener;Ge.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function fv(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?kx(n):uv(n,n.length)}Ge.prototype.listeners=function(e){return fv(this,e,!0)};Ge.prototype.rawListeners=function(e){return fv(this,e,!1)};Ge.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):cv.call(t,e)};Ge.prototype.listenerCount=cv;function cv(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ge.prototype.eventNames=function(){return this._eventsCount>0?Tc(this._events):[]};function uv(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function zx(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function kx(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function jx(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}hv(t,e,s,{once:!0}),e!=="error"&&$x(t,n,{once:!0})})}function $x(t,e,r){typeof t.on=="function"&&hv(t,"error",e,r)}function hv(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Oo={};hr(Oo,{__assign:()=>Qd,__asyncDelegator:()=>rE,__asyncGenerator:()=>tE,__asyncValues:()=>iE,__await:()=>Va,__awaiter:()=>Wx,__classPrivateFieldGet:()=>aE,__classPrivateFieldSet:()=>fE,__createBinding:()=>Xx,__decorate:()=>Hx,__exportStar:()=>Zx,__extends:()=>Kx,__generator:()=>Yx,__importDefault:()=>oE,__importStar:()=>sE,__makeTemplateObject:()=>nE,__metadata:()=>Jx,__param:()=>Gx,__read:()=>dv,__rest:()=>Vx,__spread:()=>Qx,__spreadArrays:()=>eE,__values:()=>el});function Kx(t,e){Zd(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function Vx(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Hx(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Gx(t,e){return function(r,i){e(r,i,t)}}function Jx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Wx(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(g){try{d(i.next(g))}catch(y){o(y)}}function h(g){try{d(i.throw(g))}catch(y){o(y)}}function d(g){g.done?s(g.value):n(g.value).then(a,h)}d((i=i.apply(t,e||[])).next())})}function Yx(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(g){return h([d,g])}}function h(d){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=d[0]&2?n.return:d[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,d[1])).done)return s;switch(n=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(g){d=[6,g],n=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Xx(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Zx(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function el(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Qx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(dv(arguments[e]));return t}function eE(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function Va(t){return this instanceof Va?(this.v=t,this):new Va(t)}function tE(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(_){i[_]&&(n[_]=function(S){return new Promise(function(I,O){s.push([_,S,I,O])>1||a(_,S)})})}function a(_,S){try{h(i[_](S))}catch(I){y(s[0][3],I)}}function h(_){_.value instanceof Va?Promise.resolve(_.value.v).then(d,g):y(s[0][2],_)}function d(_){a("next",_)}function g(_){a("throw",_)}function y(_,S){_(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function rE(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:Va(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function iE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof el=="function"?el(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,h){o=t[s](o),n(a,h,o.done,o.value)})}}function n(s,o,a,h){Promise.resolve(h).then(function(d){s({value:d,done:a})},o)}}function nE(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function sE(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function oE(t){return t&&t.__esModule?t:{default:t}}function aE(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function fE(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Zd,Qd,Ro=Bx(()=>{Zd=function(t,e){return Zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Zd(t,e)};Qd=function(){return Qd=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Qd.apply(this,arguments)}});var lv=X(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.delay=void 0;function cE(t){return new Promise(e=>{setTimeout(()=>{e(!0)},t)})}Cc.delay=cE});var pv=X(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.ONE_THOUSAND=No.ONE_HUNDRED=void 0;No.ONE_HUNDRED=100;No.ONE_THOUSAND=1e3});var bv=X(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.ONE_YEAR=ee.FOUR_WEEKS=ee.THREE_WEEKS=ee.TWO_WEEKS=ee.ONE_WEEK=ee.THIRTY_DAYS=ee.SEVEN_DAYS=ee.FIVE_DAYS=ee.THREE_DAYS=ee.ONE_DAY=ee.TWENTY_FOUR_HOURS=ee.TWELVE_HOURS=ee.SIX_HOURS=ee.THREE_HOURS=ee.ONE_HOUR=ee.SIXTY_MINUTES=ee.THIRTY_MINUTES=ee.TEN_MINUTES=ee.FIVE_MINUTES=ee.ONE_MINUTE=ee.SIXTY_SECONDS=ee.THIRTY_SECONDS=ee.TEN_SECONDS=ee.FIVE_SECONDS=ee.ONE_SECOND=void 0;ee.ONE_SECOND=1;ee.FIVE_SECONDS=5;ee.TEN_SECONDS=10;ee.THIRTY_SECONDS=30;ee.SIXTY_SECONDS=60;ee.ONE_MINUTE=ee.SIXTY_SECONDS;ee.FIVE_MINUTES=ee.ONE_MINUTE*5;ee.TEN_MINUTES=ee.ONE_MINUTE*10;ee.THIRTY_MINUTES=ee.ONE_MINUTE*30;ee.SIXTY_MINUTES=ee.ONE_MINUTE*60;ee.ONE_HOUR=ee.SIXTY_MINUTES;ee.THREE_HOURS=ee.ONE_HOUR*3;ee.SIX_HOURS=ee.ONE_HOUR*6;ee.TWELVE_HOURS=ee.ONE_HOUR*12;ee.TWENTY_FOUR_HOURS=ee.ONE_HOUR*24;ee.ONE_DAY=ee.TWENTY_FOUR_HOURS;ee.THREE_DAYS=ee.ONE_DAY*3;ee.FIVE_DAYS=ee.ONE_DAY*5;ee.SEVEN_DAYS=ee.ONE_DAY*7;ee.THIRTY_DAYS=ee.ONE_DAY*30;ee.ONE_WEEK=ee.SEVEN_DAYS;ee.TWO_WEEKS=ee.ONE_WEEK*2;ee.THREE_WEEKS=ee.ONE_WEEK*3;ee.FOUR_WEEKS=ee.ONE_WEEK*4;ee.ONE_YEAR=ee.ONE_DAY*365});var tl=X(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var gv=(Ro(),Ka(Oo));gv.__exportStar(pv(),Lc);gv.__exportStar(bv(),Lc)});var mv=X(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.fromMiliseconds=Po.toMiliseconds=void 0;var vv=tl();function uE(t){return t*vv.ONE_THOUSAND}Po.toMiliseconds=uE;function hE(t){return Math.floor(t/vv.ONE_THOUSAND)}Po.fromMiliseconds=hE});var wv=X(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});var yv=(Ro(),Ka(Oo));yv.__exportStar(lv(),Fc);yv.__exportStar(mv(),Fc)});var xv=X(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Watch=void 0;var Bc=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let r=this.get(e);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let i=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:i})}get(e){let r=this.timestamps.get(e);if(typeof r>"u")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){let r=this.get(e);return r.elapsed||Date.now()-r.started}};Ha.Watch=Bc;Ha.default=Bc});var Ev=X(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.IWatch=void 0;var rl=class{};Uc.IWatch=rl});var _v=X(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var dE=(Ro(),Ka(Oo));dE.__exportStar(Ev(),il)});var yi=X(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});var qc=(Ro(),Ka(Oo));qc.__exportStar(wv(),To);qc.__exportStar(xv(),To);qc.__exportStar(_v(),To);qc.__exportStar(tl(),To)});var Kc=X((y$,qv)=>{"use strict";function FE(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}qv.exports=BE;function BE(t,e,r){var i=r&&r.stringify||FE,n=1;if(typeof t=="object"&&t!==null){var s=e.length+n;if(s===1)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++)o[a]=i(e[a]);return o.join(" ")}if(typeof t!="string")return t;var h=e.length;if(h===0)return t;for(var d="",g=1-n,y=-1,_=t&&t.length||0,S=0;S<_;){if(t.charCodeAt(S)===37&&S+1<_){switch(y=y>-1?y:0,t.charCodeAt(S+1)){case 100:case 102:if(g>=h||e[g]==null)break;y<S&&(d+=t.slice(y,S)),d+=Number(e[g]),y=S+2,S++;break;case 105:if(g>=h||e[g]==null)break;y<S&&(d+=t.slice(y,S)),d+=Math.floor(Number(e[g])),y=S+2,S++;break;case 79:case 111:case 106:if(g>=h||e[g]===void 0)break;y<S&&(d+=t.slice(y,S));var I=typeof e[g];if(I==="string"){d+="'"+e[g]+"'",y=S+2,S++;break}if(I==="function"){d+=e[g].name||"<anonymous>",y=S+2,S++;break}d+=i(e[g]),y=S+2,S++;break;case 115:if(g>=h)break;y<S&&(d+=t.slice(y,S)),d+=String(e[g]),y=S+2,S++;break;case 37:y<S&&(d+=t.slice(y,S)),d+="%",y=S+2,S++,g--;break}++g}++S}return y===-1?t:(y<_&&(d+=t.slice(y)),d)}});var pl=X((w$,$v)=>{"use strict";var zv=Kc();$v.exports=Bi;var Xa=GE().console||{},UE={mapHttpRequest:Vc,mapHttpResponse:Vc,wrapRequestSerializer:dl,wrapResponseSerializer:dl,wrapErrorSerializer:dl,req:Vc,res:Vc,err:$E};function qE(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Bi(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Xa;t.browser.write&&(t.browser.asObject=!0);let i=t.serializers||{},n=qE(t.browser.serialize,i),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let a=t.level||"info",h=Object.create(r);h.log||(h.log=Za),Object.defineProperty(h,"levelVal",{get:g}),Object.defineProperty(h,"level",{get:y,set:_});let d={transmit:e,serialize:n,asObject:t.browser.asObject,levels:o,timestamp:KE(t)};h.levels=Bi.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=Za,h.serializers=i,h._serialize=n,h._stdErrSerialize=s,h.child=S,e&&(h._logEvent=ll());function g(){return this.level==="silent"?1/0:this.levels.values[this.level]}function y(){return this._level}function _(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,Do(d,h,"error","log"),Do(d,h,"fatal","error"),Do(d,h,"warn","error"),Do(d,h,"info","log"),Do(d,h,"debug","log"),Do(d,h,"trace","log")}function S(I,O){if(!I)throw new Error("missing bindings for child Pino");O=O||{},n&&I.serializers&&(O.serializers=I.serializers);let P=O.serializers;if(n&&P){var T=Object.assign({},i,P),U=t.browser.serialize===!0?Object.keys(T):n;delete I.serializers,Hc([I],U,T,this._stdErrSerialize)}function D(F){this._childLevel=(F._childLevel|0)+1,this.error=Co(F,I,"error"),this.fatal=Co(F,I,"fatal"),this.warn=Co(F,I,"warn"),this.info=Co(F,I,"info"),this.debug=Co(F,I,"debug"),this.trace=Co(F,I,"trace"),T&&(this.serializers=T,this._serialize=U),e&&(this._logEvent=ll([].concat(F._logEvent.bindings,I)))}return D.prototype=this,new D(this)}return h}Bi.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Bi.stdSerializers=UE;Bi.stdTimeFunctions=Object.assign({},{nullTime:kv,epochTime:jv,unixTime:VE,isoTime:HE});function Do(t,e,r,i){let n=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Za:n[r]?n[r]:Xa[r]||Xa[i]||Za,zE(t,e,r)}function zE(t,e,r){!t.transmit&&e[r]===Za||(e[r]=function(i){return function(){let s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Xa?Xa:this;for(var h=0;h<o.length;h++)o[h]=arguments[h];if(t.serialize&&!t.asObject&&Hc(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(a,kE(this,r,o,s)):i.apply(a,o),t.transmit){let d=t.transmit.level||e.level,g=Bi.levels.values[d],y=Bi.levels.values[r];if(y<g)return;jE(this,{ts:s,methodLevel:r,methodValue:y,transmitLevel:d,transmitValue:Bi.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function kE(t,e,r,i){t._serialize&&Hc(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),s=n[0],o={};i&&(o.time=i),o.level=Bi.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof n[0]=="object";)Object.assign(o,n.shift());s=n.length?zv(n.shift(),n):void 0}else typeof s=="string"&&(s=zv(n.shift(),n));return s!==void 0&&(o.msg=s),o}function Hc(t,e,r,i){for(let n in t)if(i&&t[n]instanceof Error)t[n]=Bi.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let s in t[n])e&&e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function Co(t,e,r){return function(){let i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return t[r].apply(this,i)}}function jE(t,e,r){let i=e.send,n=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,h=t._logEvent.bindings;Hc(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(d){return h.indexOf(d)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,i(s,t._logEvent,a),t._logEvent=ll(h)}function ll(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function $E(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function KE(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?kv:jv}function Vc(){return{}}function dl(t){return t}function Za(){}function kv(){return!1}function jv(){return Date.now()}function VE(){return Math.round(Date.now()/1e3)}function HE(){return new Date(Date.now()).toISOString()}function GE(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var Wv=X(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.BrowserRandomSource=void 0;var Jv=65536,xl=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let i=0;i<r.length;i+=Jv)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Jv)));return r}};fu.BrowserRandomSource=xl});var Jr=X(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});function s_(t){for(var e=0;e<t.length;e++)t[e]=0;return t}El.wipe=s_});var _l=X(()=>{});var Yv=X(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.NodeRandomSource=void 0;var o_=Jr(),Sl=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof tv<"u"){let e=_l();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,o_.wipe)(r),i}};cu.NodeRandomSource=Sl});var Xv=X(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.SystemRandomSource=void 0;var a_=Wv(),f_=Yv(),Il=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new a_.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new f_.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};uu.SystemRandomSource=Il});var Zv=X(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});function c_(t,e){var r=t>>>16&65535,i=t&65535,n=e>>>16&65535,s=e&65535;return i*s+(r*s+i*n<<16>>>0)|0}Ur.mul=Math.imul||c_;function u_(t,e){return t+e|0}Ur.add=u_;function h_(t,e){return t-e|0}Ur.sub=h_;function d_(t,e){return t<<e|t>>>32-e}Ur.rotl=d_;function l_(t,e){return t<<32-e|t>>>e}Ur.rotr=l_;function p_(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}Ur.isInteger=Number.isInteger||p_;Ur.MAX_SAFE_INTEGER=9007199254740991;Ur.isSafeInteger=function(t){return Ur.isInteger(t)&&t>=-Ur.MAX_SAFE_INTEGER&&t<=Ur.MAX_SAFE_INTEGER}});var Lo=X(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var Qv=Zv();function b_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}Ue.readInt16BE=b_;function g_(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}Ue.readUint16BE=g_;function v_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}Ue.readInt16LE=v_;function m_(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}Ue.readUint16LE=m_;function em(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}Ue.writeUint16BE=em;Ue.writeInt16BE=em;function tm(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}Ue.writeUint16LE=tm;Ue.writeInt16LE=tm;function Al(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}Ue.readInt32BE=Al;function Ml(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Ue.readUint32BE=Ml;function Ol(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}Ue.readInt32LE=Ol;function Rl(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}Ue.readUint32LE=Rl;function hu(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}Ue.writeUint32BE=hu;Ue.writeInt32BE=hu;function du(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}Ue.writeUint32LE=du;Ue.writeInt32LE=du;function y_(t,e){e===void 0&&(e=0);var r=Al(t,e),i=Al(t,e+4);return r*4294967296+i-(i>>31)*4294967296}Ue.readInt64BE=y_;function w_(t,e){e===void 0&&(e=0);var r=Ml(t,e),i=Ml(t,e+4);return r*4294967296+i}Ue.readUint64BE=w_;function x_(t,e){e===void 0&&(e=0);var r=Ol(t,e),i=Ol(t,e+4);return i*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=x_;function E_(t,e){e===void 0&&(e=0);var r=Rl(t,e),i=Rl(t,e+4);return i*4294967296+r}Ue.readUint64LE=E_;function rm(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),hu(t/4294967296>>>0,e,r),hu(t>>>0,e,r+4),e}Ue.writeUint64BE=rm;Ue.writeInt64BE=rm;function im(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),du(t>>>0,e,r),du(t/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=im;Ue.writeInt64LE=im;function __(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}Ue.readUintBE=__;function S_(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}Ue.readUintLE=S_;function I_(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Qv.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}Ue.writeUintBE=I_;function A_(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Qv.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}Ue.writeUintLE=A_;function M_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=M_;function O_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=O_;function R_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=R_;function N_(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=N_;function P_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}Ue.writeFloat32BE=P_;function T_(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}Ue.writeFloat32LE=T_;function D_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}Ue.writeFloat64BE=D_;function C_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}Ue.writeFloat64LE=C_});var Vn=X(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.randomStringForEntropy=Yt.randomString=Yt.randomUint32=Yt.randomBytes=Yt.defaultRandomSource=void 0;var L_=Xv(),F_=Lo(),nm=Jr();Yt.defaultRandomSource=new L_.SystemRandomSource;function Nl(t,e=Yt.defaultRandomSource){return e.randomBytes(t)}Yt.randomBytes=Nl;function B_(t=Yt.defaultRandomSource){let e=Nl(4,t),r=(0,F_.readUint32LE)(e);return(0,nm.wipe)(e),r}Yt.randomUint32=B_;var sm="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function om(t,e=sm,r=Yt.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let i="",n=e.length,s=256-256%n;for(;t>0;){let o=Nl(Math.ceil(t*256/s),r);for(let a=0;a<o.length&&t>0;a++){let h=o[a];h<s&&(i+=e.charAt(h%n),t--)}(0,nm.wipe)(o)}return i}Yt.randomString=om;function U_(t,e=sm,r=Yt.defaultRandomSource){let i=Math.ceil(t/(Math.log(e.length)/Math.LN2));return om(i,e,r)}Yt.randomStringForEntropy=U_});var cm=X(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var Bo=Lo(),Fo=Jr();bn.DIGEST_LENGTH=64;bn.BLOCK_SIZE=128;var fm=function(){function t(){this.digestLength=bn.DIGEST_LENGTH,this.blockSize=bn.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){Fo.wipe(this._buffer),Fo.wipe(this._tempHi),Fo.wipe(this._tempLo),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<bn.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(Pl(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=Pl(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,s=r<<3,o=r%128<112?128:256;this._buffer[i]=128;for(var a=i+1;a<o-8;a++)this._buffer[a]=0;Bo.writeUint32BE(n,this._buffer,o-8),Bo.writeUint32BE(s,this._buffer,o-4),Pl(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/8;a++)Bo.writeUint32BE(this._stateHi[a],e,a*8),Bo.writeUint32BE(this._stateLo[a],e,a*8+4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){Fo.wipe(e.stateHi),Fo.wipe(e.stateLo),e.buffer&&Fo.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();bn.SHA512=fm;var am=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function Pl(t,e,r,i,n,s,o){for(var a=r[0],h=r[1],d=r[2],g=r[3],y=r[4],_=r[5],S=r[6],I=r[7],O=i[0],P=i[1],T=i[2],U=i[3],D=i[4],F=i[5],j=i[6],V=i[7],B,C,K,M,u,b,p,f;o>=128;){for(var l=0;l<16;l++){var m=8*l+s;t[l]=Bo.readUint32BE(n,m),e[l]=Bo.readUint32BE(n,m+4)}for(var l=0;l<80;l++){var x=a,v=h,c=d,w=g,R=y,E=_,N=S,q=I,A=O,L=P,z=T,k=U,$=D,W=F,H=j,G=V;if(B=I,C=V,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=(y>>>14|D<<18)^(y>>>18|D<<14)^(D>>>9|y<<23),C=(D>>>14|y<<18)^(D>>>18|y<<14)^(y>>>9|D<<23),u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,B=y&_^~y&S,C=D&F^~D&j,u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,B=am[l*2],C=am[l*2+1],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,B=t[l%16],C=e[l%16],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,K=p&65535|f<<16,M=u&65535|b<<16,B=K,C=M,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=(a>>>28|O<<4)^(O>>>2|a<<30)^(O>>>7|a<<25),C=(O>>>28|a<<4)^(a>>>2|O<<30)^(a>>>7|O<<25),u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,B=a&h^a&d^h&d,C=O&P^O&T^P&T,u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,q=p&65535|f<<16,G=u&65535|b<<16,B=w,C=k,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=K,C=M,u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,w=p&65535|f<<16,k=u&65535|b<<16,h=x,d=v,g=c,y=w,_=R,S=E,I=N,a=q,P=A,T=L,U=z,D=k,F=$,j=W,V=H,O=G,l%16===15)for(var m=0;m<16;m++)B=t[m],C=e[m],u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=t[(m+9)%16],C=e[(m+9)%16],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,K=t[(m+1)%16],M=e[(m+1)%16],B=(K>>>1|M<<31)^(K>>>8|M<<24)^K>>>7,C=(M>>>1|K<<31)^(M>>>8|K<<24)^(M>>>7|K<<25),u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,K=t[(m+14)%16],M=e[(m+14)%16],B=(K>>>19|M<<13)^(M>>>29|K<<3)^K>>>6,C=(M>>>19|K<<13)^(K>>>29|M<<3)^(M>>>6|K<<26),u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,t[m]=p&65535|f<<16,e[m]=u&65535|b<<16}B=a,C=O,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[0],C=i[0],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[0]=a=p&65535|f<<16,i[0]=O=u&65535|b<<16,B=h,C=P,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[1],C=i[1],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[1]=h=p&65535|f<<16,i[1]=P=u&65535|b<<16,B=d,C=T,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[2],C=i[2],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[2]=d=p&65535|f<<16,i[2]=T=u&65535|b<<16,B=g,C=U,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[3],C=i[3],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[3]=g=p&65535|f<<16,i[3]=U=u&65535|b<<16,B=y,C=D,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[4],C=i[4],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[4]=y=p&65535|f<<16,i[4]=D=u&65535|b<<16,B=_,C=F,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[5],C=i[5],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[5]=_=p&65535|f<<16,i[5]=F=u&65535|b<<16,B=S,C=j,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[6],C=i[6],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[6]=S=p&65535|f<<16,i[6]=j=u&65535|b<<16,B=I,C=V,u=C&65535,b=C>>>16,p=B&65535,f=B>>>16,B=r[7],C=i[7],u+=C&65535,b+=C>>>16,p+=B&65535,f+=B>>>16,b+=u>>>16,p+=b>>>16,f+=p>>>16,r[7]=I=p&65535|f<<16,i[7]=V=u&65535|b<<16,s+=128,o-=128}return s}function q_(t){var e=new fm;e.update(t);var r=e.digest();return e.clean(),r}bn.hash=q_});var ql=X(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.convertSecretKeyToX25519=He.convertPublicKeyToX25519=He.verify=He.sign=He.extractPublicKeyFromSecretKey=He.generateKeyPair=He.generateKeyPairFromSeed=He.SEED_LENGTH=He.SECRET_KEY_LENGTH=He.PUBLIC_KEY_LENGTH=He.SIGNATURE_LENGTH=void 0;var z_=Vn(),ef=cm(),pm=Jr();He.SIGNATURE_LENGTH=64;He.PUBLIC_KEY_LENGTH=32;He.SECRET_KEY_LENGTH=64;He.SEED_LENGTH=32;function Te(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var k_=new Uint8Array(32);k_[0]=9;var Cl=Te(),Uo=Te([1]),j_=Te([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),$_=Te([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),um=Te([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),hm=Te([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),K_=Te([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Hn(t,e){for(let r=0;r<16;r++)t[r]=e[r]|0}function Tl(t){let e=1;for(let r=0;r<16;r++){let i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function bm(t,e,r){let i=~(r-1);for(let n=0;n<16;n++){let s=i&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function tf(t,e){let r=Te(),i=Te();for(let n=0;n<16;n++)i[n]=e[n];Tl(i),Tl(i),Tl(i);for(let n=0;n<2;n++){r[0]=i[0]-65517;for(let o=1;o<15;o++)r[o]=i[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,bm(i,r,1-s)}for(let n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function gm(t,e){let r=0;for(let i=0;i<32;i++)r|=t[i]^e[i];return(1&r-1>>>8)-1}function dm(t,e){let r=new Uint8Array(32),i=new Uint8Array(32);return tf(r,t),tf(i,e),gm(r,i)}function vm(t){let e=new Uint8Array(32);return tf(e,t),e[0]&1}function V_(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function js(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]+r[i]}function Ks(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]-r[i]}function Je(t,e,r){let i,n,s=0,o=0,a=0,h=0,d=0,g=0,y=0,_=0,S=0,I=0,O=0,P=0,T=0,U=0,D=0,F=0,j=0,V=0,B=0,C=0,K=0,M=0,u=0,b=0,p=0,f=0,l=0,m=0,x=0,v=0,c=0,w=r[0],R=r[1],E=r[2],N=r[3],q=r[4],A=r[5],L=r[6],z=r[7],k=r[8],$=r[9],W=r[10],H=r[11],G=r[12],Z=r[13],J=r[14],Y=r[15];i=e[0],s+=i*w,o+=i*R,a+=i*E,h+=i*N,d+=i*q,g+=i*A,y+=i*L,_+=i*z,S+=i*k,I+=i*$,O+=i*W,P+=i*H,T+=i*G,U+=i*Z,D+=i*J,F+=i*Y,i=e[1],o+=i*w,a+=i*R,h+=i*E,d+=i*N,g+=i*q,y+=i*A,_+=i*L,S+=i*z,I+=i*k,O+=i*$,P+=i*W,T+=i*H,U+=i*G,D+=i*Z,F+=i*J,j+=i*Y,i=e[2],a+=i*w,h+=i*R,d+=i*E,g+=i*N,y+=i*q,_+=i*A,S+=i*L,I+=i*z,O+=i*k,P+=i*$,T+=i*W,U+=i*H,D+=i*G,F+=i*Z,j+=i*J,V+=i*Y,i=e[3],h+=i*w,d+=i*R,g+=i*E,y+=i*N,_+=i*q,S+=i*A,I+=i*L,O+=i*z,P+=i*k,T+=i*$,U+=i*W,D+=i*H,F+=i*G,j+=i*Z,V+=i*J,B+=i*Y,i=e[4],d+=i*w,g+=i*R,y+=i*E,_+=i*N,S+=i*q,I+=i*A,O+=i*L,P+=i*z,T+=i*k,U+=i*$,D+=i*W,F+=i*H,j+=i*G,V+=i*Z,B+=i*J,C+=i*Y,i=e[5],g+=i*w,y+=i*R,_+=i*E,S+=i*N,I+=i*q,O+=i*A,P+=i*L,T+=i*z,U+=i*k,D+=i*$,F+=i*W,j+=i*H,V+=i*G,B+=i*Z,C+=i*J,K+=i*Y,i=e[6],y+=i*w,_+=i*R,S+=i*E,I+=i*N,O+=i*q,P+=i*A,T+=i*L,U+=i*z,D+=i*k,F+=i*$,j+=i*W,V+=i*H,B+=i*G,C+=i*Z,K+=i*J,M+=i*Y,i=e[7],_+=i*w,S+=i*R,I+=i*E,O+=i*N,P+=i*q,T+=i*A,U+=i*L,D+=i*z,F+=i*k,j+=i*$,V+=i*W,B+=i*H,C+=i*G,K+=i*Z,M+=i*J,u+=i*Y,i=e[8],S+=i*w,I+=i*R,O+=i*E,P+=i*N,T+=i*q,U+=i*A,D+=i*L,F+=i*z,j+=i*k,V+=i*$,B+=i*W,C+=i*H,K+=i*G,M+=i*Z,u+=i*J,b+=i*Y,i=e[9],I+=i*w,O+=i*R,P+=i*E,T+=i*N,U+=i*q,D+=i*A,F+=i*L,j+=i*z,V+=i*k,B+=i*$,C+=i*W,K+=i*H,M+=i*G,u+=i*Z,b+=i*J,p+=i*Y,i=e[10],O+=i*w,P+=i*R,T+=i*E,U+=i*N,D+=i*q,F+=i*A,j+=i*L,V+=i*z,B+=i*k,C+=i*$,K+=i*W,M+=i*H,u+=i*G,b+=i*Z,p+=i*J,f+=i*Y,i=e[11],P+=i*w,T+=i*R,U+=i*E,D+=i*N,F+=i*q,j+=i*A,V+=i*L,B+=i*z,C+=i*k,K+=i*$,M+=i*W,u+=i*H,b+=i*G,p+=i*Z,f+=i*J,l+=i*Y,i=e[12],T+=i*w,U+=i*R,D+=i*E,F+=i*N,j+=i*q,V+=i*A,B+=i*L,C+=i*z,K+=i*k,M+=i*$,u+=i*W,b+=i*H,p+=i*G,f+=i*Z,l+=i*J,m+=i*Y,i=e[13],U+=i*w,D+=i*R,F+=i*E,j+=i*N,V+=i*q,B+=i*A,C+=i*L,K+=i*z,M+=i*k,u+=i*$,b+=i*W,p+=i*H,f+=i*G,l+=i*Z,m+=i*J,x+=i*Y,i=e[14],D+=i*w,F+=i*R,j+=i*E,V+=i*N,B+=i*q,C+=i*A,K+=i*L,M+=i*z,u+=i*k,b+=i*$,p+=i*W,f+=i*H,l+=i*G,m+=i*Z,x+=i*J,v+=i*Y,i=e[15],F+=i*w,j+=i*R,V+=i*E,B+=i*N,C+=i*q,K+=i*A,M+=i*L,u+=i*z,b+=i*k,p+=i*$,f+=i*W,l+=i*H,m+=i*G,x+=i*Z,v+=i*J,c+=i*Y,s+=38*j,o+=38*V,a+=38*B,h+=38*C,d+=38*K,g+=38*M,y+=38*u,_+=38*b,S+=38*p,I+=38*f,O+=38*l,P+=38*m,T+=38*x,U+=38*v,D+=38*c,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=_+n+65535,n=Math.floor(i/65536),_=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=P+n+65535,n=Math.floor(i/65536),P=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,i=U+n+65535,n=Math.floor(i/65536),U=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=_+n+65535,n=Math.floor(i/65536),_=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=P+n+65535,n=Math.floor(i/65536),P=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,i=U+n+65535,n=Math.floor(i/65536),U=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=h,t[4]=d,t[5]=g,t[6]=y,t[7]=_,t[8]=S,t[9]=I,t[10]=O,t[11]=P,t[12]=T,t[13]=U,t[14]=D,t[15]=F}function $s(t,e){Je(t,e,e)}function mm(t,e){let r=Te(),i;for(i=0;i<16;i++)r[i]=e[i];for(i=253;i>=0;i--)$s(r,r),i!==2&&i!==4&&Je(r,r,e);for(i=0;i<16;i++)t[i]=r[i]}function H_(t,e){let r=Te(),i;for(i=0;i<16;i++)r[i]=e[i];for(i=250;i>=0;i--)$s(r,r),i!==1&&Je(r,r,e);for(i=0;i<16;i++)t[i]=r[i]}function Ll(t,e){let r=Te(),i=Te(),n=Te(),s=Te(),o=Te(),a=Te(),h=Te(),d=Te(),g=Te();Ks(r,t[1],t[0]),Ks(g,e[1],e[0]),Je(r,r,g),js(i,t[0],t[1]),js(g,e[0],e[1]),Je(i,i,g),Je(n,t[3],e[3]),Je(n,n,$_),Je(s,t[2],e[2]),js(s,s,s),Ks(o,i,r),Ks(a,s,n),js(h,s,n),js(d,i,r),Je(t[0],o,a),Je(t[1],d,h),Je(t[2],h,a),Je(t[3],o,d)}function lm(t,e,r){for(let i=0;i<4;i++)bm(t[i],e[i],r)}function Bl(t,e){let r=Te(),i=Te(),n=Te();mm(n,e[2]),Je(r,e[0],n),Je(i,e[1],n),tf(t,i),t[31]^=vm(r)<<7}function ym(t,e,r){Hn(t[0],Cl),Hn(t[1],Uo),Hn(t[2],Uo),Hn(t[3],Cl);for(let i=255;i>=0;--i){let n=r[i/8|0]>>(i&7)&1;lm(t,e,n),Ll(e,t),Ll(t,t),lm(t,e,n)}}function Ul(t,e){let r=[Te(),Te(),Te(),Te()];Hn(r[0],um),Hn(r[1],hm),Hn(r[2],Uo),Je(r[3],um,hm),ym(t,r,e)}function wm(t){if(t.length!==He.SEED_LENGTH)throw new Error(`ed25519: seed must be ${He.SEED_LENGTH} bytes`);let e=(0,ef.hash)(t);e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(32),i=[Te(),Te(),Te(),Te()];Ul(i,e),Bl(r,i);let n=new Uint8Array(64);return n.set(t),n.set(r,32),{publicKey:r,secretKey:n}}He.generateKeyPairFromSeed=wm;function G_(t){let e=(0,z_.randomBytes)(32,t),r=wm(e);return(0,pm.wipe)(e),r}He.generateKeyPair=G_;function J_(t){if(t.length!==He.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${He.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))}He.extractPublicKeyFromSecretKey=J_;var Dl=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function xm(t,e){let r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)e[n]+=r-16*e[i]*Dl[n-(i-32)],r=Math.floor((e[n]+128)/256),e[n]-=r*256;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;n++)e[n]+=r-(e[31]>>4)*Dl[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=r*Dl[n];for(i=0;i<32;i++)e[i+1]+=e[i]>>8,t[i]=e[i]&255}function Fl(t){let e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let r=0;r<64;r++)t[r]=0;xm(t,e)}function W_(t,e){let r=new Float64Array(64),i=[Te(),Te(),Te(),Te()],n=(0,ef.hash)(t.subarray(0,32));n[0]&=248,n[31]&=127,n[31]|=64;let s=new Uint8Array(64);s.set(n.subarray(32),32);let o=new ef.SHA512;o.update(s.subarray(32)),o.update(e);let a=o.digest();o.clean(),Fl(a),Ul(i,a),Bl(s,i),o.reset(),o.update(s.subarray(0,32)),o.update(t.subarray(32)),o.update(e);let h=o.digest();Fl(h);for(let d=0;d<32;d++)r[d]=a[d];for(let d=0;d<32;d++)for(let g=0;g<32;g++)r[d+g]+=h[d]*n[g];return xm(s.subarray(32),r),s}He.sign=W_;function Em(t,e){let r=Te(),i=Te(),n=Te(),s=Te(),o=Te(),a=Te(),h=Te();return Hn(t[2],Uo),V_(t[1],e),$s(n,t[1]),Je(s,n,j_),Ks(n,n,t[2]),js(s,t[2],s),$s(o,s),$s(a,o),Je(h,a,o),Je(r,h,n),Je(r,r,s),H_(r,r),Je(r,r,n),Je(r,r,s),Je(r,r,s),Je(t[0],r,s),$s(i,t[0]),Je(i,i,s),dm(i,n)&&Je(t[0],t[0],K_),$s(i,t[0]),Je(i,i,s),dm(i,n)?-1:(vm(t[0])===e[31]>>7&&Ks(t[0],Cl,t[0]),Je(t[3],t[0],t[1]),0)}function Y_(t,e,r){let i=new Uint8Array(32),n=[Te(),Te(),Te(),Te()],s=[Te(),Te(),Te(),Te()];if(r.length!==He.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${He.SIGNATURE_LENGTH} bytes`);if(Em(s,t))return!1;let o=new ef.SHA512;o.update(r.subarray(0,32)),o.update(t),o.update(e);let a=o.digest();return Fl(a),ym(n,s,a),Ul(s,r.subarray(32)),Ll(n,s),Bl(i,n),!gm(r,i)}He.verify=Y_;function X_(t){let e=[Te(),Te(),Te(),Te()];if(Em(e,t))throw new Error("Ed25519: invalid public key");let r=Te(),i=Te(),n=e[1];js(r,Uo,n),Ks(i,Uo,n),mm(i,i),Je(r,r,i);let s=new Uint8Array(32);return tf(s,r),s}He.convertPublicKeyToX25519=X_;function Z_(t){let e=(0,ef.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let r=new Uint8Array(e.subarray(0,32));return(0,pm.wipe)(e),r}He.convertSecretKeyToX25519=Z_});var Ho=X(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getLocalStorage=Qe.getLocalStorageOrThrow=Qe.getCrypto=Qe.getCryptoOrThrow=Qe.getLocation=Qe.getLocationOrThrow=Qe.getNavigator=Qe.getNavigatorOrThrow=Qe.getDocument=Qe.getDocumentOrThrow=Qe.getFromWindowOrThrow=Qe.getFromWindow=void 0;function Gs(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Qe.getFromWindow=Gs;function Vo(t){let e=Gs(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Qe.getFromWindowOrThrow=Vo;function II(){return Vo("document")}Qe.getDocumentOrThrow=II;function AI(){return Gs("document")}Qe.getDocument=AI;function MI(){return Vo("navigator")}Qe.getNavigatorOrThrow=MI;function OI(){return Gs("navigator")}Qe.getNavigator=OI;function RI(){return Vo("location")}Qe.getLocationOrThrow=RI;function NI(){return Gs("location")}Qe.getLocation=NI;function PI(){return Vo("crypto")}Qe.getCryptoOrThrow=PI;function TI(){return Gs("crypto")}Qe.getCrypto=TI;function DI(){return Vo("localStorage")}Qe.getLocalStorageOrThrow=DI;function CI(){return Gs("localStorage")}Qe.getLocalStorage=CI});var xu=X(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.getWindowMetadata=void 0;var a2=Ho();function LI(){let t,e;try{t=a2.getDocumentOrThrow(),e=a2.getLocationOrThrow()}catch{return null}function r(){let y=t.getElementsByTagName("link"),_=[];for(let S=0;S<y.length;S++){let I=y[S],O=I.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){let P=I.getAttribute("href");if(P)if(P.toLowerCase().indexOf("https:")===-1&&P.toLowerCase().indexOf("http:")===-1&&P.indexOf("//")!==0){let T=e.protocol+"//"+e.host;if(P.indexOf("/")===0)T+=P;else{let U=e.pathname.split("/");U.pop();let D=U.join("/");T+=D+"/"+P}_.push(T)}else if(P.indexOf("//")===0){let T=e.protocol+P;_.push(T)}else _.push(P)}}return _}function i(...y){let _=t.getElementsByTagName("meta");for(let S=0;S<_.length;S++){let I=_[S],O=["itemprop","property","name"].map(P=>I.getAttribute(P)).filter(P=>P?y.includes(P):!1);if(O.length&&O){let P=I.getAttribute("content");if(P)return P}}return""}function n(){let y=i("name","og:site_name","og:title","twitter:title");return y||(y=t.title),y}function s(){return i("description","og:description","twitter:description","keywords")}let o=n(),a=s(),h=e.origin,d=r();return{description:a,url:h,icons:d,name:o}}wu.getWindowMetadata=LI});var c2=X((VK,f2)=>{"use strict";f2.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var p2=X((HK,l2)=>{"use strict";var d2="%[a-f0-9]{2}",u2=new RegExp("("+d2+")|([^%]+?)","gi"),h2=new RegExp("("+d2+")+","gi");function u0(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],u0(r),u0(i))}function FI(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(u2)||[],r=1;r<e.length;r++)t=u0(e,r).join(""),e=t.match(u2)||[];return t}}function BI(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=h2.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var i=FI(r[0]);i!==r[0]&&(e[r[0]]=i)}r=h2.exec(t)}e["%C2"]="\uFFFD";for(var n=Object.keys(e),s=0;s<n.length;s++){var o=n[s];t=t.replace(new RegExp(o,"g"),e[o])}return t}l2.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return BI(t)}}});var g2=X((GK,b2)=>{"use strict";b2.exports=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];let r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]}});var m2=X((JK,v2)=>{"use strict";v2.exports=function(t,e){for(var r={},i=Object.keys(t),n=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],a=t[o];(n?e.indexOf(o)!==-1:e(o,a,t))&&(r[o]=a)}return r}});var d0=X(yr=>{"use strict";var UI=c2(),qI=p2(),w2=g2(),zI=m2(),kI=t=>t==null,h0=Symbol("encodeFragmentIdentifier");function jI(t){switch(t.arrayFormat){case"index":return e=>(r,i)=>{let n=r.length;return i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:i===null?[...r,[ht(e,t),"[",n,"]"].join("")]:[...r,[ht(e,t),"[",ht(n,t),"]=",ht(i,t)].join("")]};case"bracket":return e=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:i===null?[...r,[ht(e,t),"[]"].join("")]:[...r,[ht(e,t),"[]=",ht(i,t)].join("")];case"colon-list-separator":return e=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:i===null?[...r,[ht(e,t),":list="].join("")]:[...r,[ht(e,t),":list=",ht(i,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(i,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?i:(n=n===null?"":n,i.length===0?[[ht(r,t),e,ht(n,t)].join("")]:[[i,ht(n,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?r:i===null?[...r,ht(e,t)]:[...r,[ht(e,t),"=",ht(i,t)].join("")]}}function $I(t){let e;switch(t.arrayFormat){case"index":return(r,i,n)=>{if(e=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!e){n[r]=i;return}n[r]===void 0&&(n[r]={}),n[r][e[1]]=i};case"bracket":return(r,i,n)=>{if(e=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!e){n[r]=i;return}if(n[r]===void 0){n[r]=[i];return}n[r]=[].concat(n[r],i)};case"colon-list-separator":return(r,i,n)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){n[r]=i;return}if(n[r]===void 0){n[r]=[i];return}n[r]=[].concat(n[r],i)};case"comma":case"separator":return(r,i,n)=>{let s=typeof i=="string"&&i.includes(t.arrayFormatSeparator),o=typeof i=="string"&&!s&&mn(i,t).includes(t.arrayFormatSeparator);i=o?mn(i,t):i;let a=s||o?i.split(t.arrayFormatSeparator).map(h=>mn(h,t)):i===null?i:mn(i,t);n[r]=a};case"bracket-separator":return(r,i,n)=>{let s=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!s){n[r]=i&&mn(i,t);return}let o=i===null?[]:i.split(t.arrayFormatSeparator).map(a=>mn(a,t));if(n[r]===void 0){n[r]=o;return}n[r]=[].concat(n[r],o)};default:return(r,i,n)=>{if(n[r]===void 0){n[r]=i;return}n[r]=[].concat(n[r],i)}}}function x2(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ht(t,e){return e.encode?e.strict?UI(t):encodeURIComponent(t):t}function mn(t,e){return e.decode?qI(t):t}function E2(t){return Array.isArray(t)?t.sort():typeof t=="object"?E2(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function _2(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function KI(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function S2(t){t=_2(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function y2(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function I2(t,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),x2(e.arrayFormatSeparator);let r=$I(e),i=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return i;for(let n of t.split("&")){if(n==="")continue;let[s,o]=w2(e.decode?n.replace(/\+/g," "):n,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:mn(o,e),r(mn(s,e),o,i)}for(let n of Object.keys(i)){let s=i[n];if(typeof s=="object"&&s!==null)for(let o of Object.keys(s))s[o]=y2(s[o],e);else i[n]=y2(s,e)}return e.sort===!1?i:(e.sort===!0?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce((n,s)=>{let o=i[s];return o&&typeof o=="object"&&!Array.isArray(o)?n[s]=E2(o):n[s]=o,n},Object.create(null))}yr.extract=S2;yr.parse=I2;yr.stringify=(t,e)=>{if(!t)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),x2(e.arrayFormatSeparator);let r=o=>e.skipNull&&kI(t[o])||e.skipEmptyString&&t[o]==="",i=jI(e),n={};for(let o of Object.keys(t))r(o)||(n[o]=t[o]);let s=Object.keys(n);return e.sort!==!1&&s.sort(e.sort),s.map(o=>{let a=t[o];return a===void 0?"":a===null?ht(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?ht(o,e)+"[]":a.reduce(i(o),[]).join("&"):ht(o,e)+"="+ht(a,e)}).filter(o=>o.length>0).join("&")};yr.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[r,i]=w2(t,"#");return Object.assign({url:r.split("?")[0]||"",query:I2(S2(t),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:mn(i,e)}:{})};yr.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0,[h0]:!0},e);let r=_2(t.url).split("?")[0]||"",i=yr.extract(t.url),n=yr.parse(i,{sort:!1}),s=Object.assign(n,t.query),o=yr.stringify(s,e);o&&(o=`?${o}`);let a=KI(t.url);return t.fragmentIdentifier&&(a=`#${e[h0]?ht(t.fragmentIdentifier,e):t.fragmentIdentifier}`),`${r}${o}${a}`};yr.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[h0]:!1},r);let{url:i,query:n,fragmentIdentifier:s}=yr.parseUrl(t,r);return yr.stringifyUrl({url:i,query:zI(n,e),fragmentIdentifier:s},r)};yr.exclude=(t,e,r)=>{let i=Array.isArray(e)?n=>!e.includes(n):(n,s)=>!e(n,s);return yr.pick(t,i,r)}});var A2=X((YK,Eu)=>{(function(){"use strict";var t="input is invalid type",e="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var n=!r&&typeof self=="object",s=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;s?i=globalThis:n&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&typeof Eu=="object"&&Eu.exports,a=typeof define=="function"&&define.amd,h=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),g=[31,7936,2031616,520093696],y=[4,1024,262144,67108864],_=[1,256,65536,16777216],S=[6,1536,393216,100663296],I=[0,8,16,24],O=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],P=[224,256,384,512],T=[128,256],U=["hex","buffer","arrayBuffer","array","digest"],D={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),h&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var F=function(A,L,z){return function(k){return new E(A,L,A).update(k)[z]()}},j=function(A,L,z){return function(k,$){return new E(A,L,$).update(k)[z]()}},V=function(A,L,z){return function(k,$,W,H){return f["cshake"+A].update(k,$,W,H)[z]()}},B=function(A,L,z){return function(k,$,W,H){return f["kmac"+A].update(k,$,W,H)[z]()}},C=function(A,L,z,k){for(var $=0;$<U.length;++$){var W=U[$];A[W]=L(z,k,W)}return A},K=function(A,L){var z=F(A,L,"hex");return z.create=function(){return new E(A,L,A)},z.update=function(k){return z.create().update(k)},C(z,F,A,L)},M=function(A,L){var z=j(A,L,"hex");return z.create=function(k){return new E(A,L,k)},z.update=function(k,$){return z.create($).update(k)},C(z,j,A,L)},u=function(A,L){var z=D[A],k=V(A,L,"hex");return k.create=function($,W,H){return!W&&!H?f["shake"+A].create($):new E(A,L,$).bytepad([W,H],z)},k.update=function($,W,H,G){return k.create(W,H,G).update($)},C(k,V,A,L)},b=function(A,L){var z=D[A],k=B(A,L,"hex");return k.create=function($,W,H){return new N(A,L,W).bytepad(["KMAC",H],z).bytepad([$],z)},k.update=function($,W,H,G){return k.create($,H,G).update(W)},C(k,B,A,L)},p=[{name:"keccak",padding:_,bits:P,createMethod:K},{name:"sha3",padding:S,bits:P,createMethod:K},{name:"shake",padding:g,bits:T,createMethod:M},{name:"cshake",padding:y,bits:T,createMethod:u},{name:"kmac",padding:y,bits:T,createMethod:b}],f={},l=[],m=0;m<p.length;++m)for(var x=p[m],v=x.bits,c=0;c<v.length;++c){var w=x.name+"_"+v[c];if(l.push(w),f[w]=x.createMethod(v[c],x.padding),x.name!=="sha3"){var R=x.name+v[c];l.push(R),f[R]=f[w]}}function E(A,L,z){this.blocks=[],this.s=[],this.padding=L,this.outputBits=z,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=z>>5,this.extraBytes=(z&31)>>3;for(var k=0;k<50;++k)this.s[k]=0}E.prototype.update=function(A){if(this.finalized)throw new Error(e);var L,z=typeof A;if(z!=="string"){if(z==="object"){if(A===null)throw new Error(t);if(h&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!h||!ArrayBuffer.isView(A)))throw new Error(t)}else throw new Error(t);L=!0}for(var k=this.blocks,$=this.byteCount,W=A.length,H=this.blockCount,G=0,Z=this.s,J,Y;G<W;){if(this.reset)for(this.reset=!1,k[0]=this.block,J=1;J<H+1;++J)k[J]=0;if(L)for(J=this.start;G<W&&J<$;++G)k[J>>2]|=A[G]<<I[J++&3];else for(J=this.start;G<W&&J<$;++G)Y=A.charCodeAt(G),Y<128?k[J>>2]|=Y<<I[J++&3]:Y<2048?(k[J>>2]|=(192|Y>>6)<<I[J++&3],k[J>>2]|=(128|Y&63)<<I[J++&3]):Y<55296||Y>=57344?(k[J>>2]|=(224|Y>>12)<<I[J++&3],k[J>>2]|=(128|Y>>6&63)<<I[J++&3],k[J>>2]|=(128|Y&63)<<I[J++&3]):(Y=65536+((Y&1023)<<10|A.charCodeAt(++G)&1023),k[J>>2]|=(240|Y>>18)<<I[J++&3],k[J>>2]|=(128|Y>>12&63)<<I[J++&3],k[J>>2]|=(128|Y>>6&63)<<I[J++&3],k[J>>2]|=(128|Y&63)<<I[J++&3]);if(this.lastByteIndex=J,J>=$){for(this.start=J-$,this.block=k[H],J=0;J<H;++J)Z[J]^=k[J];q(Z),this.reset=!0}else this.start=J}return this},E.prototype.encode=function(A,L){var z=A&255,k=1,$=[z];for(A=A>>8,z=A&255;z>0;)$.unshift(z),A=A>>8,z=A&255,++k;return L?$.push(k):$.unshift(k),this.update($),$.length},E.prototype.encodeString=function(A){var L,z=typeof A;if(z!=="string"){if(z==="object"){if(A===null)throw new Error(t);if(h&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!h||!ArrayBuffer.isView(A)))throw new Error(t)}else throw new Error(t);L=!0}var k=0,$=A.length;if(L)k=$;else for(var W=0;W<A.length;++W){var H=A.charCodeAt(W);H<128?k+=1:H<2048?k+=2:H<55296||H>=57344?k+=3:(H=65536+((H&1023)<<10|A.charCodeAt(++W)&1023),k+=4)}return k+=this.encode(k*8),this.update(A),k},E.prototype.bytepad=function(A,L){for(var z=this.encode(L),k=0;k<A.length;++k)z+=this.encodeString(A[k]);var $=L-z%L,W=[];return W.length=$,this.update(W),this},E.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,L=this.lastByteIndex,z=this.blockCount,k=this.s;if(A[L>>2]|=this.padding[L&3],this.lastByteIndex===this.byteCount)for(A[0]=A[z],L=1;L<z+1;++L)A[L]=0;for(A[z-1]|=2147483648,L=0;L<z;++L)k[L]^=A[L];q(k)}},E.prototype.toString=E.prototype.hex=function(){this.finalize();for(var A=this.blockCount,L=this.s,z=this.outputBlocks,k=this.extraBytes,$=0,W=0,H="",G;W<z;){for($=0;$<A&&W<z;++$,++W)G=L[$],H+=d[G>>4&15]+d[G&15]+d[G>>12&15]+d[G>>8&15]+d[G>>20&15]+d[G>>16&15]+d[G>>28&15]+d[G>>24&15];W%A===0&&(q(L),$=0)}return k&&(G=L[$],H+=d[G>>4&15]+d[G&15],k>1&&(H+=d[G>>12&15]+d[G>>8&15]),k>2&&(H+=d[G>>20&15]+d[G>>16&15])),H},E.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,L=this.s,z=this.outputBlocks,k=this.extraBytes,$=0,W=0,H=this.outputBits>>3,G;k?G=new ArrayBuffer(z+1<<2):G=new ArrayBuffer(H);for(var Z=new Uint32Array(G);W<z;){for($=0;$<A&&W<z;++$,++W)Z[W]=L[$];W%A===0&&q(L)}return k&&(Z[$]=L[$],G=G.slice(0,H)),G},E.prototype.buffer=E.prototype.arrayBuffer,E.prototype.digest=E.prototype.array=function(){this.finalize();for(var A=this.blockCount,L=this.s,z=this.outputBlocks,k=this.extraBytes,$=0,W=0,H=[],G,Z;W<z;){for($=0;$<A&&W<z;++$,++W)G=W<<2,Z=L[$],H[G]=Z&255,H[G+1]=Z>>8&255,H[G+2]=Z>>16&255,H[G+3]=Z>>24&255;W%A===0&&q(L)}return k&&(G=W<<2,Z=L[$],H[G]=Z&255,k>1&&(H[G+1]=Z>>8&255),k>2&&(H[G+2]=Z>>16&255)),H};function N(A,L,z){E.call(this,A,L,z)}N.prototype=new E,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),E.prototype.finalize.call(this)};var q=function(A){var L,z,k,$,W,H,G,Z,J,Y,fr,oe,ae,kt,re,te,jt,ie,ne,$t,se,fe,cr,ce,ue,Mr,he,de,Or,le,pe,Rr,be,ge,Nr,ve,me,Pr,ye,we,Tr,xe,Ee,Dr,_e,Se,Cr,Ie,Ae,Lr,Me,Oe,Fr,Re,Ne,ur,ke,je,Kt,Vt,Ht,Gt,Jt;for(k=0;k<48;k+=2)$=A[0]^A[10]^A[20]^A[30]^A[40],W=A[1]^A[11]^A[21]^A[31]^A[41],H=A[2]^A[12]^A[22]^A[32]^A[42],G=A[3]^A[13]^A[23]^A[33]^A[43],Z=A[4]^A[14]^A[24]^A[34]^A[44],J=A[5]^A[15]^A[25]^A[35]^A[45],Y=A[6]^A[16]^A[26]^A[36]^A[46],fr=A[7]^A[17]^A[27]^A[37]^A[47],oe=A[8]^A[18]^A[28]^A[38]^A[48],ae=A[9]^A[19]^A[29]^A[39]^A[49],L=oe^(H<<1|G>>>31),z=ae^(G<<1|H>>>31),A[0]^=L,A[1]^=z,A[10]^=L,A[11]^=z,A[20]^=L,A[21]^=z,A[30]^=L,A[31]^=z,A[40]^=L,A[41]^=z,L=$^(Z<<1|J>>>31),z=W^(J<<1|Z>>>31),A[2]^=L,A[3]^=z,A[12]^=L,A[13]^=z,A[22]^=L,A[23]^=z,A[32]^=L,A[33]^=z,A[42]^=L,A[43]^=z,L=H^(Y<<1|fr>>>31),z=G^(fr<<1|Y>>>31),A[4]^=L,A[5]^=z,A[14]^=L,A[15]^=z,A[24]^=L,A[25]^=z,A[34]^=L,A[35]^=z,A[44]^=L,A[45]^=z,L=Z^(oe<<1|ae>>>31),z=J^(ae<<1|oe>>>31),A[6]^=L,A[7]^=z,A[16]^=L,A[17]^=z,A[26]^=L,A[27]^=z,A[36]^=L,A[37]^=z,A[46]^=L,A[47]^=z,L=Y^($<<1|W>>>31),z=fr^(W<<1|$>>>31),A[8]^=L,A[9]^=z,A[18]^=L,A[19]^=z,A[28]^=L,A[29]^=z,A[38]^=L,A[39]^=z,A[48]^=L,A[49]^=z,kt=A[0],re=A[1],Se=A[11]<<4|A[10]>>>28,Cr=A[10]<<4|A[11]>>>28,de=A[20]<<3|A[21]>>>29,Or=A[21]<<3|A[20]>>>29,Vt=A[31]<<9|A[30]>>>23,Ht=A[30]<<9|A[31]>>>23,xe=A[40]<<18|A[41]>>>14,Ee=A[41]<<18|A[40]>>>14,ge=A[2]<<1|A[3]>>>31,Nr=A[3]<<1|A[2]>>>31,te=A[13]<<12|A[12]>>>20,jt=A[12]<<12|A[13]>>>20,Ie=A[22]<<10|A[23]>>>22,Ae=A[23]<<10|A[22]>>>22,le=A[33]<<13|A[32]>>>19,pe=A[32]<<13|A[33]>>>19,Gt=A[42]<<2|A[43]>>>30,Jt=A[43]<<2|A[42]>>>30,Re=A[5]<<30|A[4]>>>2,Ne=A[4]<<30|A[5]>>>2,ve=A[14]<<6|A[15]>>>26,me=A[15]<<6|A[14]>>>26,ie=A[25]<<11|A[24]>>>21,ne=A[24]<<11|A[25]>>>21,Lr=A[34]<<15|A[35]>>>17,Me=A[35]<<15|A[34]>>>17,Rr=A[45]<<29|A[44]>>>3,be=A[44]<<29|A[45]>>>3,ce=A[6]<<28|A[7]>>>4,ue=A[7]<<28|A[6]>>>4,ur=A[17]<<23|A[16]>>>9,ke=A[16]<<23|A[17]>>>9,Pr=A[26]<<25|A[27]>>>7,ye=A[27]<<25|A[26]>>>7,$t=A[36]<<21|A[37]>>>11,se=A[37]<<21|A[36]>>>11,Oe=A[47]<<24|A[46]>>>8,Fr=A[46]<<24|A[47]>>>8,Dr=A[8]<<27|A[9]>>>5,_e=A[9]<<27|A[8]>>>5,Mr=A[18]<<20|A[19]>>>12,he=A[19]<<20|A[18]>>>12,je=A[29]<<7|A[28]>>>25,Kt=A[28]<<7|A[29]>>>25,we=A[38]<<8|A[39]>>>24,Tr=A[39]<<8|A[38]>>>24,fe=A[48]<<14|A[49]>>>18,cr=A[49]<<14|A[48]>>>18,A[0]=kt^~te&ie,A[1]=re^~jt&ne,A[10]=ce^~Mr&de,A[11]=ue^~he&Or,A[20]=ge^~ve&Pr,A[21]=Nr^~me&ye,A[30]=Dr^~Se&Ie,A[31]=_e^~Cr&Ae,A[40]=Re^~ur&je,A[41]=Ne^~ke&Kt,A[2]=te^~ie&$t,A[3]=jt^~ne&se,A[12]=Mr^~de&le,A[13]=he^~Or&pe,A[22]=ve^~Pr&we,A[23]=me^~ye&Tr,A[32]=Se^~Ie&Lr,A[33]=Cr^~Ae&Me,A[42]=ur^~je&Vt,A[43]=ke^~Kt&Ht,A[4]=ie^~$t&fe,A[5]=ne^~se&cr,A[14]=de^~le&Rr,A[15]=Or^~pe&be,A[24]=Pr^~we&xe,A[25]=ye^~Tr&Ee,A[34]=Ie^~Lr&Oe,A[35]=Ae^~Me&Fr,A[44]=je^~Vt&Gt,A[45]=Kt^~Ht&Jt,A[6]=$t^~fe&kt,A[7]=se^~cr&re,A[16]=le^~Rr&ce,A[17]=pe^~be&ue,A[26]=we^~xe&ge,A[27]=Tr^~Ee&Nr,A[36]=Lr^~Oe&Dr,A[37]=Me^~Fr&_e,A[46]=Vt^~Gt&Re,A[47]=Ht^~Jt&Ne,A[8]=fe^~kt&te,A[9]=cr^~re&jt,A[18]=Rr^~ce&Mr,A[19]=be^~ue&he,A[28]=xe^~ge&ve,A[29]=Ee^~Nr&me,A[38]=Oe^~Dr&Se,A[39]=Fr^~_e&Cr,A[48]=Gt^~Re&ur,A[49]=Jt^~Ne&ke,A[0]^=O[k],A[1]^=O[k+1]};if(o)Eu.exports=f;else{for(m=0;m<l.length;++m)i[l[m]]=f[l[m]];a&&define(function(){return f})}})()});var Su=X(()=>{});var y0=X((B2,m0)=>{(function(t,e){"use strict";function r(p,f){if(!p)throw new Error(f||"Assertion failed")}function i(p,f){p.super_=f;var l=function(){};l.prototype=f.prototype,p.prototype=new l,p.prototype.constructor=p}function n(p,f,l){if(n.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((f==="le"||f==="be")&&(l=f,f=10),this._init(p||0,f||10,l||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Su().Buffer}catch{}n.isBN=function(f){return f instanceof n?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===n.wordSize&&Array.isArray(f.words)},n.max=function(f,l){return f.cmp(l)>0?f:l},n.min=function(f,l){return f.cmp(l)<0?f:l},n.prototype._init=function(f,l,m){if(typeof f=="number")return this._initNumber(f,l,m);if(typeof f=="object")return this._initArray(f,l,m);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),f=f.toString().replace(/\s+/g,"");var x=0;f[0]==="-"&&(x++,this.negative=1),x<f.length&&(l===16?this._parseHex(f,x,m):(this._parseBase(f,l,x),m==="le"&&this._initArray(this.toArray(),l,m)))},n.prototype._initNumber=function(f,l,m){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),l,m)},n.prototype._initArray=function(f,l,m){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var v,c,w=0;if(m==="be")for(x=f.length-1,v=0;x>=0;x-=3)c=f[x]|f[x-1]<<8|f[x-2]<<16,this.words[v]|=c<<w&67108863,this.words[v+1]=c>>>26-w&67108863,w+=24,w>=26&&(w-=26,v++);else if(m==="le")for(x=0,v=0;x<f.length;x+=3)c=f[x]|f[x+1]<<8|f[x+2]<<16,this.words[v]|=c<<w&67108863,this.words[v+1]=c>>>26-w&67108863,w+=24,w>=26&&(w-=26,v++);return this._strip()};function o(p,f){var l=p.charCodeAt(f);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+p)}function a(p,f,l){var m=o(p,l);return l-1>=f&&(m|=o(p,l-1)<<4),m}n.prototype._parseHex=function(f,l,m){this.length=Math.ceil((f.length-l)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var v=0,c=0,w;if(m==="be")for(x=f.length-1;x>=l;x-=2)w=a(f,l,x)<<v,this.words[c]|=w&67108863,v>=18?(v-=18,c+=1,this.words[c]|=w>>>26):v+=8;else{var R=f.length-l;for(x=R%2===0?l+1:l;x<f.length;x+=2)w=a(f,l,x)<<v,this.words[c]|=w&67108863,v>=18?(v-=18,c+=1,this.words[c]|=w>>>26):v+=8}this._strip()};function h(p,f,l,m){for(var x=0,v=0,c=Math.min(p.length,l),w=f;w<c;w++){var R=p.charCodeAt(w)-48;x*=m,R>=49?v=R-49+10:R>=17?v=R-17+10:v=R,r(R>=0&&v<m,"Invalid character"),x+=v}return x}n.prototype._parseBase=function(f,l,m){this.words=[0],this.length=1;for(var x=0,v=1;v<=67108863;v*=l)x++;x--,v=v/l|0;for(var c=f.length-m,w=c%x,R=Math.min(c,c-w)+m,E=0,N=m;N<R;N+=x)E=h(f,N,N+x,l),this.imuln(v),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(w!==0){var q=1;for(E=h(f,N,f.length,l),N=0;N<w;N++)q*=l;this.imuln(q),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},n.prototype.copy=function(f){f.words=new Array(this.length);for(var l=0;l<this.length;l++)f.words[l]=this.words[l];f.length=this.length,f.negative=this.negative,f.red=this.red};function d(p,f){p.words=f.words,p.length=f.length,p.negative=f.negative,p.red=f.red}if(n.prototype._move=function(f){d(f,this)},n.prototype.clone=function(){var f=new n(null);return this.copy(f),f},n.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=g}catch{n.prototype.inspect=g}else n.prototype.inspect=g;function g(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(f,l){f=f||10,l=l|0||1;var m;if(f===16||f==="hex"){m="";for(var x=0,v=0,c=0;c<this.length;c++){var w=this.words[c],R=((w<<x|v)&16777215).toString(16);v=w>>>24-x&16777215,x+=2,x>=26&&(x-=26,c--),v!==0||c!==this.length-1?m=y[6-R.length]+R+m:m=R+m}for(v!==0&&(m=v.toString(16)+m);m.length%l!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(f===(f|0)&&f>=2&&f<=36){var E=_[f],N=S[f];m="";var q=this.clone();for(q.negative=0;!q.isZero();){var A=q.modrn(N).toString(f);q=q.idivn(N),q.isZero()?m=A+m:m=y[E-A.length]+A+m}for(this.isZero()&&(m="0"+m);m.length%l!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},n.prototype.toJSON=function(){return this.toString(16,2)},s&&(n.prototype.toBuffer=function(f,l){return this.toArrayLike(s,f,l)}),n.prototype.toArray=function(f,l){return this.toArrayLike(Array,f,l)};var I=function(f,l){return f.allocUnsafe?f.allocUnsafe(l):new f(l)};n.prototype.toArrayLike=function(f,l,m){this._strip();var x=this.byteLength(),v=m||Math.max(1,x);r(x<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0");var c=I(f,v),w=l==="le"?"LE":"BE";return this["_toArrayLike"+w](c,x),c},n.prototype._toArrayLikeLE=function(f,l){for(var m=0,x=0,v=0,c=0;v<this.length;v++){var w=this.words[v]<<c|x;f[m++]=w&255,m<f.length&&(f[m++]=w>>8&255),m<f.length&&(f[m++]=w>>16&255),c===6?(m<f.length&&(f[m++]=w>>24&255),x=0,c=0):(x=w>>>24,c+=2)}if(m<f.length)for(f[m++]=x;m<f.length;)f[m++]=0},n.prototype._toArrayLikeBE=function(f,l){for(var m=f.length-1,x=0,v=0,c=0;v<this.length;v++){var w=this.words[v]<<c|x;f[m--]=w&255,m>=0&&(f[m--]=w>>8&255),m>=0&&(f[m--]=w>>16&255),c===6?(m>=0&&(f[m--]=w>>24&255),x=0,c=0):(x=w>>>24,c+=2)}if(m>=0)for(f[m--]=x;m>=0;)f[m--]=0},Math.clz32?n.prototype._countBits=function(f){return 32-Math.clz32(f)}:n.prototype._countBits=function(f){var l=f,m=0;return l>=4096&&(m+=13,l>>>=13),l>=64&&(m+=7,l>>>=7),l>=8&&(m+=4,l>>>=4),l>=2&&(m+=2,l>>>=2),m+l},n.prototype._zeroBits=function(f){if(f===0)return 26;var l=f,m=0;return l&8191||(m+=13,l>>>=13),l&127||(m+=7,l>>>=7),l&15||(m+=4,l>>>=4),l&3||(m+=2,l>>>=2),l&1||m++,m},n.prototype.bitLength=function(){var f=this.words[this.length-1],l=this._countBits(f);return(this.length-1)*26+l};function O(p){for(var f=new Array(p.bitLength()),l=0;l<f.length;l++){var m=l/26|0,x=l%26;f[l]=p.words[m]>>>x&1}return f}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,l=0;l<this.length;l++){var m=this._zeroBits(this.words[l]);if(f+=m,m!==26)break}return f},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},n.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]|f.words[l];return this._strip()},n.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},n.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},n.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},n.prototype.iuand=function(f){var l;this.length>f.length?l=f:l=this;for(var m=0;m<l.length;m++)this.words[m]=this.words[m]&f.words[m];return this.length=l.length,this._strip()},n.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},n.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},n.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},n.prototype.iuxor=function(f){var l,m;this.length>f.length?(l=this,m=f):(l=f,m=this);for(var x=0;x<m.length;x++)this.words[x]=l.words[x]^m.words[x];if(this!==l)for(;x<l.length;x++)this.words[x]=l.words[x];return this.length=l.length,this._strip()},n.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},n.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},n.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},n.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var l=Math.ceil(f/26)|0,m=f%26;this._expand(l),m>0&&l--;for(var x=0;x<l;x++)this.words[x]=~this.words[x]&67108863;return m>0&&(this.words[x]=~this.words[x]&67108863>>26-m),this._strip()},n.prototype.notn=function(f){return this.clone().inotn(f)},n.prototype.setn=function(f,l){r(typeof f=="number"&&f>=0);var m=f/26|0,x=f%26;return this._expand(m+1),l?this.words[m]=this.words[m]|1<<x:this.words[m]=this.words[m]&~(1<<x),this._strip()},n.prototype.iadd=function(f){var l;if(this.negative!==0&&f.negative===0)return this.negative=0,l=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,l=this.isub(f),f.negative=1,l._normSign();var m,x;this.length>f.length?(m=this,x=f):(m=f,x=this);for(var v=0,c=0;c<x.length;c++)l=(m.words[c]|0)+(x.words[c]|0)+v,this.words[c]=l&67108863,v=l>>>26;for(;v!==0&&c<m.length;c++)l=(m.words[c]|0)+v,this.words[c]=l&67108863,v=l>>>26;if(this.length=m.length,v!==0)this.words[this.length]=v,this.length++;else if(m!==this)for(;c<m.length;c++)this.words[c]=m.words[c];return this},n.prototype.add=function(f){var l;return f.negative!==0&&this.negative===0?(f.negative=0,l=this.sub(f),f.negative^=1,l):f.negative===0&&this.negative!==0?(this.negative=0,l=f.sub(this),this.negative=1,l):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},n.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var l=this.iadd(f);return f.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var m=this.cmp(f);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,v;m>0?(x=this,v=f):(x=f,v=this);for(var c=0,w=0;w<v.length;w++)l=(x.words[w]|0)-(v.words[w]|0)+c,c=l>>26,this.words[w]=l&67108863;for(;c!==0&&w<x.length;w++)l=(x.words[w]|0)+c,c=l>>26,this.words[w]=l&67108863;if(c===0&&w<x.length&&x!==this)for(;w<x.length;w++)this.words[w]=x.words[w];return this.length=Math.max(this.length,w),x!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(f){return this.clone().isub(f)};function P(p,f,l){l.negative=f.negative^p.negative;var m=p.length+f.length|0;l.length=m,m=m-1|0;var x=p.words[0]|0,v=f.words[0]|0,c=x*v,w=c&67108863,R=c/67108864|0;l.words[0]=w;for(var E=1;E<m;E++){for(var N=R>>>26,q=R&67108863,A=Math.min(E,f.length-1),L=Math.max(0,E-p.length+1);L<=A;L++){var z=E-L|0;x=p.words[z]|0,v=f.words[L]|0,c=x*v+q,N+=c/67108864|0,q=c&67108863}l.words[E]=q|0,R=N|0}return R!==0?l.words[E]=R|0:l.length--,l._strip()}var T=function(f,l,m){var x=f.words,v=l.words,c=m.words,w=0,R,E,N,q=x[0]|0,A=q&8191,L=q>>>13,z=x[1]|0,k=z&8191,$=z>>>13,W=x[2]|0,H=W&8191,G=W>>>13,Z=x[3]|0,J=Z&8191,Y=Z>>>13,fr=x[4]|0,oe=fr&8191,ae=fr>>>13,kt=x[5]|0,re=kt&8191,te=kt>>>13,jt=x[6]|0,ie=jt&8191,ne=jt>>>13,$t=x[7]|0,se=$t&8191,fe=$t>>>13,cr=x[8]|0,ce=cr&8191,ue=cr>>>13,Mr=x[9]|0,he=Mr&8191,de=Mr>>>13,Or=v[0]|0,le=Or&8191,pe=Or>>>13,Rr=v[1]|0,be=Rr&8191,ge=Rr>>>13,Nr=v[2]|0,ve=Nr&8191,me=Nr>>>13,Pr=v[3]|0,ye=Pr&8191,we=Pr>>>13,Tr=v[4]|0,xe=Tr&8191,Ee=Tr>>>13,Dr=v[5]|0,_e=Dr&8191,Se=Dr>>>13,Cr=v[6]|0,Ie=Cr&8191,Ae=Cr>>>13,Lr=v[7]|0,Me=Lr&8191,Oe=Lr>>>13,Fr=v[8]|0,Re=Fr&8191,Ne=Fr>>>13,ur=v[9]|0,ke=ur&8191,je=ur>>>13;m.negative=f.negative^l.negative,m.length=19,R=Math.imul(A,le),E=Math.imul(A,pe),E=E+Math.imul(L,le)|0,N=Math.imul(L,pe);var Kt=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,R=Math.imul(k,le),E=Math.imul(k,pe),E=E+Math.imul($,le)|0,N=Math.imul($,pe),R=R+Math.imul(A,be)|0,E=E+Math.imul(A,ge)|0,E=E+Math.imul(L,be)|0,N=N+Math.imul(L,ge)|0;var Vt=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,R=Math.imul(H,le),E=Math.imul(H,pe),E=E+Math.imul(G,le)|0,N=Math.imul(G,pe),R=R+Math.imul(k,be)|0,E=E+Math.imul(k,ge)|0,E=E+Math.imul($,be)|0,N=N+Math.imul($,ge)|0,R=R+Math.imul(A,ve)|0,E=E+Math.imul(A,me)|0,E=E+Math.imul(L,ve)|0,N=N+Math.imul(L,me)|0;var Ht=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,R=Math.imul(J,le),E=Math.imul(J,pe),E=E+Math.imul(Y,le)|0,N=Math.imul(Y,pe),R=R+Math.imul(H,be)|0,E=E+Math.imul(H,ge)|0,E=E+Math.imul(G,be)|0,N=N+Math.imul(G,ge)|0,R=R+Math.imul(k,ve)|0,E=E+Math.imul(k,me)|0,E=E+Math.imul($,ve)|0,N=N+Math.imul($,me)|0,R=R+Math.imul(A,ye)|0,E=E+Math.imul(A,we)|0,E=E+Math.imul(L,ye)|0,N=N+Math.imul(L,we)|0;var Gt=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,R=Math.imul(oe,le),E=Math.imul(oe,pe),E=E+Math.imul(ae,le)|0,N=Math.imul(ae,pe),R=R+Math.imul(J,be)|0,E=E+Math.imul(J,ge)|0,E=E+Math.imul(Y,be)|0,N=N+Math.imul(Y,ge)|0,R=R+Math.imul(H,ve)|0,E=E+Math.imul(H,me)|0,E=E+Math.imul(G,ve)|0,N=N+Math.imul(G,me)|0,R=R+Math.imul(k,ye)|0,E=E+Math.imul(k,we)|0,E=E+Math.imul($,ye)|0,N=N+Math.imul($,we)|0,R=R+Math.imul(A,xe)|0,E=E+Math.imul(A,Ee)|0,E=E+Math.imul(L,xe)|0,N=N+Math.imul(L,Ee)|0;var Jt=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,R=Math.imul(re,le),E=Math.imul(re,pe),E=E+Math.imul(te,le)|0,N=Math.imul(te,pe),R=R+Math.imul(oe,be)|0,E=E+Math.imul(oe,ge)|0,E=E+Math.imul(ae,be)|0,N=N+Math.imul(ae,ge)|0,R=R+Math.imul(J,ve)|0,E=E+Math.imul(J,me)|0,E=E+Math.imul(Y,ve)|0,N=N+Math.imul(Y,me)|0,R=R+Math.imul(H,ye)|0,E=E+Math.imul(H,we)|0,E=E+Math.imul(G,ye)|0,N=N+Math.imul(G,we)|0,R=R+Math.imul(k,xe)|0,E=E+Math.imul(k,Ee)|0,E=E+Math.imul($,xe)|0,N=N+Math.imul($,Ee)|0,R=R+Math.imul(A,_e)|0,E=E+Math.imul(A,Se)|0,E=E+Math.imul(L,_e)|0,N=N+Math.imul(L,Se)|0;var fi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(fi>>>26)|0,fi&=67108863,R=Math.imul(ie,le),E=Math.imul(ie,pe),E=E+Math.imul(ne,le)|0,N=Math.imul(ne,pe),R=R+Math.imul(re,be)|0,E=E+Math.imul(re,ge)|0,E=E+Math.imul(te,be)|0,N=N+Math.imul(te,ge)|0,R=R+Math.imul(oe,ve)|0,E=E+Math.imul(oe,me)|0,E=E+Math.imul(ae,ve)|0,N=N+Math.imul(ae,me)|0,R=R+Math.imul(J,ye)|0,E=E+Math.imul(J,we)|0,E=E+Math.imul(Y,ye)|0,N=N+Math.imul(Y,we)|0,R=R+Math.imul(H,xe)|0,E=E+Math.imul(H,Ee)|0,E=E+Math.imul(G,xe)|0,N=N+Math.imul(G,Ee)|0,R=R+Math.imul(k,_e)|0,E=E+Math.imul(k,Se)|0,E=E+Math.imul($,_e)|0,N=N+Math.imul($,Se)|0,R=R+Math.imul(A,Ie)|0,E=E+Math.imul(A,Ae)|0,E=E+Math.imul(L,Ie)|0,N=N+Math.imul(L,Ae)|0;var ci=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(ci>>>26)|0,ci&=67108863,R=Math.imul(se,le),E=Math.imul(se,pe),E=E+Math.imul(fe,le)|0,N=Math.imul(fe,pe),R=R+Math.imul(ie,be)|0,E=E+Math.imul(ie,ge)|0,E=E+Math.imul(ne,be)|0,N=N+Math.imul(ne,ge)|0,R=R+Math.imul(re,ve)|0,E=E+Math.imul(re,me)|0,E=E+Math.imul(te,ve)|0,N=N+Math.imul(te,me)|0,R=R+Math.imul(oe,ye)|0,E=E+Math.imul(oe,we)|0,E=E+Math.imul(ae,ye)|0,N=N+Math.imul(ae,we)|0,R=R+Math.imul(J,xe)|0,E=E+Math.imul(J,Ee)|0,E=E+Math.imul(Y,xe)|0,N=N+Math.imul(Y,Ee)|0,R=R+Math.imul(H,_e)|0,E=E+Math.imul(H,Se)|0,E=E+Math.imul(G,_e)|0,N=N+Math.imul(G,Se)|0,R=R+Math.imul(k,Ie)|0,E=E+Math.imul(k,Ae)|0,E=E+Math.imul($,Ie)|0,N=N+Math.imul($,Ae)|0,R=R+Math.imul(A,Me)|0,E=E+Math.imul(A,Oe)|0,E=E+Math.imul(L,Me)|0,N=N+Math.imul(L,Oe)|0;var ui=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(ui>>>26)|0,ui&=67108863,R=Math.imul(ce,le),E=Math.imul(ce,pe),E=E+Math.imul(ue,le)|0,N=Math.imul(ue,pe),R=R+Math.imul(se,be)|0,E=E+Math.imul(se,ge)|0,E=E+Math.imul(fe,be)|0,N=N+Math.imul(fe,ge)|0,R=R+Math.imul(ie,ve)|0,E=E+Math.imul(ie,me)|0,E=E+Math.imul(ne,ve)|0,N=N+Math.imul(ne,me)|0,R=R+Math.imul(re,ye)|0,E=E+Math.imul(re,we)|0,E=E+Math.imul(te,ye)|0,N=N+Math.imul(te,we)|0,R=R+Math.imul(oe,xe)|0,E=E+Math.imul(oe,Ee)|0,E=E+Math.imul(ae,xe)|0,N=N+Math.imul(ae,Ee)|0,R=R+Math.imul(J,_e)|0,E=E+Math.imul(J,Se)|0,E=E+Math.imul(Y,_e)|0,N=N+Math.imul(Y,Se)|0,R=R+Math.imul(H,Ie)|0,E=E+Math.imul(H,Ae)|0,E=E+Math.imul(G,Ie)|0,N=N+Math.imul(G,Ae)|0,R=R+Math.imul(k,Me)|0,E=E+Math.imul(k,Oe)|0,E=E+Math.imul($,Me)|0,N=N+Math.imul($,Oe)|0,R=R+Math.imul(A,Re)|0,E=E+Math.imul(A,Ne)|0,E=E+Math.imul(L,Re)|0,N=N+Math.imul(L,Ne)|0;var hi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(hi>>>26)|0,hi&=67108863,R=Math.imul(he,le),E=Math.imul(he,pe),E=E+Math.imul(de,le)|0,N=Math.imul(de,pe),R=R+Math.imul(ce,be)|0,E=E+Math.imul(ce,ge)|0,E=E+Math.imul(ue,be)|0,N=N+Math.imul(ue,ge)|0,R=R+Math.imul(se,ve)|0,E=E+Math.imul(se,me)|0,E=E+Math.imul(fe,ve)|0,N=N+Math.imul(fe,me)|0,R=R+Math.imul(ie,ye)|0,E=E+Math.imul(ie,we)|0,E=E+Math.imul(ne,ye)|0,N=N+Math.imul(ne,we)|0,R=R+Math.imul(re,xe)|0,E=E+Math.imul(re,Ee)|0,E=E+Math.imul(te,xe)|0,N=N+Math.imul(te,Ee)|0,R=R+Math.imul(oe,_e)|0,E=E+Math.imul(oe,Se)|0,E=E+Math.imul(ae,_e)|0,N=N+Math.imul(ae,Se)|0,R=R+Math.imul(J,Ie)|0,E=E+Math.imul(J,Ae)|0,E=E+Math.imul(Y,Ie)|0,N=N+Math.imul(Y,Ae)|0,R=R+Math.imul(H,Me)|0,E=E+Math.imul(H,Oe)|0,E=E+Math.imul(G,Me)|0,N=N+Math.imul(G,Oe)|0,R=R+Math.imul(k,Re)|0,E=E+Math.imul(k,Ne)|0,E=E+Math.imul($,Re)|0,N=N+Math.imul($,Ne)|0,R=R+Math.imul(A,ke)|0,E=E+Math.imul(A,je)|0,E=E+Math.imul(L,ke)|0,N=N+Math.imul(L,je)|0;var di=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(di>>>26)|0,di&=67108863,R=Math.imul(he,be),E=Math.imul(he,ge),E=E+Math.imul(de,be)|0,N=Math.imul(de,ge),R=R+Math.imul(ce,ve)|0,E=E+Math.imul(ce,me)|0,E=E+Math.imul(ue,ve)|0,N=N+Math.imul(ue,me)|0,R=R+Math.imul(se,ye)|0,E=E+Math.imul(se,we)|0,E=E+Math.imul(fe,ye)|0,N=N+Math.imul(fe,we)|0,R=R+Math.imul(ie,xe)|0,E=E+Math.imul(ie,Ee)|0,E=E+Math.imul(ne,xe)|0,N=N+Math.imul(ne,Ee)|0,R=R+Math.imul(re,_e)|0,E=E+Math.imul(re,Se)|0,E=E+Math.imul(te,_e)|0,N=N+Math.imul(te,Se)|0,R=R+Math.imul(oe,Ie)|0,E=E+Math.imul(oe,Ae)|0,E=E+Math.imul(ae,Ie)|0,N=N+Math.imul(ae,Ae)|0,R=R+Math.imul(J,Me)|0,E=E+Math.imul(J,Oe)|0,E=E+Math.imul(Y,Me)|0,N=N+Math.imul(Y,Oe)|0,R=R+Math.imul(H,Re)|0,E=E+Math.imul(H,Ne)|0,E=E+Math.imul(G,Re)|0,N=N+Math.imul(G,Ne)|0,R=R+Math.imul(k,ke)|0,E=E+Math.imul(k,je)|0,E=E+Math.imul($,ke)|0,N=N+Math.imul($,je)|0;var li=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(li>>>26)|0,li&=67108863,R=Math.imul(he,ve),E=Math.imul(he,me),E=E+Math.imul(de,ve)|0,N=Math.imul(de,me),R=R+Math.imul(ce,ye)|0,E=E+Math.imul(ce,we)|0,E=E+Math.imul(ue,ye)|0,N=N+Math.imul(ue,we)|0,R=R+Math.imul(se,xe)|0,E=E+Math.imul(se,Ee)|0,E=E+Math.imul(fe,xe)|0,N=N+Math.imul(fe,Ee)|0,R=R+Math.imul(ie,_e)|0,E=E+Math.imul(ie,Se)|0,E=E+Math.imul(ne,_e)|0,N=N+Math.imul(ne,Se)|0,R=R+Math.imul(re,Ie)|0,E=E+Math.imul(re,Ae)|0,E=E+Math.imul(te,Ie)|0,N=N+Math.imul(te,Ae)|0,R=R+Math.imul(oe,Me)|0,E=E+Math.imul(oe,Oe)|0,E=E+Math.imul(ae,Me)|0,N=N+Math.imul(ae,Oe)|0,R=R+Math.imul(J,Re)|0,E=E+Math.imul(J,Ne)|0,E=E+Math.imul(Y,Re)|0,N=N+Math.imul(Y,Ne)|0,R=R+Math.imul(H,ke)|0,E=E+Math.imul(H,je)|0,E=E+Math.imul(G,ke)|0,N=N+Math.imul(G,je)|0;var pi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(pi>>>26)|0,pi&=67108863,R=Math.imul(he,ye),E=Math.imul(he,we),E=E+Math.imul(de,ye)|0,N=Math.imul(de,we),R=R+Math.imul(ce,xe)|0,E=E+Math.imul(ce,Ee)|0,E=E+Math.imul(ue,xe)|0,N=N+Math.imul(ue,Ee)|0,R=R+Math.imul(se,_e)|0,E=E+Math.imul(se,Se)|0,E=E+Math.imul(fe,_e)|0,N=N+Math.imul(fe,Se)|0,R=R+Math.imul(ie,Ie)|0,E=E+Math.imul(ie,Ae)|0,E=E+Math.imul(ne,Ie)|0,N=N+Math.imul(ne,Ae)|0,R=R+Math.imul(re,Me)|0,E=E+Math.imul(re,Oe)|0,E=E+Math.imul(te,Me)|0,N=N+Math.imul(te,Oe)|0,R=R+Math.imul(oe,Re)|0,E=E+Math.imul(oe,Ne)|0,E=E+Math.imul(ae,Re)|0,N=N+Math.imul(ae,Ne)|0,R=R+Math.imul(J,ke)|0,E=E+Math.imul(J,je)|0,E=E+Math.imul(Y,ke)|0,N=N+Math.imul(Y,je)|0;var bi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(bi>>>26)|0,bi&=67108863,R=Math.imul(he,xe),E=Math.imul(he,Ee),E=E+Math.imul(de,xe)|0,N=Math.imul(de,Ee),R=R+Math.imul(ce,_e)|0,E=E+Math.imul(ce,Se)|0,E=E+Math.imul(ue,_e)|0,N=N+Math.imul(ue,Se)|0,R=R+Math.imul(se,Ie)|0,E=E+Math.imul(se,Ae)|0,E=E+Math.imul(fe,Ie)|0,N=N+Math.imul(fe,Ae)|0,R=R+Math.imul(ie,Me)|0,E=E+Math.imul(ie,Oe)|0,E=E+Math.imul(ne,Me)|0,N=N+Math.imul(ne,Oe)|0,R=R+Math.imul(re,Re)|0,E=E+Math.imul(re,Ne)|0,E=E+Math.imul(te,Re)|0,N=N+Math.imul(te,Ne)|0,R=R+Math.imul(oe,ke)|0,E=E+Math.imul(oe,je)|0,E=E+Math.imul(ae,ke)|0,N=N+Math.imul(ae,je)|0;var gi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(gi>>>26)|0,gi&=67108863,R=Math.imul(he,_e),E=Math.imul(he,Se),E=E+Math.imul(de,_e)|0,N=Math.imul(de,Se),R=R+Math.imul(ce,Ie)|0,E=E+Math.imul(ce,Ae)|0,E=E+Math.imul(ue,Ie)|0,N=N+Math.imul(ue,Ae)|0,R=R+Math.imul(se,Me)|0,E=E+Math.imul(se,Oe)|0,E=E+Math.imul(fe,Me)|0,N=N+Math.imul(fe,Oe)|0,R=R+Math.imul(ie,Re)|0,E=E+Math.imul(ie,Ne)|0,E=E+Math.imul(ne,Re)|0,N=N+Math.imul(ne,Ne)|0,R=R+Math.imul(re,ke)|0,E=E+Math.imul(re,je)|0,E=E+Math.imul(te,ke)|0,N=N+Math.imul(te,je)|0;var vi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(vi>>>26)|0,vi&=67108863,R=Math.imul(he,Ie),E=Math.imul(he,Ae),E=E+Math.imul(de,Ie)|0,N=Math.imul(de,Ae),R=R+Math.imul(ce,Me)|0,E=E+Math.imul(ce,Oe)|0,E=E+Math.imul(ue,Me)|0,N=N+Math.imul(ue,Oe)|0,R=R+Math.imul(se,Re)|0,E=E+Math.imul(se,Ne)|0,E=E+Math.imul(fe,Re)|0,N=N+Math.imul(fe,Ne)|0,R=R+Math.imul(ie,ke)|0,E=E+Math.imul(ie,je)|0,E=E+Math.imul(ne,ke)|0,N=N+Math.imul(ne,je)|0;var mi=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(mi>>>26)|0,mi&=67108863,R=Math.imul(he,Me),E=Math.imul(he,Oe),E=E+Math.imul(de,Me)|0,N=Math.imul(de,Oe),R=R+Math.imul(ce,Re)|0,E=E+Math.imul(ce,Ne)|0,E=E+Math.imul(ue,Re)|0,N=N+Math.imul(ue,Ne)|0,R=R+Math.imul(se,ke)|0,E=E+Math.imul(se,je)|0,E=E+Math.imul(fe,ke)|0,N=N+Math.imul(fe,je)|0;var Jd=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Jd>>>26)|0,Jd&=67108863,R=Math.imul(he,Re),E=Math.imul(he,Ne),E=E+Math.imul(de,Re)|0,N=Math.imul(de,Ne),R=R+Math.imul(ce,ke)|0,E=E+Math.imul(ce,je)|0,E=E+Math.imul(ue,ke)|0,N=N+Math.imul(ue,je)|0;var Wd=(w+R|0)+((E&8191)<<13)|0;w=(N+(E>>>13)|0)+(Wd>>>26)|0,Wd&=67108863,R=Math.imul(he,ke),E=Math.imul(he,je),E=E+Math.imul(de,ke)|0,N=Math.imul(de,je);var Yd=(w+R|0)+((E&8191)<<13)|0;return w=(N+(E>>>13)|0)+(Yd>>>26)|0,Yd&=67108863,c[0]=Kt,c[1]=Vt,c[2]=Ht,c[3]=Gt,c[4]=Jt,c[5]=fi,c[6]=ci,c[7]=ui,c[8]=hi,c[9]=di,c[10]=li,c[11]=pi,c[12]=bi,c[13]=gi,c[14]=vi,c[15]=mi,c[16]=Jd,c[17]=Wd,c[18]=Yd,w!==0&&(c[19]=w,m.length++),m};Math.imul||(T=P);function U(p,f,l){l.negative=f.negative^p.negative,l.length=p.length+f.length;for(var m=0,x=0,v=0;v<l.length-1;v++){var c=x;x=0;for(var w=m&67108863,R=Math.min(v,f.length-1),E=Math.max(0,v-p.length+1);E<=R;E++){var N=v-E,q=p.words[N]|0,A=f.words[E]|0,L=q*A,z=L&67108863;c=c+(L/67108864|0)|0,z=z+w|0,w=z&67108863,c=c+(z>>>26)|0,x+=c>>>26,c&=67108863}l.words[v]=w,m=c,c=x}return m!==0?l.words[v]=m:l.length--,l._strip()}function D(p,f,l){return U(p,f,l)}n.prototype.mulTo=function(f,l){var m,x=this.length+f.length;return this.length===10&&f.length===10?m=T(this,f,l):x<63?m=P(this,f,l):x<1024?m=U(this,f,l):m=D(this,f,l),m};function F(p,f){this.x=p,this.y=f}F.prototype.makeRBT=function(f){for(var l=new Array(f),m=n.prototype._countBits(f)-1,x=0;x<f;x++)l[x]=this.revBin(x,m,f);return l},F.prototype.revBin=function(f,l,m){if(f===0||f===m-1)return f;for(var x=0,v=0;v<l;v++)x|=(f&1)<<l-v-1,f>>=1;return x},F.prototype.permute=function(f,l,m,x,v,c){for(var w=0;w<c;w++)x[w]=l[f[w]],v[w]=m[f[w]]},F.prototype.transform=function(f,l,m,x,v,c){this.permute(c,f,l,m,x,v);for(var w=1;w<v;w<<=1)for(var R=w<<1,E=Math.cos(2*Math.PI/R),N=Math.sin(2*Math.PI/R),q=0;q<v;q+=R)for(var A=E,L=N,z=0;z<w;z++){var k=m[q+z],$=x[q+z],W=m[q+z+w],H=x[q+z+w],G=A*W-L*H;H=A*H+L*W,W=G,m[q+z]=k+W,x[q+z]=$+H,m[q+z+w]=k-W,x[q+z+w]=$-H,z!==R&&(G=E*A-N*L,L=E*L+N*A,A=G)}},F.prototype.guessLen13b=function(f,l){var m=Math.max(l,f)|1,x=m&1,v=0;for(m=m/2|0;m;m=m>>>1)v++;return 1<<v+1+x},F.prototype.conjugate=function(f,l,m){if(!(m<=1))for(var x=0;x<m/2;x++){var v=f[x];f[x]=f[m-x-1],f[m-x-1]=v,v=l[x],l[x]=-l[m-x-1],l[m-x-1]=-v}},F.prototype.normalize13b=function(f,l){for(var m=0,x=0;x<l/2;x++){var v=Math.round(f[2*x+1]/l)*8192+Math.round(f[2*x]/l)+m;f[x]=v&67108863,v<67108864?m=0:m=v/67108864|0}return f},F.prototype.convert13b=function(f,l,m,x){for(var v=0,c=0;c<l;c++)v=v+(f[c]|0),m[2*c]=v&8191,v=v>>>13,m[2*c+1]=v&8191,v=v>>>13;for(c=2*l;c<x;++c)m[c]=0;r(v===0),r((v&-8192)===0)},F.prototype.stub=function(f){for(var l=new Array(f),m=0;m<f;m++)l[m]=0;return l},F.prototype.mulp=function(f,l,m){var x=2*this.guessLen13b(f.length,l.length),v=this.makeRBT(x),c=this.stub(x),w=new Array(x),R=new Array(x),E=new Array(x),N=new Array(x),q=new Array(x),A=new Array(x),L=m.words;L.length=x,this.convert13b(f.words,f.length,w,x),this.convert13b(l.words,l.length,N,x),this.transform(w,c,R,E,x,v),this.transform(N,c,q,A,x,v);for(var z=0;z<x;z++){var k=R[z]*q[z]-E[z]*A[z];E[z]=R[z]*A[z]+E[z]*q[z],R[z]=k}return this.conjugate(R,E,x),this.transform(R,E,L,c,x,v),this.conjugate(L,c,x),this.normalize13b(L,x),m.negative=f.negative^l.negative,m.length=f.length+l.length,m._strip()},n.prototype.mul=function(f){var l=new n(null);return l.words=new Array(this.length+f.length),this.mulTo(f,l)},n.prototype.mulf=function(f){var l=new n(null);return l.words=new Array(this.length+f.length),D(this,f,l)},n.prototype.imul=function(f){return this.clone().mulTo(f,this)},n.prototype.imuln=function(f){var l=f<0;l&&(f=-f),r(typeof f=="number"),r(f<67108864);for(var m=0,x=0;x<this.length;x++){var v=(this.words[x]|0)*f,c=(v&67108863)+(m&67108863);m>>=26,m+=v/67108864|0,m+=c>>>26,this.words[x]=c&67108863}return m!==0&&(this.words[x]=m,this.length++),this.length=f===0?1:this.length,l?this.ineg():this},n.prototype.muln=function(f){return this.clone().imuln(f)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(f){var l=O(f);if(l.length===0)return new n(1);for(var m=this,x=0;x<l.length&&l[x]===0;x++,m=m.sqr());if(++x<l.length)for(var v=m.sqr();x<l.length;x++,v=v.sqr())l[x]!==0&&(m=m.mul(v));return m},n.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var l=f%26,m=(f-l)/26,x=67108863>>>26-l<<26-l,v;if(l!==0){var c=0;for(v=0;v<this.length;v++){var w=this.words[v]&x,R=(this.words[v]|0)-w<<l;this.words[v]=R|c,c=w>>>26-l}c&&(this.words[v]=c,this.length++)}if(m!==0){for(v=this.length-1;v>=0;v--)this.words[v+m]=this.words[v];for(v=0;v<m;v++)this.words[v]=0;this.length+=m}return this._strip()},n.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},n.prototype.iushrn=function(f,l,m){r(typeof f=="number"&&f>=0);var x;l?x=(l-l%26)/26:x=0;var v=f%26,c=Math.min((f-v)/26,this.length),w=67108863^67108863>>>v<<v,R=m;if(x-=c,x=Math.max(0,x),R){for(var E=0;E<c;E++)R.words[E]=this.words[E];R.length=c}if(c!==0)if(this.length>c)for(this.length-=c,E=0;E<this.length;E++)this.words[E]=this.words[E+c];else this.words[0]=0,this.length=1;var N=0;for(E=this.length-1;E>=0&&(N!==0||E>=x);E--){var q=this.words[E]|0;this.words[E]=N<<26-v|q>>>v,N=q&w}return R&&N!==0&&(R.words[R.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(f,l,m){return r(this.negative===0),this.iushrn(f,l,m)},n.prototype.shln=function(f){return this.clone().ishln(f)},n.prototype.ushln=function(f){return this.clone().iushln(f)},n.prototype.shrn=function(f){return this.clone().ishrn(f)},n.prototype.ushrn=function(f){return this.clone().iushrn(f)},n.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var l=f%26,m=(f-l)/26,x=1<<l;if(this.length<=m)return!1;var v=this.words[m];return!!(v&x)},n.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var l=f%26,m=(f-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(l!==0&&m++,this.length=Math.min(m,this.length),l!==0){var x=67108863^67108863>>>l<<l;this.words[this.length-1]&=x}return this._strip()},n.prototype.maskn=function(f){return this.clone().imaskn(f)},n.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},n.prototype._iaddn=function(f){this.words[0]+=f;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},n.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},n.prototype.addn=function(f){return this.clone().iaddn(f)},n.prototype.subn=function(f){return this.clone().isubn(f)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(f,l,m){var x=f.length+m,v;this._expand(x);var c,w=0;for(v=0;v<f.length;v++){c=(this.words[v+m]|0)+w;var R=(f.words[v]|0)*l;c-=R&67108863,w=(c>>26)-(R/67108864|0),this.words[v+m]=c&67108863}for(;v<this.length-m;v++)c=(this.words[v+m]|0)+w,w=c>>26,this.words[v+m]=c&67108863;if(w===0)return this._strip();for(r(w===-1),w=0,v=0;v<this.length;v++)c=-(this.words[v]|0)+w,w=c>>26,this.words[v]=c&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(f,l){var m=this.length-f.length,x=this.clone(),v=f,c=v.words[v.length-1]|0,w=this._countBits(c);m=26-w,m!==0&&(v=v.ushln(m),x.iushln(m),c=v.words[v.length-1]|0);var R=x.length-v.length,E;if(l!=="mod"){E=new n(null),E.length=R+1,E.words=new Array(E.length);for(var N=0;N<E.length;N++)E.words[N]=0}var q=x.clone()._ishlnsubmul(v,1,R);q.negative===0&&(x=q,E&&(E.words[R]=1));for(var A=R-1;A>=0;A--){var L=(x.words[v.length+A]|0)*67108864+(x.words[v.length+A-1]|0);for(L=Math.min(L/c|0,67108863),x._ishlnsubmul(v,L,A);x.negative!==0;)L--,x.negative=0,x._ishlnsubmul(v,1,A),x.isZero()||(x.negative^=1);E&&(E.words[A]=L)}return E&&E._strip(),x._strip(),l!=="div"&&m!==0&&x.iushrn(m),{div:E||null,mod:x}},n.prototype.divmod=function(f,l,m){if(r(!f.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var x,v,c;return this.negative!==0&&f.negative===0?(c=this.neg().divmod(f,l),l!=="mod"&&(x=c.div.neg()),l!=="div"&&(v=c.mod.neg(),m&&v.negative!==0&&v.iadd(f)),{div:x,mod:v}):this.negative===0&&f.negative!==0?(c=this.divmod(f.neg(),l),l!=="mod"&&(x=c.div.neg()),{div:x,mod:c.mod}):this.negative&f.negative?(c=this.neg().divmod(f.neg(),l),l!=="div"&&(v=c.mod.neg(),m&&v.negative!==0&&v.isub(f)),{div:c.div,mod:v}):f.length>this.length||this.cmp(f)<0?{div:new n(0),mod:this}:f.length===1?l==="div"?{div:this.divn(f.words[0]),mod:null}:l==="mod"?{div:null,mod:new n(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new n(this.modrn(f.words[0]))}:this._wordDiv(f,l)},n.prototype.div=function(f){return this.divmod(f,"div",!1).div},n.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},n.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},n.prototype.divRound=function(f){var l=this.divmod(f);if(l.mod.isZero())return l.div;var m=l.div.negative!==0?l.mod.isub(f):l.mod,x=f.ushrn(1),v=f.andln(1),c=m.cmp(x);return c<0||v===1&&c===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},n.prototype.modrn=function(f){var l=f<0;l&&(f=-f),r(f<=67108863);for(var m=(1<<26)%f,x=0,v=this.length-1;v>=0;v--)x=(m*x+(this.words[v]|0))%f;return l?-x:x},n.prototype.modn=function(f){return this.modrn(f)},n.prototype.idivn=function(f){var l=f<0;l&&(f=-f),r(f<=67108863);for(var m=0,x=this.length-1;x>=0;x--){var v=(this.words[x]|0)+m*67108864;this.words[x]=v/f|0,m=v%f}return this._strip(),l?this.ineg():this},n.prototype.divn=function(f){return this.clone().idivn(f)},n.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var l=this,m=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var x=new n(1),v=new n(0),c=new n(0),w=new n(1),R=0;l.isEven()&&m.isEven();)l.iushrn(1),m.iushrn(1),++R;for(var E=m.clone(),N=l.clone();!l.isZero();){for(var q=0,A=1;!(l.words[0]&A)&&q<26;++q,A<<=1);if(q>0)for(l.iushrn(q);q-- >0;)(x.isOdd()||v.isOdd())&&(x.iadd(E),v.isub(N)),x.iushrn(1),v.iushrn(1);for(var L=0,z=1;!(m.words[0]&z)&&L<26;++L,z<<=1);if(L>0)for(m.iushrn(L);L-- >0;)(c.isOdd()||w.isOdd())&&(c.iadd(E),w.isub(N)),c.iushrn(1),w.iushrn(1);l.cmp(m)>=0?(l.isub(m),x.isub(c),v.isub(w)):(m.isub(l),c.isub(x),w.isub(v))}return{a:c,b:w,gcd:m.iushln(R)}},n.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var l=this,m=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var x=new n(1),v=new n(0),c=m.clone();l.cmpn(1)>0&&m.cmpn(1)>0;){for(var w=0,R=1;!(l.words[0]&R)&&w<26;++w,R<<=1);if(w>0)for(l.iushrn(w);w-- >0;)x.isOdd()&&x.iadd(c),x.iushrn(1);for(var E=0,N=1;!(m.words[0]&N)&&E<26;++E,N<<=1);if(E>0)for(m.iushrn(E);E-- >0;)v.isOdd()&&v.iadd(c),v.iushrn(1);l.cmp(m)>=0?(l.isub(m),x.isub(v)):(m.isub(l),v.isub(x))}var q;return l.cmpn(1)===0?q=x:q=v,q.cmpn(0)<0&&q.iadd(f),q},n.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var l=this.clone(),m=f.clone();l.negative=0,m.negative=0;for(var x=0;l.isEven()&&m.isEven();x++)l.iushrn(1),m.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;m.isEven();)m.iushrn(1);var v=l.cmp(m);if(v<0){var c=l;l=m,m=c}else if(v===0||m.cmpn(1)===0)break;l.isub(m)}while(!0);return m.iushln(x)},n.prototype.invm=function(f){return this.egcd(f).a.umod(f)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(f){return this.words[0]&f},n.prototype.bincn=function(f){r(typeof f=="number");var l=f%26,m=(f-l)/26,x=1<<l;if(this.length<=m)return this._expand(m+1),this.words[m]|=x,this;for(var v=x,c=m;v!==0&&c<this.length;c++){var w=this.words[c]|0;w+=v,v=w>>>26,w&=67108863,this.words[c]=w}return v!==0&&(this.words[c]=v,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(f){var l=f<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var m;if(this.length>1)m=1;else{l&&(f=-f),r(f<=67108863,"Number is too big");var x=this.words[0]|0;m=x===f?0:x<f?-1:1}return this.negative!==0?-m|0:m},n.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var l=this.ucmp(f);return this.negative!==0?-l|0:l},n.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var l=0,m=this.length-1;m>=0;m--){var x=this.words[m]|0,v=f.words[m]|0;if(x!==v){x<v?l=-1:x>v&&(l=1);break}}return l},n.prototype.gtn=function(f){return this.cmpn(f)===1},n.prototype.gt=function(f){return this.cmp(f)===1},n.prototype.gten=function(f){return this.cmpn(f)>=0},n.prototype.gte=function(f){return this.cmp(f)>=0},n.prototype.ltn=function(f){return this.cmpn(f)===-1},n.prototype.lt=function(f){return this.cmp(f)===-1},n.prototype.lten=function(f){return this.cmpn(f)<=0},n.prototype.lte=function(f){return this.cmp(f)<=0},n.prototype.eqn=function(f){return this.cmpn(f)===0},n.prototype.eq=function(f){return this.cmp(f)===0},n.red=function(f){return new u(f)},n.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(f){return this.red=f,this},n.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},n.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},n.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},n.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},n.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},n.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},n.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},n.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var j={k256:null,p224:null,p192:null,p25519:null};function V(p,f){this.name=p,this.p=new n(f,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var f=new n(null);return f.words=new Array(Math.ceil(this.n/13)),f},V.prototype.ireduce=function(f){var l=f,m;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),m=l.bitLength();while(m>this.n);var x=m<this.n?-1:l.ucmp(this.p);return x===0?(l.words[0]=0,l.length=1):x>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},V.prototype.split=function(f,l){f.iushrn(this.n,0,l)},V.prototype.imulK=function(f){return f.imul(this.k)};function B(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(B,V),B.prototype.split=function(f,l){for(var m=4194303,x=Math.min(f.length,9),v=0;v<x;v++)l.words[v]=f.words[v];if(l.length=x,f.length<=9){f.words[0]=0,f.length=1;return}var c=f.words[9];for(l.words[l.length++]=c&m,v=10;v<f.length;v++){var w=f.words[v]|0;f.words[v-10]=(w&m)<<4|c>>>22,c=w}c>>>=22,f.words[v-10]=c,c===0&&f.length>10?f.length-=10:f.length-=9},B.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var l=0,m=0;m<f.length;m++){var x=f.words[m]|0;l+=x*977,f.words[m]=l&67108863,l=x*64+(l/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function C(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(C,V);function K(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(K,V);function M(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(M,V),M.prototype.imulK=function(f){for(var l=0,m=0;m<f.length;m++){var x=(f.words[m]|0)*19+l,v=x&67108863;x>>>=26,f.words[m]=v,l=x}return l!==0&&(f.words[f.length++]=l),f},n._prime=function(f){if(j[f])return j[f];var l;if(f==="k256")l=new B;else if(f==="p224")l=new C;else if(f==="p192")l=new K;else if(f==="p25519")l=new M;else throw new Error("Unknown prime "+f);return j[f]=l,l};function u(p){if(typeof p=="string"){var f=n._prime(p);this.m=f.p,this.prime=f}else r(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}u.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},u.prototype._verify2=function(f,l){r((f.negative|l.negative)===0,"red works only with positives"),r(f.red&&f.red===l.red,"red works only with red numbers")},u.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(d(f,f.umod(this.m)._forceRed(this)),f)},u.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},u.prototype.add=function(f,l){this._verify2(f,l);var m=f.add(l);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},u.prototype.iadd=function(f,l){this._verify2(f,l);var m=f.iadd(l);return m.cmp(this.m)>=0&&m.isub(this.m),m},u.prototype.sub=function(f,l){this._verify2(f,l);var m=f.sub(l);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},u.prototype.isub=function(f,l){this._verify2(f,l);var m=f.isub(l);return m.cmpn(0)<0&&m.iadd(this.m),m},u.prototype.shl=function(f,l){return this._verify1(f),this.imod(f.ushln(l))},u.prototype.imul=function(f,l){return this._verify2(f,l),this.imod(f.imul(l))},u.prototype.mul=function(f,l){return this._verify2(f,l),this.imod(f.mul(l))},u.prototype.isqr=function(f){return this.imul(f,f.clone())},u.prototype.sqr=function(f){return this.mul(f,f)},u.prototype.sqrt=function(f){if(f.isZero())return f.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var m=this.m.add(new n(1)).iushrn(2);return this.pow(f,m)}for(var x=this.m.subn(1),v=0;!x.isZero()&&x.andln(1)===0;)v++,x.iushrn(1);r(!x.isZero());var c=new n(1).toRed(this),w=c.redNeg(),R=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new n(2*E*E).toRed(this);this.pow(E,R).cmp(w)!==0;)E.redIAdd(w);for(var N=this.pow(E,x),q=this.pow(f,x.addn(1).iushrn(1)),A=this.pow(f,x),L=v;A.cmp(c)!==0;){for(var z=A,k=0;z.cmp(c)!==0;k++)z=z.redSqr();r(k<L);var $=this.pow(N,new n(1).iushln(L-k-1));q=q.redMul($),N=$.redSqr(),A=A.redMul(N),L=k}return q},u.prototype.invm=function(f){var l=f._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},u.prototype.pow=function(f,l){if(l.isZero())return new n(1).toRed(this);if(l.cmpn(1)===0)return f.clone();var m=4,x=new Array(1<<m);x[0]=new n(1).toRed(this),x[1]=f;for(var v=2;v<x.length;v++)x[v]=this.mul(x[v-1],f);var c=x[0],w=0,R=0,E=l.bitLength()%26;for(E===0&&(E=26),v=l.length-1;v>=0;v--){for(var N=l.words[v],q=E-1;q>=0;q--){var A=N>>q&1;if(c!==x[0]&&(c=this.sqr(c)),A===0&&w===0){R=0;continue}w<<=1,w|=A,R++,!(R!==m&&(v!==0||q!==0))&&(c=this.mul(c,x[w]),R=0,w=0)}E=26}return c},u.prototype.convertTo=function(f){var l=f.umod(this.m);return l===f?l.clone():l},u.prototype.convertFrom=function(f){var l=f.clone();return l.red=null,l},n.mont=function(f){return new b(f)};function b(p){u.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(b,u),b.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},b.prototype.convertFrom=function(f){var l=this.imod(f.mul(this.rinv));return l.red=null,l},b.prototype.imul=function(f,l){if(f.isZero()||l.isZero())return f.words[0]=0,f.length=1,f;var m=f.imul(l),x=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(x).iushrn(this.shift),c=v;return v.cmp(this.m)>=0?c=v.isub(this.m):v.cmpn(0)<0&&(c=v.iadd(this.m)),c._forceRed(this)},b.prototype.mul=function(f,l){if(f.isZero()||l.isZero())return new n(0)._forceRed(this);var m=f.mul(l),x=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=m.isub(x).iushrn(this.shift),c=v;return v.cmp(this.m)>=0?c=v.isub(this.m):v.cmpn(0)<0&&(c=v.iadd(this.m)),c._forceRed(this)},b.prototype.invm=function(f){var l=this.imod(f._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof m0>"u"||m0,B2)});var xn=X((UV,W2)=>{W2.exports=J2;function J2(t,e){if(!t)throw new Error(e||"Assertion failed")}J2.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)}});var Jn=X((qV,E0)=>{typeof Object.create=="function"?E0.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:E0.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var Ei=X(Xe=>{"use strict";var tA=xn(),rA=Jn();Xe.inherits=rA;function iA(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function nA(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):iA(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}Xe.toArray=nA;function sA(t){for(var e="",r=0;r<t.length;r++)e+=X2(t[r].toString(16));return e}Xe.toHex=sA;function Y2(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Xe.htonl=Y2;function oA(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=Y2(n)),r+=Z2(n.toString(16))}return r}Xe.toHex32=oA;function X2(t){return t.length===1?"0"+t:t}Xe.zero2=X2;function Z2(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Xe.zero8=Z2;function aA(t,e,r,i){var n=r-e;tA(n%4===0);for(var s=new Array(n/4),o=0,a=e;o<s.length;o++,a+=4){var h;i==="big"?h=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:h=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=h>>>0}return s}Xe.join32=aA;function fA(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}Xe.split32=fA;function cA(t,e){return t>>>e|t<<32-e}Xe.rotr32=cA;function uA(t,e){return t<<e|t>>>32-e}Xe.rotl32=uA;function hA(t,e){return t+e>>>0}Xe.sum32=hA;function dA(t,e,r){return t+e+r>>>0}Xe.sum32_3=dA;function lA(t,e,r,i){return t+e+r+i>>>0}Xe.sum32_4=lA;function pA(t,e,r,i,n){return t+e+r+i+n>>>0}Xe.sum32_5=pA;function bA(t,e,r,i){var n=t[e],s=t[e+1],o=i+s>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o}Xe.sum64=bA;function gA(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}Xe.sum64_hi=gA;function vA(t,e,r,i){var n=e+i;return n>>>0}Xe.sum64_lo=vA;function mA(t,e,r,i,n,s,o,a){var h=0,d=e;d=d+i>>>0,h+=d<e?1:0,d=d+s>>>0,h+=d<s?1:0,d=d+a>>>0,h+=d<a?1:0;var g=t+r+n+o+h;return g>>>0}Xe.sum64_4_hi=mA;function yA(t,e,r,i,n,s,o,a){var h=e+i+s+a;return h>>>0}Xe.sum64_4_lo=yA;function wA(t,e,r,i,n,s,o,a,h,d){var g=0,y=e;y=y+i>>>0,g+=y<e?1:0,y=y+s>>>0,g+=y<s?1:0,y=y+a>>>0,g+=y<a?1:0,y=y+d>>>0,g+=y<d?1:0;var _=t+r+n+o+h+g;return _>>>0}Xe.sum64_5_hi=wA;function xA(t,e,r,i,n,s,o,a,h,d){var g=e+i+s+a+d;return g>>>0}Xe.sum64_5_lo=xA;function EA(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Xe.rotr64_hi=EA;function _A(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Xe.rotr64_lo=_A;function SA(t,e,r){return t>>>r}Xe.shr64_hi=SA;function IA(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Xe.shr64_lo=IA});var Wo=X(ey=>{"use strict";var Q2=Ei(),AA=xn();function Au(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ey.BlockHash=Au;Au.prototype.update=function(e,r){if(e=Q2.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Q2.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};Au.prototype.digest=function(e){return this.update(this._pad()),AA(this.pending===null),this._digest(e)};Au.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,o=8;o<this.padLength;o++)n[s++]=0;return n}});var _0=X(En=>{"use strict";var MA=Ei(),zi=MA.rotr32;function OA(t,e,r,i){if(t===0)return ty(e,r,i);if(t===1||t===3)return iy(e,r,i);if(t===2)return ry(e,r,i)}En.ft_1=OA;function ty(t,e,r){return t&e^~t&r}En.ch32=ty;function ry(t,e,r){return t&e^t&r^e&r}En.maj32=ry;function iy(t,e,r){return t^e^r}En.p32=iy;function RA(t){return zi(t,2)^zi(t,13)^zi(t,22)}En.s0_256=RA;function NA(t){return zi(t,6)^zi(t,11)^zi(t,25)}En.s1_256=NA;function PA(t){return zi(t,7)^zi(t,18)^t>>>3}En.g0_256=PA;function TA(t){return zi(t,17)^zi(t,19)^t>>>10}En.g1_256=TA});var oy=X(($V,sy)=>{"use strict";var Yo=Ei(),DA=Wo(),CA=_0(),S0=Yo.rotl32,gf=Yo.sum32,LA=Yo.sum32_5,FA=CA.ft_1,ny=DA.BlockHash,BA=[1518500249,1859775393,2400959708,3395469782];function ki(){if(!(this instanceof ki))return new ki;ny.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Yo.inherits(ki,ny);sy.exports=ki;ki.blockSize=512;ki.outSize=160;ki.hmacStrength=80;ki.padLength=64;ki.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=S0(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],h=this.h[3],d=this.h[4];for(n=0;n<i.length;n++){var g=~~(n/20),y=LA(S0(s,5),FA(g,o,a,h),d,i[n],BA[g]);d=h,h=a,a=S0(o,30),o=s,s=y}this.h[0]=gf(this.h[0],s),this.h[1]=gf(this.h[1],o),this.h[2]=gf(this.h[2],a),this.h[3]=gf(this.h[3],h),this.h[4]=gf(this.h[4],d)};ki.prototype._digest=function(e){return e==="hex"?Yo.toHex32(this.h,"big"):Yo.split32(this.h,"big")}});var I0=X((KV,fy)=>{"use strict";var Xo=Ei(),UA=Wo(),Zo=_0(),qA=xn(),_i=Xo.sum32,zA=Xo.sum32_4,kA=Xo.sum32_5,jA=Zo.ch32,$A=Zo.maj32,KA=Zo.s0_256,VA=Zo.s1_256,HA=Zo.g0_256,GA=Zo.g1_256,ay=UA.BlockHash,JA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ji(){if(!(this instanceof ji))return new ji;ay.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=JA,this.W=new Array(64)}Xo.inherits(ji,ay);fy.exports=ji;ji.blockSize=512;ji.outSize=256;ji.hmacStrength=192;ji.padLength=64;ji.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=zA(GA(i[n-2]),i[n-7],HA(i[n-15]),i[n-16]);var s=this.h[0],o=this.h[1],a=this.h[2],h=this.h[3],d=this.h[4],g=this.h[5],y=this.h[6],_=this.h[7];for(qA(this.k.length===i.length),n=0;n<i.length;n++){var S=kA(_,VA(d),jA(d,g,y),this.k[n],i[n]),I=_i(KA(s),$A(s,o,a));_=y,y=g,g=d,d=_i(h,S),h=a,a=o,o=s,s=_i(S,I)}this.h[0]=_i(this.h[0],s),this.h[1]=_i(this.h[1],o),this.h[2]=_i(this.h[2],a),this.h[3]=_i(this.h[3],h),this.h[4]=_i(this.h[4],d),this.h[5]=_i(this.h[5],g),this.h[6]=_i(this.h[6],y),this.h[7]=_i(this.h[7],_)};ji.prototype._digest=function(e){return e==="hex"?Xo.toHex32(this.h,"big"):Xo.split32(this.h,"big")}});var hy=X((VV,uy)=>{"use strict";var A0=Ei(),cy=I0();function _n(){if(!(this instanceof _n))return new _n;cy.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}A0.inherits(_n,cy);uy.exports=_n;_n.blockSize=512;_n.outSize=224;_n.hmacStrength=192;_n.padLength=64;_n.prototype._digest=function(e){return e==="hex"?A0.toHex32(this.h.slice(0,7),"big"):A0.split32(this.h.slice(0,7),"big")}});var R0=X((HV,by)=>{"use strict";var wr=Ei(),WA=Wo(),YA=xn(),$i=wr.rotr64_hi,Ki=wr.rotr64_lo,dy=wr.shr64_hi,ly=wr.shr64_lo,Wn=wr.sum64,M0=wr.sum64_hi,O0=wr.sum64_lo,XA=wr.sum64_4_hi,ZA=wr.sum64_4_lo,QA=wr.sum64_5_hi,eM=wr.sum64_5_lo,py=WA.BlockHash,tM=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Si(){if(!(this instanceof Si))return new Si;py.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=tM,this.W=new Array(160)}wr.inherits(Si,py);by.exports=Si;Si.blockSize=1024;Si.outSize=512;Si.hmacStrength=192;Si.padLength=128;Si.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=dM(i[n-4],i[n-3]),o=lM(i[n-4],i[n-3]),a=i[n-14],h=i[n-13],d=uM(i[n-30],i[n-29]),g=hM(i[n-30],i[n-29]),y=i[n-32],_=i[n-31];i[n]=XA(s,o,a,h,d,g,y,_),i[n+1]=ZA(s,o,a,h,d,g,y,_)}};Si.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],d=this.h[5],g=this.h[6],y=this.h[7],_=this.h[8],S=this.h[9],I=this.h[10],O=this.h[11],P=this.h[12],T=this.h[13],U=this.h[14],D=this.h[15];YA(this.k.length===i.length);for(var F=0;F<i.length;F+=2){var j=U,V=D,B=fM(_,S),C=cM(_,S),K=rM(_,S,I,O,P,T),M=iM(_,S,I,O,P,T),u=this.k[F],b=this.k[F+1],p=i[F],f=i[F+1],l=QA(j,V,B,C,K,M,u,b,p,f),m=eM(j,V,B,C,K,M,u,b,p,f);j=oM(n,s),V=aM(n,s),B=nM(n,s,o,a,h,d),C=sM(n,s,o,a,h,d);var x=M0(j,V,B,C),v=O0(j,V,B,C);U=P,D=T,P=I,T=O,I=_,O=S,_=M0(g,y,l,m),S=O0(y,y,l,m),g=h,y=d,h=o,d=a,o=n,a=s,n=M0(l,m,x,v),s=O0(l,m,x,v)}Wn(this.h,0,n,s),Wn(this.h,2,o,a),Wn(this.h,4,h,d),Wn(this.h,6,g,y),Wn(this.h,8,_,S),Wn(this.h,10,I,O),Wn(this.h,12,P,T),Wn(this.h,14,U,D)};Si.prototype._digest=function(e){return e==="hex"?wr.toHex32(this.h,"big"):wr.split32(this.h,"big")};function rM(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function iM(t,e,r,i,n,s){var o=e&i^~e&s;return o<0&&(o+=4294967296),o}function nM(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function sM(t,e,r,i,n,s){var o=e&i^e&s^i&s;return o<0&&(o+=4294967296),o}function oM(t,e){var r=$i(t,e,28),i=$i(e,t,2),n=$i(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function aM(t,e){var r=Ki(t,e,28),i=Ki(e,t,2),n=Ki(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function fM(t,e){var r=$i(t,e,14),i=$i(t,e,18),n=$i(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function cM(t,e){var r=Ki(t,e,14),i=Ki(t,e,18),n=Ki(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function uM(t,e){var r=$i(t,e,1),i=$i(t,e,8),n=dy(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function hM(t,e){var r=Ki(t,e,1),i=Ki(t,e,8),n=ly(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function dM(t,e){var r=$i(t,e,19),i=$i(e,t,29),n=dy(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function lM(t,e){var r=Ki(t,e,19),i=Ki(e,t,29),n=ly(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}});var my=X((GV,vy)=>{"use strict";var N0=Ei(),gy=R0();function Sn(){if(!(this instanceof Sn))return new Sn;gy.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}N0.inherits(Sn,gy);vy.exports=Sn;Sn.blockSize=1024;Sn.outSize=384;Sn.hmacStrength=192;Sn.padLength=128;Sn.prototype._digest=function(e){return e==="hex"?N0.toHex32(this.h.slice(0,12),"big"):N0.split32(this.h.slice(0,12),"big")}});var yy=X(Qo=>{"use strict";Qo.sha1=oy();Qo.sha224=hy();Qo.sha256=I0();Qo.sha384=my();Qo.sha512=R0()});var Iy=X(Sy=>{"use strict";var Ys=Ei(),pM=Wo(),Mu=Ys.rotl32,wy=Ys.sum32,vf=Ys.sum32_3,xy=Ys.sum32_4,_y=pM.BlockHash;function Vi(){if(!(this instanceof Vi))return new Vi;_y.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ys.inherits(Vi,_y);Sy.ripemd160=Vi;Vi.blockSize=512;Vi.outSize=160;Vi.hmacStrength=192;Vi.padLength=64;Vi.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],h=i,d=n,g=s,y=o,_=a,S=0;S<80;S++){var I=wy(Mu(xy(i,Ey(S,n,s,o),e[vM[S]+r],bM(S)),yM[S]),a);i=a,a=o,o=Mu(s,10),s=n,n=I,I=wy(Mu(xy(h,Ey(79-S,d,g,y),e[mM[S]+r],gM(S)),wM[S]),_),h=_,_=y,y=Mu(g,10),g=d,d=I}I=vf(this.h[1],s,y),this.h[1]=vf(this.h[2],o,_),this.h[2]=vf(this.h[3],a,h),this.h[3]=vf(this.h[4],i,d),this.h[4]=vf(this.h[0],n,g),this.h[0]=I};Vi.prototype._digest=function(e){return e==="hex"?Ys.toHex32(this.h,"little"):Ys.split32(this.h,"little")};function Ey(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function bM(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function gM(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var vM=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],mM=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],yM=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],wM=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var My=X((YV,Ay)=>{"use strict";var xM=Ei(),EM=xn();function ea(t,e,r){if(!(this instanceof ea))return new ea(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(xM.toArray(e,r))}Ay.exports=ea;ea.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),EM(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};ea.prototype.update=function(e,r){return this.inner.update(e,r),this};ea.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Xs=X(Oy=>{var Pt=Oy;Pt.utils=Ei();Pt.common=Wo();Pt.sha=yy();Pt.ripemd=Iy();Pt.hmac=My();Pt.sha1=Pt.sha.sha1;Pt.sha256=Pt.sha.sha256;Pt.sha224=Pt.sha.sha224;Pt.sha384=Pt.sha.sha384;Pt.sha512=Pt.sha.sha512;Pt.ripemd160=Pt.ripemd.ripemd160});var Ly=X(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var Zt=Lo(),z0=Jr(),TM=20;function DM(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],d=r[11]<<24|r[10]<<16|r[9]<<8|r[8],g=r[15]<<24|r[14]<<16|r[13]<<8|r[12],y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],_=r[23]<<24|r[22]<<16|r[21]<<8|r[20],S=r[27]<<24|r[26]<<16|r[25]<<8|r[24],I=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=e[3]<<24|e[2]<<16|e[1]<<8|e[0],P=e[7]<<24|e[6]<<16|e[5]<<8|e[4],T=e[11]<<24|e[10]<<16|e[9]<<8|e[8],U=e[15]<<24|e[14]<<16|e[13]<<8|e[12],D=i,F=n,j=s,V=o,B=a,C=h,K=d,M=g,u=y,b=_,p=S,f=I,l=O,m=P,x=T,v=U,c=0;c<TM;c+=2)D=D+B|0,l^=D,l=l>>>16|l<<16,u=u+l|0,B^=u,B=B>>>20|B<<12,F=F+C|0,m^=F,m=m>>>16|m<<16,b=b+m|0,C^=b,C=C>>>20|C<<12,j=j+K|0,x^=j,x=x>>>16|x<<16,p=p+x|0,K^=p,K=K>>>20|K<<12,V=V+M|0,v^=V,v=v>>>16|v<<16,f=f+v|0,M^=f,M=M>>>20|M<<12,j=j+K|0,x^=j,x=x>>>24|x<<8,p=p+x|0,K^=p,K=K>>>25|K<<7,V=V+M|0,v^=V,v=v>>>24|v<<8,f=f+v|0,M^=f,M=M>>>25|M<<7,F=F+C|0,m^=F,m=m>>>24|m<<8,b=b+m|0,C^=b,C=C>>>25|C<<7,D=D+B|0,l^=D,l=l>>>24|l<<8,u=u+l|0,B^=u,B=B>>>25|B<<7,D=D+C|0,v^=D,v=v>>>16|v<<16,p=p+v|0,C^=p,C=C>>>20|C<<12,F=F+K|0,l^=F,l=l>>>16|l<<16,f=f+l|0,K^=f,K=K>>>20|K<<12,j=j+M|0,m^=j,m=m>>>16|m<<16,u=u+m|0,M^=u,M=M>>>20|M<<12,V=V+B|0,x^=V,x=x>>>16|x<<16,b=b+x|0,B^=b,B=B>>>20|B<<12,j=j+M|0,m^=j,m=m>>>24|m<<8,u=u+m|0,M^=u,M=M>>>25|M<<7,V=V+B|0,x^=V,x=x>>>24|x<<8,b=b+x|0,B^=b,B=B>>>25|B<<7,F=F+K|0,l^=F,l=l>>>24|l<<8,f=f+l|0,K^=f,K=K>>>25|K<<7,D=D+C|0,v^=D,v=v>>>24|v<<8,p=p+v|0,C^=p,C=C>>>25|C<<7;Zt.writeUint32LE(D+i|0,t,0),Zt.writeUint32LE(F+n|0,t,4),Zt.writeUint32LE(j+s|0,t,8),Zt.writeUint32LE(V+o|0,t,12),Zt.writeUint32LE(B+a|0,t,16),Zt.writeUint32LE(C+h|0,t,20),Zt.writeUint32LE(K+d|0,t,24),Zt.writeUint32LE(M+g|0,t,28),Zt.writeUint32LE(u+y|0,t,32),Zt.writeUint32LE(b+_|0,t,36),Zt.writeUint32LE(p+S|0,t,40),Zt.writeUint32LE(f+I|0,t,44),Zt.writeUint32LE(l+O|0,t,48),Zt.writeUint32LE(m+P|0,t,52),Zt.writeUint32LE(x+T|0,t,56),Zt.writeUint32LE(v+U|0,t,60)}function Cy(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=n}for(var a=new Uint8Array(64),h=0;h<r.length;h+=64){DM(a,s,t);for(var d=h;d<h+64&&d<r.length;d++)i[d]=r[d]^a[d-h];LM(s,0,o)}return z0.wipe(a),n===0&&z0.wipe(s),i}Lu.streamXOR=Cy;function CM(t,e,r,i){return i===void 0&&(i=0),z0.wipe(r),Cy(t,e,r,r,i)}Lu.stream=CM;function LM(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var Fu=X(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});function FM(t,e,r){return~(t-1)&e|t-1&r}ra.select=FM;function BM(t,e){return(t|0)-(e|0)-1>>>31&1}ra.lessOrEqual=BM;function Fy(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}ra.compare=Fy;function UM(t,e){return t.length===0||e.length===0?!1:Fy(t,e)!==0}ra.equal=UM});var Uy=X(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var qM=Fu(),Bu=Jr();In.DIGEST_LENGTH=16;var By=function(){function t(e){this.digestLength=In.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var i=e[2]|e[3]<<8;this._r[1]=(r>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(n>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var h=e[12]|e[13]<<8;this._r[7]=(a>>>11|h<<5)&8065;var d=e[14]|e[15]<<8;this._r[8]=(h>>>8|d<<8)&8191,this._r[9]=d>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,i){for(var n=this._fin?0:2048,s=this._h[0],o=this._h[1],a=this._h[2],h=this._h[3],d=this._h[4],g=this._h[5],y=this._h[6],_=this._h[7],S=this._h[8],I=this._h[9],O=this._r[0],P=this._r[1],T=this._r[2],U=this._r[3],D=this._r[4],F=this._r[5],j=this._r[6],V=this._r[7],B=this._r[8],C=this._r[9];i>=16;){var K=e[r+0]|e[r+1]<<8;s+=K&8191;var M=e[r+2]|e[r+3]<<8;o+=(K>>>13|M<<3)&8191;var u=e[r+4]|e[r+5]<<8;a+=(M>>>10|u<<6)&8191;var b=e[r+6]|e[r+7]<<8;h+=(u>>>7|b<<9)&8191;var p=e[r+8]|e[r+9]<<8;d+=(b>>>4|p<<12)&8191,g+=p>>>1&8191;var f=e[r+10]|e[r+11]<<8;y+=(p>>>14|f<<2)&8191;var l=e[r+12]|e[r+13]<<8;_+=(f>>>11|l<<5)&8191;var m=e[r+14]|e[r+15]<<8;S+=(l>>>8|m<<8)&8191,I+=m>>>5|n;var x=0,v=x;v+=s*O,v+=o*(5*C),v+=a*(5*B),v+=h*(5*V),v+=d*(5*j),x=v>>>13,v&=8191,v+=g*(5*F),v+=y*(5*D),v+=_*(5*U),v+=S*(5*T),v+=I*(5*P),x+=v>>>13,v&=8191;var c=x;c+=s*P,c+=o*O,c+=a*(5*C),c+=h*(5*B),c+=d*(5*V),x=c>>>13,c&=8191,c+=g*(5*j),c+=y*(5*F),c+=_*(5*D),c+=S*(5*U),c+=I*(5*T),x+=c>>>13,c&=8191;var w=x;w+=s*T,w+=o*P,w+=a*O,w+=h*(5*C),w+=d*(5*B),x=w>>>13,w&=8191,w+=g*(5*V),w+=y*(5*j),w+=_*(5*F),w+=S*(5*D),w+=I*(5*U),x+=w>>>13,w&=8191;var R=x;R+=s*U,R+=o*T,R+=a*P,R+=h*O,R+=d*(5*C),x=R>>>13,R&=8191,R+=g*(5*B),R+=y*(5*V),R+=_*(5*j),R+=S*(5*F),R+=I*(5*D),x+=R>>>13,R&=8191;var E=x;E+=s*D,E+=o*U,E+=a*T,E+=h*P,E+=d*O,x=E>>>13,E&=8191,E+=g*(5*C),E+=y*(5*B),E+=_*(5*V),E+=S*(5*j),E+=I*(5*F),x+=E>>>13,E&=8191;var N=x;N+=s*F,N+=o*D,N+=a*U,N+=h*T,N+=d*P,x=N>>>13,N&=8191,N+=g*O,N+=y*(5*C),N+=_*(5*B),N+=S*(5*V),N+=I*(5*j),x+=N>>>13,N&=8191;var q=x;q+=s*j,q+=o*F,q+=a*D,q+=h*U,q+=d*T,x=q>>>13,q&=8191,q+=g*P,q+=y*O,q+=_*(5*C),q+=S*(5*B),q+=I*(5*V),x+=q>>>13,q&=8191;var A=x;A+=s*V,A+=o*j,A+=a*F,A+=h*D,A+=d*U,x=A>>>13,A&=8191,A+=g*T,A+=y*P,A+=_*O,A+=S*(5*C),A+=I*(5*B),x+=A>>>13,A&=8191;var L=x;L+=s*B,L+=o*V,L+=a*j,L+=h*F,L+=d*D,x=L>>>13,L&=8191,L+=g*U,L+=y*T,L+=_*P,L+=S*O,L+=I*(5*C),x+=L>>>13,L&=8191;var z=x;z+=s*C,z+=o*B,z+=a*V,z+=h*j,z+=d*F,x=z>>>13,z&=8191,z+=g*D,z+=y*U,z+=_*T,z+=S*P,z+=I*O,x+=z>>>13,z&=8191,x=(x<<2)+x|0,x=x+v|0,v=x&8191,x=x>>>13,c+=x,s=v,o=c,a=w,h=R,d=E,g=N,y=q,_=A,S=L,I=z,r+=16,i-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=h,this._h[4]=d,this._h[5]=g,this._h[6]=y,this._h[7]=_,this._h[8]=S,this._h[9]=I},t.prototype.finish=function(e,r){r===void 0&&(r=0);var i=new Uint16Array(10),n,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=n,n=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,a=1;a<10;a++)i[a]=this._h[a]+n,n=i[a]>>>13,i[a]&=8191;for(i[9]-=8192,s=(n^1)-1,a=0;a<10;a++)i[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|i[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];if(i-=n,r+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,r,n),r+=n,i-=n),i){for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=i}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return Bu.wipe(this._buffer),Bu.wipe(this._r),Bu.wipe(this._h),Bu.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();In.Poly1305=By;function zM(t,e){var r=new By(t);r.update(e);var i=r.digest();return r.clean(),i}In.oneTimeAuth=zM;function kM(t,e){return t.length!==In.DIGEST_LENGTH||e.length!==In.DIGEST_LENGTH?!1:qM.equal(t,e)}In.equal=kM});var k0=X(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var Uu=Ly(),jM=Uy(),yf=Jr(),qy=Lo(),$M=Fu();An.KEY_LENGTH=32;An.NONCE_LENGTH=12;An.TAG_LENGTH=16;var zy=new Uint8Array(16),KM=function(){function t(e){if(this.nonceLength=An.NONCE_LENGTH,this.tagLength=An.TAG_LENGTH,e.length!==An.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Uu.stream(this._key,s,o,4);var a=r.length+this.tagLength,h;if(n){if(n.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");h=n}else h=new Uint8Array(a);return Uu.streamXOR(this._key,s,r,h,4),this._authenticate(h.subarray(h.length-this.tagLength,h.length),o,h.subarray(0,h.length-this.tagLength),i),yf.wipe(s),h},t.prototype.open=function(e,r,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Uu.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),i),!$M.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var h=r.length-this.tagLength,d;if(n){if(n.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");d=n}else d=new Uint8Array(h);return Uu.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),d,4),yf.wipe(s),d},t.prototype.clean=function(){return yf.wipe(this._key),this},t.prototype._authenticate=function(e,r,i,n){var s=new jM.Poly1305(r);n&&(s.update(n),n.length%16>0&&s.update(zy.subarray(n.length%16))),s.update(i),i.length%16>0&&s.update(zy.subarray(i.length%16));var o=new Uint8Array(8);n&&qy.writeUint64LE(n.length,o),s.update(o),qy.writeUint64LE(i.length,o),s.update(o);for(var a=s.digest(),h=0;h<a.length;h++)e[h]=a[h];s.clean(),yf.wipe(a),yf.wipe(o)},t}();An.ChaCha20Poly1305=KM});var ky=X(j0=>{"use strict";Object.defineProperty(j0,"__esModule",{value:!0});function VM(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}j0.isSerializableHash=VM});var $y=X(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Ji=ky(),HM=Fu(),GM=Jr(),jy=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),Ji.isSerializableHash(this._inner)&&Ji.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),GM.wipe(i)}return t.prototype.reset=function(){if(!Ji.isSerializableHash(this._inner)||!Ji.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Ji.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ji.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Ji.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Ji.isSerializableHash(this._inner)||!Ji.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Ji.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();wf.HMAC=jy;function JM(t,e,r){var i=new jy(t,e);i.update(r);var n=i.digest();return i.clean(),n}wf.hmac=JM;wf.equal=HM.equal});var K0=X($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});var Ky=$y(),Vy=Jr(),WM=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=Ky.hmac(this._hash,i,r);this._hmac=new Ky.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Vy.wipe(this._buffer),Vy.wipe(this._counter),this._bufpos=0},t}();$0.HKDF=WM});var ku=X(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var zu=Lo(),qu=Jr();Zn.DIGEST_LENGTH=32;Zn.BLOCK_SIZE=64;var Hy=function(){function t(){this.digestLength=Zn.DIGEST_LENGTH,this.blockSize=Zn.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){qu.wipe(this._buffer),qu.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[i++],r--;this._bufferLength===this.blockSize&&(V0(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(i=V0(this._temp,this._state,e,i,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[i++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,i=this._bufferLength,n=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[i]=128;for(var a=i+1;a<o-8;a++)this._buffer[a]=0;zu.writeUint32BE(n,this._buffer,o-8),zu.writeUint32BE(s,this._buffer,o-4),V0(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)zu.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){qu.wipe(e.state),e.buffer&&qu.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Zn.SHA256=Hy;var YM=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function V0(t,e,r,i,n){for(;n>=64;){for(var s=e[0],o=e[1],a=e[2],h=e[3],d=e[4],g=e[5],y=e[6],_=e[7],S=0;S<16;S++){var I=i+S*4;t[S]=zu.readUint32BE(r,I)}for(var S=16;S<64;S++){var O=t[S-2],P=(O>>>17|O<<15)^(O>>>19|O<<13)^O>>>10;O=t[S-15];var T=(O>>>7|O<<25)^(O>>>18|O<<14)^O>>>3;t[S]=(P+t[S-7]|0)+(T+t[S-16]|0)}for(var S=0;S<64;S++){var P=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&g^~d&y)|0)+(_+(YM[S]+t[S]|0)|0)|0,T=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0;_=y,y=g,g=d,d=h+P|0,h=a,a=o,o=s,s=P+T|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=h,e[4]+=d,e[5]+=g,e[6]+=y,e[7]+=_,i+=64,n-=64}return i}function XM(t){var e=new Hy;e.update(t);var r=e.digest();return e.clean(),r}Zn.hash=XM});var J0=X(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.sharedKey=st.generateKeyPair=st.generateKeyPairFromSeed=st.scalarMultBase=st.scalarMult=st.SHARED_KEY_LENGTH=st.SECRET_KEY_LENGTH=st.PUBLIC_KEY_LENGTH=void 0;var ZM=Vn(),QM=Jr();st.PUBLIC_KEY_LENGTH=32;st.SECRET_KEY_LENGTH=32;st.SHARED_KEY_LENGTH=32;function Wi(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var Gy=new Uint8Array(32);Gy[0]=9;var eO=Wi([56129,1]);function H0(t){let e=1;for(let r=0;r<16;r++){let i=t[r]+e+65535;e=Math.floor(i/65536),t[r]=i-e*65536}t[0]+=e-1+37*(e-1)}function xf(t,e,r){let i=~(r-1);for(let n=0;n<16;n++){let s=i&(t[n]^e[n]);t[n]^=s,e[n]^=s}}function tO(t,e){let r=Wi(),i=Wi();for(let n=0;n<16;n++)i[n]=e[n];H0(i),H0(i),H0(i);for(let n=0;n<2;n++){r[0]=i[0]-65517;for(let o=1;o<15;o++)r[o]=i[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=i[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,xf(i,r,1-s)}for(let n=0;n<16;n++)t[2*n]=i[n]&255,t[2*n+1]=i[n]>>8}function rO(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function ju(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]+r[i]}function $u(t,e,r){for(let i=0;i<16;i++)t[i]=e[i]-r[i]}function Mn(t,e,r){let i,n,s=0,o=0,a=0,h=0,d=0,g=0,y=0,_=0,S=0,I=0,O=0,P=0,T=0,U=0,D=0,F=0,j=0,V=0,B=0,C=0,K=0,M=0,u=0,b=0,p=0,f=0,l=0,m=0,x=0,v=0,c=0,w=r[0],R=r[1],E=r[2],N=r[3],q=r[4],A=r[5],L=r[6],z=r[7],k=r[8],$=r[9],W=r[10],H=r[11],G=r[12],Z=r[13],J=r[14],Y=r[15];i=e[0],s+=i*w,o+=i*R,a+=i*E,h+=i*N,d+=i*q,g+=i*A,y+=i*L,_+=i*z,S+=i*k,I+=i*$,O+=i*W,P+=i*H,T+=i*G,U+=i*Z,D+=i*J,F+=i*Y,i=e[1],o+=i*w,a+=i*R,h+=i*E,d+=i*N,g+=i*q,y+=i*A,_+=i*L,S+=i*z,I+=i*k,O+=i*$,P+=i*W,T+=i*H,U+=i*G,D+=i*Z,F+=i*J,j+=i*Y,i=e[2],a+=i*w,h+=i*R,d+=i*E,g+=i*N,y+=i*q,_+=i*A,S+=i*L,I+=i*z,O+=i*k,P+=i*$,T+=i*W,U+=i*H,D+=i*G,F+=i*Z,j+=i*J,V+=i*Y,i=e[3],h+=i*w,d+=i*R,g+=i*E,y+=i*N,_+=i*q,S+=i*A,I+=i*L,O+=i*z,P+=i*k,T+=i*$,U+=i*W,D+=i*H,F+=i*G,j+=i*Z,V+=i*J,B+=i*Y,i=e[4],d+=i*w,g+=i*R,y+=i*E,_+=i*N,S+=i*q,I+=i*A,O+=i*L,P+=i*z,T+=i*k,U+=i*$,D+=i*W,F+=i*H,j+=i*G,V+=i*Z,B+=i*J,C+=i*Y,i=e[5],g+=i*w,y+=i*R,_+=i*E,S+=i*N,I+=i*q,O+=i*A,P+=i*L,T+=i*z,U+=i*k,D+=i*$,F+=i*W,j+=i*H,V+=i*G,B+=i*Z,C+=i*J,K+=i*Y,i=e[6],y+=i*w,_+=i*R,S+=i*E,I+=i*N,O+=i*q,P+=i*A,T+=i*L,U+=i*z,D+=i*k,F+=i*$,j+=i*W,V+=i*H,B+=i*G,C+=i*Z,K+=i*J,M+=i*Y,i=e[7],_+=i*w,S+=i*R,I+=i*E,O+=i*N,P+=i*q,T+=i*A,U+=i*L,D+=i*z,F+=i*k,j+=i*$,V+=i*W,B+=i*H,C+=i*G,K+=i*Z,M+=i*J,u+=i*Y,i=e[8],S+=i*w,I+=i*R,O+=i*E,P+=i*N,T+=i*q,U+=i*A,D+=i*L,F+=i*z,j+=i*k,V+=i*$,B+=i*W,C+=i*H,K+=i*G,M+=i*Z,u+=i*J,b+=i*Y,i=e[9],I+=i*w,O+=i*R,P+=i*E,T+=i*N,U+=i*q,D+=i*A,F+=i*L,j+=i*z,V+=i*k,B+=i*$,C+=i*W,K+=i*H,M+=i*G,u+=i*Z,b+=i*J,p+=i*Y,i=e[10],O+=i*w,P+=i*R,T+=i*E,U+=i*N,D+=i*q,F+=i*A,j+=i*L,V+=i*z,B+=i*k,C+=i*$,K+=i*W,M+=i*H,u+=i*G,b+=i*Z,p+=i*J,f+=i*Y,i=e[11],P+=i*w,T+=i*R,U+=i*E,D+=i*N,F+=i*q,j+=i*A,V+=i*L,B+=i*z,C+=i*k,K+=i*$,M+=i*W,u+=i*H,b+=i*G,p+=i*Z,f+=i*J,l+=i*Y,i=e[12],T+=i*w,U+=i*R,D+=i*E,F+=i*N,j+=i*q,V+=i*A,B+=i*L,C+=i*z,K+=i*k,M+=i*$,u+=i*W,b+=i*H,p+=i*G,f+=i*Z,l+=i*J,m+=i*Y,i=e[13],U+=i*w,D+=i*R,F+=i*E,j+=i*N,V+=i*q,B+=i*A,C+=i*L,K+=i*z,M+=i*k,u+=i*$,b+=i*W,p+=i*H,f+=i*G,l+=i*Z,m+=i*J,x+=i*Y,i=e[14],D+=i*w,F+=i*R,j+=i*E,V+=i*N,B+=i*q,C+=i*A,K+=i*L,M+=i*z,u+=i*k,b+=i*$,p+=i*W,f+=i*H,l+=i*G,m+=i*Z,x+=i*J,v+=i*Y,i=e[15],F+=i*w,j+=i*R,V+=i*E,B+=i*N,C+=i*q,K+=i*A,M+=i*L,u+=i*z,b+=i*k,p+=i*$,f+=i*W,l+=i*H,m+=i*G,x+=i*Z,v+=i*J,c+=i*Y,s+=38*j,o+=38*V,a+=38*B,h+=38*C,d+=38*K,g+=38*M,y+=38*u,_+=38*b,S+=38*p,I+=38*f,O+=38*l,P+=38*m,T+=38*x,U+=38*v,D+=38*c,n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=_+n+65535,n=Math.floor(i/65536),_=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=P+n+65535,n=Math.floor(i/65536),P=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,i=U+n+65535,n=Math.floor(i/65536),U=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),n=1,i=s+n+65535,n=Math.floor(i/65536),s=i-n*65536,i=o+n+65535,n=Math.floor(i/65536),o=i-n*65536,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=h+n+65535,n=Math.floor(i/65536),h=i-n*65536,i=d+n+65535,n=Math.floor(i/65536),d=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=y+n+65535,n=Math.floor(i/65536),y=i-n*65536,i=_+n+65535,n=Math.floor(i/65536),_=i-n*65536,i=S+n+65535,n=Math.floor(i/65536),S=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=P+n+65535,n=Math.floor(i/65536),P=i-n*65536,i=T+n+65535,n=Math.floor(i/65536),T=i-n*65536,i=U+n+65535,n=Math.floor(i/65536),U=i-n*65536,i=D+n+65535,n=Math.floor(i/65536),D=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,s+=n-1+37*(n-1),t[0]=s,t[1]=o,t[2]=a,t[3]=h,t[4]=d,t[5]=g,t[6]=y,t[7]=_,t[8]=S,t[9]=I,t[10]=O,t[11]=P,t[12]=T,t[13]=U,t[14]=D,t[15]=F}function Ef(t,e){Mn(t,e,e)}function iO(t,e){let r=Wi();for(let i=0;i<16;i++)r[i]=e[i];for(let i=253;i>=0;i--)Ef(r,r),i!==2&&i!==4&&Mn(r,r,e);for(let i=0;i<16;i++)t[i]=r[i]}function G0(t,e){let r=new Uint8Array(32),i=new Float64Array(80),n=Wi(),s=Wi(),o=Wi(),a=Wi(),h=Wi(),d=Wi();for(let S=0;S<31;S++)r[S]=t[S];r[31]=t[31]&127|64,r[0]&=248,rO(i,e);for(let S=0;S<16;S++)s[S]=i[S];n[0]=a[0]=1;for(let S=254;S>=0;--S){let I=r[S>>>3]>>>(S&7)&1;xf(n,s,I),xf(o,a,I),ju(h,n,o),$u(n,n,o),ju(o,s,a),$u(s,s,a),Ef(a,h),Ef(d,n),Mn(n,o,n),Mn(o,s,h),ju(h,n,o),$u(n,n,o),Ef(s,n),$u(o,a,d),Mn(n,o,eO),ju(n,n,a),Mn(o,o,n),Mn(n,a,d),Mn(a,s,i),Ef(s,h),xf(n,s,I),xf(o,a,I)}for(let S=0;S<16;S++)i[S+16]=n[S],i[S+32]=o[S],i[S+48]=s[S],i[S+64]=a[S];let g=i.subarray(32),y=i.subarray(16);iO(g,g),Mn(y,y,g);let _=new Uint8Array(32);return tO(_,y),_}st.scalarMult=G0;function Jy(t){return G0(t,Gy)}st.scalarMultBase=Jy;function Wy(t){if(t.length!==st.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${st.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:Jy(e),secretKey:e}}st.generateKeyPairFromSeed=Wy;function nO(t){let e=(0,ZM.randomBytes)(32,t),r=Wy(e);return(0,QM.wipe)(e),r}st.generateKeyPair=nO;function sO(t,e,r=!1){if(t.length!==st.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==st.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let i=G0(t,e);if(r){let n=0;for(let s=0;s<i.length;s++)n|=i[s];if(n===0)throw new Error("X25519: invalid shared key")}return i}st.sharedKey=sO});var Yy=X((RH,oO)=>{oO.exports={name:"elliptic",version:"6.5.7",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Yi=X((Xy,W0)=>{(function(t,e){"use strict";function r(M,u){if(!M)throw new Error(u||"Assertion failed")}function i(M,u){M.super_=u;var b=function(){};b.prototype=u.prototype,M.prototype=new b,M.prototype.constructor=M}function n(M,u,b){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((u==="le"||u==="be")&&(b=u,u=10),this._init(M||0,u||10,b||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Su().Buffer}catch{}n.isBN=function(u){return u instanceof n?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===n.wordSize&&Array.isArray(u.words)},n.max=function(u,b){return u.cmp(b)>0?u:b},n.min=function(u,b){return u.cmp(b)<0?u:b},n.prototype._init=function(u,b,p){if(typeof u=="number")return this._initNumber(u,b,p);if(typeof u=="object")return this._initArray(u,b,p);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),u=u.toString().replace(/\s+/g,"");var f=0;u[0]==="-"&&(f++,this.negative=1),f<u.length&&(b===16?this._parseHex(u,f,p):(this._parseBase(u,b,f),p==="le"&&this._initArray(this.toArray(),b,p)))},n.prototype._initNumber=function(u,b,p){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(r(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),b,p)},n.prototype._initArray=function(u,b,p){if(r(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var l,m,x=0;if(p==="be")for(f=u.length-1,l=0;f>=0;f-=3)m=u[f]|u[f-1]<<8|u[f-2]<<16,this.words[l]|=m<<x&67108863,this.words[l+1]=m>>>26-x&67108863,x+=24,x>=26&&(x-=26,l++);else if(p==="le")for(f=0,l=0;f<u.length;f+=3)m=u[f]|u[f+1]<<8|u[f+2]<<16,this.words[l]|=m<<x&67108863,this.words[l+1]=m>>>26-x&67108863,x+=24,x>=26&&(x-=26,l++);return this.strip()};function o(M,u){var b=M.charCodeAt(u);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function a(M,u,b){var p=o(M,b);return b-1>=u&&(p|=o(M,b-1)<<4),p}n.prototype._parseHex=function(u,b,p){this.length=Math.ceil((u.length-b)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var l=0,m=0,x;if(p==="be")for(f=u.length-1;f>=b;f-=2)x=a(u,b,f)<<l,this.words[m]|=x&67108863,l>=18?(l-=18,m+=1,this.words[m]|=x>>>26):l+=8;else{var v=u.length-b;for(f=v%2===0?b+1:b;f<u.length;f+=2)x=a(u,b,f)<<l,this.words[m]|=x&67108863,l>=18?(l-=18,m+=1,this.words[m]|=x>>>26):l+=8}this.strip()};function h(M,u,b,p){for(var f=0,l=Math.min(M.length,b),m=u;m<l;m++){var x=M.charCodeAt(m)-48;f*=p,x>=49?f+=x-49+10:x>=17?f+=x-17+10:f+=x}return f}n.prototype._parseBase=function(u,b,p){this.words=[0],this.length=1;for(var f=0,l=1;l<=67108863;l*=b)f++;f--,l=l/b|0;for(var m=u.length-p,x=m%f,v=Math.min(m,m-x)+p,c=0,w=p;w<v;w+=f)c=h(u,w,w+f,b),this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(x!==0){var R=1;for(c=h(u,w,u.length,b),w=0;w<x;w++)R*=b;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},n.prototype.copy=function(u){u.words=new Array(this.length);for(var b=0;b<this.length;b++)u.words[b]=this.words[b];u.length=this.length,u.negative=this.negative,u.red=this.red},n.prototype.clone=function(){var u=new n(null);return this.copy(u),u},n.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(u,b){u=u||10,b=b|0||1;var p;if(u===16||u==="hex"){p="";for(var f=0,l=0,m=0;m<this.length;m++){var x=this.words[m],v=((x<<f|l)&16777215).toString(16);l=x>>>24-f&16777215,f+=2,f>=26&&(f-=26,m--),l!==0||m!==this.length-1?p=d[6-v.length]+v+p:p=v+p}for(l!==0&&(p=l.toString(16)+p);p.length%b!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(u===(u|0)&&u>=2&&u<=36){var c=g[u],w=y[u];p="";var R=this.clone();for(R.negative=0;!R.isZero();){var E=R.modn(w).toString(u);R=R.idivn(w),R.isZero()?p=E+p:p=d[c-E.length]+E+p}for(this.isZero()&&(p="0"+p);p.length%b!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(u,b){return r(typeof s<"u"),this.toArrayLike(s,u,b)},n.prototype.toArray=function(u,b){return this.toArrayLike(Array,u,b)},n.prototype.toArrayLike=function(u,b,p){var f=this.byteLength(),l=p||Math.max(1,f);r(f<=l,"byte array longer than desired length"),r(l>0,"Requested array length <= 0"),this.strip();var m=b==="le",x=new u(l),v,c,w=this.clone();if(m){for(c=0;!w.isZero();c++)v=w.andln(255),w.iushrn(8),x[c]=v;for(;c<l;c++)x[c]=0}else{for(c=0;c<l-f;c++)x[c]=0;for(c=0;!w.isZero();c++)v=w.andln(255),w.iushrn(8),x[l-c-1]=v}return x},Math.clz32?n.prototype._countBits=function(u){return 32-Math.clz32(u)}:n.prototype._countBits=function(u){var b=u,p=0;return b>=4096&&(p+=13,b>>>=13),b>=64&&(p+=7,b>>>=7),b>=8&&(p+=4,b>>>=4),b>=2&&(p+=2,b>>>=2),p+b},n.prototype._zeroBits=function(u){if(u===0)return 26;var b=u,p=0;return b&8191||(p+=13,b>>>=13),b&127||(p+=7,b>>>=7),b&15||(p+=4,b>>>=4),b&3||(p+=2,b>>>=2),b&1||p++,p},n.prototype.bitLength=function(){var u=this.words[this.length-1],b=this._countBits(u);return(this.length-1)*26+b};function _(M){for(var u=new Array(M.bitLength()),b=0;b<u.length;b++){var p=b/26|0,f=b%26;u[b]=(M.words[p]&1<<f)>>>f}return u}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,b=0;b<this.length;b++){var p=this._zeroBits(this.words[b]);if(u+=p,p!==26)break}return u},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},n.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var b=0;b<u.length;b++)this.words[b]=this.words[b]|u.words[b];return this.strip()},n.prototype.ior=function(u){return r((this.negative|u.negative)===0),this.iuor(u)},n.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},n.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},n.prototype.iuand=function(u){var b;this.length>u.length?b=u:b=this;for(var p=0;p<b.length;p++)this.words[p]=this.words[p]&u.words[p];return this.length=b.length,this.strip()},n.prototype.iand=function(u){return r((this.negative|u.negative)===0),this.iuand(u)},n.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},n.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},n.prototype.iuxor=function(u){var b,p;this.length>u.length?(b=this,p=u):(b=u,p=this);for(var f=0;f<p.length;f++)this.words[f]=b.words[f]^p.words[f];if(this!==b)for(;f<b.length;f++)this.words[f]=b.words[f];return this.length=b.length,this.strip()},n.prototype.ixor=function(u){return r((this.negative|u.negative)===0),this.iuxor(u)},n.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},n.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},n.prototype.inotn=function(u){r(typeof u=="number"&&u>=0);var b=Math.ceil(u/26)|0,p=u%26;this._expand(b),p>0&&b--;for(var f=0;f<b;f++)this.words[f]=~this.words[f]&67108863;return p>0&&(this.words[f]=~this.words[f]&67108863>>26-p),this.strip()},n.prototype.notn=function(u){return this.clone().inotn(u)},n.prototype.setn=function(u,b){r(typeof u=="number"&&u>=0);var p=u/26|0,f=u%26;return this._expand(p+1),b?this.words[p]=this.words[p]|1<<f:this.words[p]=this.words[p]&~(1<<f),this.strip()},n.prototype.iadd=function(u){var b;if(this.negative!==0&&u.negative===0)return this.negative=0,b=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,b=this.isub(u),u.negative=1,b._normSign();var p,f;this.length>u.length?(p=this,f=u):(p=u,f=this);for(var l=0,m=0;m<f.length;m++)b=(p.words[m]|0)+(f.words[m]|0)+l,this.words[m]=b&67108863,l=b>>>26;for(;l!==0&&m<p.length;m++)b=(p.words[m]|0)+l,this.words[m]=b&67108863,l=b>>>26;if(this.length=p.length,l!==0)this.words[this.length]=l,this.length++;else if(p!==this)for(;m<p.length;m++)this.words[m]=p.words[m];return this},n.prototype.add=function(u){var b;return u.negative!==0&&this.negative===0?(u.negative=0,b=this.sub(u),u.negative^=1,b):u.negative===0&&this.negative!==0?(this.negative=0,b=u.sub(this),this.negative=1,b):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},n.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var b=this.iadd(u);return u.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var p=this.cmp(u);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,l;p>0?(f=this,l=u):(f=u,l=this);for(var m=0,x=0;x<l.length;x++)b=(f.words[x]|0)-(l.words[x]|0)+m,m=b>>26,this.words[x]=b&67108863;for(;m!==0&&x<f.length;x++)b=(f.words[x]|0)+m,m=b>>26,this.words[x]=b&67108863;if(m===0&&x<f.length&&f!==this)for(;x<f.length;x++)this.words[x]=f.words[x];return this.length=Math.max(this.length,x),f!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(u){return this.clone().isub(u)};function S(M,u,b){b.negative=u.negative^M.negative;var p=M.length+u.length|0;b.length=p,p=p-1|0;var f=M.words[0]|0,l=u.words[0]|0,m=f*l,x=m&67108863,v=m/67108864|0;b.words[0]=x;for(var c=1;c<p;c++){for(var w=v>>>26,R=v&67108863,E=Math.min(c,u.length-1),N=Math.max(0,c-M.length+1);N<=E;N++){var q=c-N|0;f=M.words[q]|0,l=u.words[N]|0,m=f*l+R,w+=m/67108864|0,R=m&67108863}b.words[c]=R|0,v=w|0}return v!==0?b.words[c]=v|0:b.length--,b.strip()}var I=function(u,b,p){var f=u.words,l=b.words,m=p.words,x=0,v,c,w,R=f[0]|0,E=R&8191,N=R>>>13,q=f[1]|0,A=q&8191,L=q>>>13,z=f[2]|0,k=z&8191,$=z>>>13,W=f[3]|0,H=W&8191,G=W>>>13,Z=f[4]|0,J=Z&8191,Y=Z>>>13,fr=f[5]|0,oe=fr&8191,ae=fr>>>13,kt=f[6]|0,re=kt&8191,te=kt>>>13,jt=f[7]|0,ie=jt&8191,ne=jt>>>13,$t=f[8]|0,se=$t&8191,fe=$t>>>13,cr=f[9]|0,ce=cr&8191,ue=cr>>>13,Mr=l[0]|0,he=Mr&8191,de=Mr>>>13,Or=l[1]|0,le=Or&8191,pe=Or>>>13,Rr=l[2]|0,be=Rr&8191,ge=Rr>>>13,Nr=l[3]|0,ve=Nr&8191,me=Nr>>>13,Pr=l[4]|0,ye=Pr&8191,we=Pr>>>13,Tr=l[5]|0,xe=Tr&8191,Ee=Tr>>>13,Dr=l[6]|0,_e=Dr&8191,Se=Dr>>>13,Cr=l[7]|0,Ie=Cr&8191,Ae=Cr>>>13,Lr=l[8]|0,Me=Lr&8191,Oe=Lr>>>13,Fr=l[9]|0,Re=Fr&8191,Ne=Fr>>>13;p.negative=u.negative^b.negative,p.length=19,v=Math.imul(E,he),c=Math.imul(E,de),c=c+Math.imul(N,he)|0,w=Math.imul(N,de);var ur=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ur>>>26)|0,ur&=67108863,v=Math.imul(A,he),c=Math.imul(A,de),c=c+Math.imul(L,he)|0,w=Math.imul(L,de),v=v+Math.imul(E,le)|0,c=c+Math.imul(E,pe)|0,c=c+Math.imul(N,le)|0,w=w+Math.imul(N,pe)|0;var ke=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ke>>>26)|0,ke&=67108863,v=Math.imul(k,he),c=Math.imul(k,de),c=c+Math.imul($,he)|0,w=Math.imul($,de),v=v+Math.imul(A,le)|0,c=c+Math.imul(A,pe)|0,c=c+Math.imul(L,le)|0,w=w+Math.imul(L,pe)|0,v=v+Math.imul(E,be)|0,c=c+Math.imul(E,ge)|0,c=c+Math.imul(N,be)|0,w=w+Math.imul(N,ge)|0;var je=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(je>>>26)|0,je&=67108863,v=Math.imul(H,he),c=Math.imul(H,de),c=c+Math.imul(G,he)|0,w=Math.imul(G,de),v=v+Math.imul(k,le)|0,c=c+Math.imul(k,pe)|0,c=c+Math.imul($,le)|0,w=w+Math.imul($,pe)|0,v=v+Math.imul(A,be)|0,c=c+Math.imul(A,ge)|0,c=c+Math.imul(L,be)|0,w=w+Math.imul(L,ge)|0,v=v+Math.imul(E,ve)|0,c=c+Math.imul(E,me)|0,c=c+Math.imul(N,ve)|0,w=w+Math.imul(N,me)|0;var Kt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(J,he),c=Math.imul(J,de),c=c+Math.imul(Y,he)|0,w=Math.imul(Y,de),v=v+Math.imul(H,le)|0,c=c+Math.imul(H,pe)|0,c=c+Math.imul(G,le)|0,w=w+Math.imul(G,pe)|0,v=v+Math.imul(k,be)|0,c=c+Math.imul(k,ge)|0,c=c+Math.imul($,be)|0,w=w+Math.imul($,ge)|0,v=v+Math.imul(A,ve)|0,c=c+Math.imul(A,me)|0,c=c+Math.imul(L,ve)|0,w=w+Math.imul(L,me)|0,v=v+Math.imul(E,ye)|0,c=c+Math.imul(E,we)|0,c=c+Math.imul(N,ye)|0,w=w+Math.imul(N,we)|0;var Vt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,v=Math.imul(oe,he),c=Math.imul(oe,de),c=c+Math.imul(ae,he)|0,w=Math.imul(ae,de),v=v+Math.imul(J,le)|0,c=c+Math.imul(J,pe)|0,c=c+Math.imul(Y,le)|0,w=w+Math.imul(Y,pe)|0,v=v+Math.imul(H,be)|0,c=c+Math.imul(H,ge)|0,c=c+Math.imul(G,be)|0,w=w+Math.imul(G,ge)|0,v=v+Math.imul(k,ve)|0,c=c+Math.imul(k,me)|0,c=c+Math.imul($,ve)|0,w=w+Math.imul($,me)|0,v=v+Math.imul(A,ye)|0,c=c+Math.imul(A,we)|0,c=c+Math.imul(L,ye)|0,w=w+Math.imul(L,we)|0,v=v+Math.imul(E,xe)|0,c=c+Math.imul(E,Ee)|0,c=c+Math.imul(N,xe)|0,w=w+Math.imul(N,Ee)|0;var Ht=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(re,he),c=Math.imul(re,de),c=c+Math.imul(te,he)|0,w=Math.imul(te,de),v=v+Math.imul(oe,le)|0,c=c+Math.imul(oe,pe)|0,c=c+Math.imul(ae,le)|0,w=w+Math.imul(ae,pe)|0,v=v+Math.imul(J,be)|0,c=c+Math.imul(J,ge)|0,c=c+Math.imul(Y,be)|0,w=w+Math.imul(Y,ge)|0,v=v+Math.imul(H,ve)|0,c=c+Math.imul(H,me)|0,c=c+Math.imul(G,ve)|0,w=w+Math.imul(G,me)|0,v=v+Math.imul(k,ye)|0,c=c+Math.imul(k,we)|0,c=c+Math.imul($,ye)|0,w=w+Math.imul($,we)|0,v=v+Math.imul(A,xe)|0,c=c+Math.imul(A,Ee)|0,c=c+Math.imul(L,xe)|0,w=w+Math.imul(L,Ee)|0,v=v+Math.imul(E,_e)|0,c=c+Math.imul(E,Se)|0,c=c+Math.imul(N,_e)|0,w=w+Math.imul(N,Se)|0;var Gt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,v=Math.imul(ie,he),c=Math.imul(ie,de),c=c+Math.imul(ne,he)|0,w=Math.imul(ne,de),v=v+Math.imul(re,le)|0,c=c+Math.imul(re,pe)|0,c=c+Math.imul(te,le)|0,w=w+Math.imul(te,pe)|0,v=v+Math.imul(oe,be)|0,c=c+Math.imul(oe,ge)|0,c=c+Math.imul(ae,be)|0,w=w+Math.imul(ae,ge)|0,v=v+Math.imul(J,ve)|0,c=c+Math.imul(J,me)|0,c=c+Math.imul(Y,ve)|0,w=w+Math.imul(Y,me)|0,v=v+Math.imul(H,ye)|0,c=c+Math.imul(H,we)|0,c=c+Math.imul(G,ye)|0,w=w+Math.imul(G,we)|0,v=v+Math.imul(k,xe)|0,c=c+Math.imul(k,Ee)|0,c=c+Math.imul($,xe)|0,w=w+Math.imul($,Ee)|0,v=v+Math.imul(A,_e)|0,c=c+Math.imul(A,Se)|0,c=c+Math.imul(L,_e)|0,w=w+Math.imul(L,Se)|0,v=v+Math.imul(E,Ie)|0,c=c+Math.imul(E,Ae)|0,c=c+Math.imul(N,Ie)|0,w=w+Math.imul(N,Ae)|0;var Jt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,v=Math.imul(se,he),c=Math.imul(se,de),c=c+Math.imul(fe,he)|0,w=Math.imul(fe,de),v=v+Math.imul(ie,le)|0,c=c+Math.imul(ie,pe)|0,c=c+Math.imul(ne,le)|0,w=w+Math.imul(ne,pe)|0,v=v+Math.imul(re,be)|0,c=c+Math.imul(re,ge)|0,c=c+Math.imul(te,be)|0,w=w+Math.imul(te,ge)|0,v=v+Math.imul(oe,ve)|0,c=c+Math.imul(oe,me)|0,c=c+Math.imul(ae,ve)|0,w=w+Math.imul(ae,me)|0,v=v+Math.imul(J,ye)|0,c=c+Math.imul(J,we)|0,c=c+Math.imul(Y,ye)|0,w=w+Math.imul(Y,we)|0,v=v+Math.imul(H,xe)|0,c=c+Math.imul(H,Ee)|0,c=c+Math.imul(G,xe)|0,w=w+Math.imul(G,Ee)|0,v=v+Math.imul(k,_e)|0,c=c+Math.imul(k,Se)|0,c=c+Math.imul($,_e)|0,w=w+Math.imul($,Se)|0,v=v+Math.imul(A,Ie)|0,c=c+Math.imul(A,Ae)|0,c=c+Math.imul(L,Ie)|0,w=w+Math.imul(L,Ae)|0,v=v+Math.imul(E,Me)|0,c=c+Math.imul(E,Oe)|0,c=c+Math.imul(N,Me)|0,w=w+Math.imul(N,Oe)|0;var fi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(fi>>>26)|0,fi&=67108863,v=Math.imul(ce,he),c=Math.imul(ce,de),c=c+Math.imul(ue,he)|0,w=Math.imul(ue,de),v=v+Math.imul(se,le)|0,c=c+Math.imul(se,pe)|0,c=c+Math.imul(fe,le)|0,w=w+Math.imul(fe,pe)|0,v=v+Math.imul(ie,be)|0,c=c+Math.imul(ie,ge)|0,c=c+Math.imul(ne,be)|0,w=w+Math.imul(ne,ge)|0,v=v+Math.imul(re,ve)|0,c=c+Math.imul(re,me)|0,c=c+Math.imul(te,ve)|0,w=w+Math.imul(te,me)|0,v=v+Math.imul(oe,ye)|0,c=c+Math.imul(oe,we)|0,c=c+Math.imul(ae,ye)|0,w=w+Math.imul(ae,we)|0,v=v+Math.imul(J,xe)|0,c=c+Math.imul(J,Ee)|0,c=c+Math.imul(Y,xe)|0,w=w+Math.imul(Y,Ee)|0,v=v+Math.imul(H,_e)|0,c=c+Math.imul(H,Se)|0,c=c+Math.imul(G,_e)|0,w=w+Math.imul(G,Se)|0,v=v+Math.imul(k,Ie)|0,c=c+Math.imul(k,Ae)|0,c=c+Math.imul($,Ie)|0,w=w+Math.imul($,Ae)|0,v=v+Math.imul(A,Me)|0,c=c+Math.imul(A,Oe)|0,c=c+Math.imul(L,Me)|0,w=w+Math.imul(L,Oe)|0,v=v+Math.imul(E,Re)|0,c=c+Math.imul(E,Ne)|0,c=c+Math.imul(N,Re)|0,w=w+Math.imul(N,Ne)|0;var ci=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,v=Math.imul(ce,le),c=Math.imul(ce,pe),c=c+Math.imul(ue,le)|0,w=Math.imul(ue,pe),v=v+Math.imul(se,be)|0,c=c+Math.imul(se,ge)|0,c=c+Math.imul(fe,be)|0,w=w+Math.imul(fe,ge)|0,v=v+Math.imul(ie,ve)|0,c=c+Math.imul(ie,me)|0,c=c+Math.imul(ne,ve)|0,w=w+Math.imul(ne,me)|0,v=v+Math.imul(re,ye)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(te,ye)|0,w=w+Math.imul(te,we)|0,v=v+Math.imul(oe,xe)|0,c=c+Math.imul(oe,Ee)|0,c=c+Math.imul(ae,xe)|0,w=w+Math.imul(ae,Ee)|0,v=v+Math.imul(J,_e)|0,c=c+Math.imul(J,Se)|0,c=c+Math.imul(Y,_e)|0,w=w+Math.imul(Y,Se)|0,v=v+Math.imul(H,Ie)|0,c=c+Math.imul(H,Ae)|0,c=c+Math.imul(G,Ie)|0,w=w+Math.imul(G,Ae)|0,v=v+Math.imul(k,Me)|0,c=c+Math.imul(k,Oe)|0,c=c+Math.imul($,Me)|0,w=w+Math.imul($,Oe)|0,v=v+Math.imul(A,Re)|0,c=c+Math.imul(A,Ne)|0,c=c+Math.imul(L,Re)|0,w=w+Math.imul(L,Ne)|0;var ui=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ui>>>26)|0,ui&=67108863,v=Math.imul(ce,be),c=Math.imul(ce,ge),c=c+Math.imul(ue,be)|0,w=Math.imul(ue,ge),v=v+Math.imul(se,ve)|0,c=c+Math.imul(se,me)|0,c=c+Math.imul(fe,ve)|0,w=w+Math.imul(fe,me)|0,v=v+Math.imul(ie,ye)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(ne,ye)|0,w=w+Math.imul(ne,we)|0,v=v+Math.imul(re,xe)|0,c=c+Math.imul(re,Ee)|0,c=c+Math.imul(te,xe)|0,w=w+Math.imul(te,Ee)|0,v=v+Math.imul(oe,_e)|0,c=c+Math.imul(oe,Se)|0,c=c+Math.imul(ae,_e)|0,w=w+Math.imul(ae,Se)|0,v=v+Math.imul(J,Ie)|0,c=c+Math.imul(J,Ae)|0,c=c+Math.imul(Y,Ie)|0,w=w+Math.imul(Y,Ae)|0,v=v+Math.imul(H,Me)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(G,Me)|0,w=w+Math.imul(G,Oe)|0,v=v+Math.imul(k,Re)|0,c=c+Math.imul(k,Ne)|0,c=c+Math.imul($,Re)|0,w=w+Math.imul($,Ne)|0;var hi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,v=Math.imul(ce,ve),c=Math.imul(ce,me),c=c+Math.imul(ue,ve)|0,w=Math.imul(ue,me),v=v+Math.imul(se,ye)|0,c=c+Math.imul(se,we)|0,c=c+Math.imul(fe,ye)|0,w=w+Math.imul(fe,we)|0,v=v+Math.imul(ie,xe)|0,c=c+Math.imul(ie,Ee)|0,c=c+Math.imul(ne,xe)|0,w=w+Math.imul(ne,Ee)|0,v=v+Math.imul(re,_e)|0,c=c+Math.imul(re,Se)|0,c=c+Math.imul(te,_e)|0,w=w+Math.imul(te,Se)|0,v=v+Math.imul(oe,Ie)|0,c=c+Math.imul(oe,Ae)|0,c=c+Math.imul(ae,Ie)|0,w=w+Math.imul(ae,Ae)|0,v=v+Math.imul(J,Me)|0,c=c+Math.imul(J,Oe)|0,c=c+Math.imul(Y,Me)|0,w=w+Math.imul(Y,Oe)|0,v=v+Math.imul(H,Re)|0,c=c+Math.imul(H,Ne)|0,c=c+Math.imul(G,Re)|0,w=w+Math.imul(G,Ne)|0;var di=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(di>>>26)|0,di&=67108863,v=Math.imul(ce,ye),c=Math.imul(ce,we),c=c+Math.imul(ue,ye)|0,w=Math.imul(ue,we),v=v+Math.imul(se,xe)|0,c=c+Math.imul(se,Ee)|0,c=c+Math.imul(fe,xe)|0,w=w+Math.imul(fe,Ee)|0,v=v+Math.imul(ie,_e)|0,c=c+Math.imul(ie,Se)|0,c=c+Math.imul(ne,_e)|0,w=w+Math.imul(ne,Se)|0,v=v+Math.imul(re,Ie)|0,c=c+Math.imul(re,Ae)|0,c=c+Math.imul(te,Ie)|0,w=w+Math.imul(te,Ae)|0,v=v+Math.imul(oe,Me)|0,c=c+Math.imul(oe,Oe)|0,c=c+Math.imul(ae,Me)|0,w=w+Math.imul(ae,Oe)|0,v=v+Math.imul(J,Re)|0,c=c+Math.imul(J,Ne)|0,c=c+Math.imul(Y,Re)|0,w=w+Math.imul(Y,Ne)|0;var li=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(li>>>26)|0,li&=67108863,v=Math.imul(ce,xe),c=Math.imul(ce,Ee),c=c+Math.imul(ue,xe)|0,w=Math.imul(ue,Ee),v=v+Math.imul(se,_e)|0,c=c+Math.imul(se,Se)|0,c=c+Math.imul(fe,_e)|0,w=w+Math.imul(fe,Se)|0,v=v+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Ae)|0,c=c+Math.imul(ne,Ie)|0,w=w+Math.imul(ne,Ae)|0,v=v+Math.imul(re,Me)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(te,Me)|0,w=w+Math.imul(te,Oe)|0,v=v+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ne)|0,c=c+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ne)|0;var pi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,v=Math.imul(ce,_e),c=Math.imul(ce,Se),c=c+Math.imul(ue,_e)|0,w=Math.imul(ue,Se),v=v+Math.imul(se,Ie)|0,c=c+Math.imul(se,Ae)|0,c=c+Math.imul(fe,Ie)|0,w=w+Math.imul(fe,Ae)|0,v=v+Math.imul(ie,Me)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(ne,Me)|0,w=w+Math.imul(ne,Oe)|0,v=v+Math.imul(re,Re)|0,c=c+Math.imul(re,Ne)|0,c=c+Math.imul(te,Re)|0,w=w+Math.imul(te,Ne)|0;var bi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,v=Math.imul(ce,Ie),c=Math.imul(ce,Ae),c=c+Math.imul(ue,Ie)|0,w=Math.imul(ue,Ae),v=v+Math.imul(se,Me)|0,c=c+Math.imul(se,Oe)|0,c=c+Math.imul(fe,Me)|0,w=w+Math.imul(fe,Oe)|0,v=v+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ne)|0,c=c+Math.imul(ne,Re)|0,w=w+Math.imul(ne,Ne)|0;var gi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,v=Math.imul(ce,Me),c=Math.imul(ce,Oe),c=c+Math.imul(ue,Me)|0,w=Math.imul(ue,Oe),v=v+Math.imul(se,Re)|0,c=c+Math.imul(se,Ne)|0,c=c+Math.imul(fe,Re)|0,w=w+Math.imul(fe,Ne)|0;var vi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,v=Math.imul(ce,Re),c=Math.imul(ce,Ne),c=c+Math.imul(ue,Re)|0,w=Math.imul(ue,Ne);var mi=(x+v|0)+((c&8191)<<13)|0;return x=(w+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,m[0]=ur,m[1]=ke,m[2]=je,m[3]=Kt,m[4]=Vt,m[5]=Ht,m[6]=Gt,m[7]=Jt,m[8]=fi,m[9]=ci,m[10]=ui,m[11]=hi,m[12]=di,m[13]=li,m[14]=pi,m[15]=bi,m[16]=gi,m[17]=vi,m[18]=mi,x!==0&&(m[19]=x,p.length++),p};Math.imul||(I=S);function O(M,u,b){b.negative=u.negative^M.negative,b.length=M.length+u.length;for(var p=0,f=0,l=0;l<b.length-1;l++){var m=f;f=0;for(var x=p&67108863,v=Math.min(l,u.length-1),c=Math.max(0,l-M.length+1);c<=v;c++){var w=l-c,R=M.words[w]|0,E=u.words[c]|0,N=R*E,q=N&67108863;m=m+(N/67108864|0)|0,q=q+x|0,x=q&67108863,m=m+(q>>>26)|0,f+=m>>>26,m&=67108863}b.words[l]=x,p=m,m=f}return p!==0?b.words[l]=p:b.length--,b.strip()}function P(M,u,b){var p=new T;return p.mulp(M,u,b)}n.prototype.mulTo=function(u,b){var p,f=this.length+u.length;return this.length===10&&u.length===10?p=I(this,u,b):f<63?p=S(this,u,b):f<1024?p=O(this,u,b):p=P(this,u,b),p};function T(M,u){this.x=M,this.y=u}T.prototype.makeRBT=function(u){for(var b=new Array(u),p=n.prototype._countBits(u)-1,f=0;f<u;f++)b[f]=this.revBin(f,p,u);return b},T.prototype.revBin=function(u,b,p){if(u===0||u===p-1)return u;for(var f=0,l=0;l<b;l++)f|=(u&1)<<b-l-1,u>>=1;return f},T.prototype.permute=function(u,b,p,f,l,m){for(var x=0;x<m;x++)f[x]=b[u[x]],l[x]=p[u[x]]},T.prototype.transform=function(u,b,p,f,l,m){this.permute(m,u,b,p,f,l);for(var x=1;x<l;x<<=1)for(var v=x<<1,c=Math.cos(2*Math.PI/v),w=Math.sin(2*Math.PI/v),R=0;R<l;R+=v)for(var E=c,N=w,q=0;q<x;q++){var A=p[R+q],L=f[R+q],z=p[R+q+x],k=f[R+q+x],$=E*z-N*k;k=E*k+N*z,z=$,p[R+q]=A+z,f[R+q]=L+k,p[R+q+x]=A-z,f[R+q+x]=L-k,q!==v&&($=c*E-w*N,N=c*N+w*E,E=$)}},T.prototype.guessLen13b=function(u,b){var p=Math.max(b,u)|1,f=p&1,l=0;for(p=p/2|0;p;p=p>>>1)l++;return 1<<l+1+f},T.prototype.conjugate=function(u,b,p){if(!(p<=1))for(var f=0;f<p/2;f++){var l=u[f];u[f]=u[p-f-1],u[p-f-1]=l,l=b[f],b[f]=-b[p-f-1],b[p-f-1]=-l}},T.prototype.normalize13b=function(u,b){for(var p=0,f=0;f<b/2;f++){var l=Math.round(u[2*f+1]/b)*8192+Math.round(u[2*f]/b)+p;u[f]=l&67108863,l<67108864?p=0:p=l/67108864|0}return u},T.prototype.convert13b=function(u,b,p,f){for(var l=0,m=0;m<b;m++)l=l+(u[m]|0),p[2*m]=l&8191,l=l>>>13,p[2*m+1]=l&8191,l=l>>>13;for(m=2*b;m<f;++m)p[m]=0;r(l===0),r((l&-8192)===0)},T.prototype.stub=function(u){for(var b=new Array(u),p=0;p<u;p++)b[p]=0;return b},T.prototype.mulp=function(u,b,p){var f=2*this.guessLen13b(u.length,b.length),l=this.makeRBT(f),m=this.stub(f),x=new Array(f),v=new Array(f),c=new Array(f),w=new Array(f),R=new Array(f),E=new Array(f),N=p.words;N.length=f,this.convert13b(u.words,u.length,x,f),this.convert13b(b.words,b.length,w,f),this.transform(x,m,v,c,f,l),this.transform(w,m,R,E,f,l);for(var q=0;q<f;q++){var A=v[q]*R[q]-c[q]*E[q];c[q]=v[q]*E[q]+c[q]*R[q],v[q]=A}return this.conjugate(v,c,f),this.transform(v,c,N,m,f,l),this.conjugate(N,m,f),this.normalize13b(N,f),p.negative=u.negative^b.negative,p.length=u.length+b.length,p.strip()},n.prototype.mul=function(u){var b=new n(null);return b.words=new Array(this.length+u.length),this.mulTo(u,b)},n.prototype.mulf=function(u){var b=new n(null);return b.words=new Array(this.length+u.length),P(this,u,b)},n.prototype.imul=function(u){return this.clone().mulTo(u,this)},n.prototype.imuln=function(u){r(typeof u=="number"),r(u<67108864);for(var b=0,p=0;p<this.length;p++){var f=(this.words[p]|0)*u,l=(f&67108863)+(b&67108863);b>>=26,b+=f/67108864|0,b+=l>>>26,this.words[p]=l&67108863}return b!==0&&(this.words[p]=b,this.length++),this.length=u===0?1:this.length,this},n.prototype.muln=function(u){return this.clone().imuln(u)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(u){var b=_(u);if(b.length===0)return new n(1);for(var p=this,f=0;f<b.length&&b[f]===0;f++,p=p.sqr());if(++f<b.length)for(var l=p.sqr();f<b.length;f++,l=l.sqr())b[f]!==0&&(p=p.mul(l));return p},n.prototype.iushln=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26,f=67108863>>>26-b<<26-b,l;if(b!==0){var m=0;for(l=0;l<this.length;l++){var x=this.words[l]&f,v=(this.words[l]|0)-x<<b;this.words[l]=v|m,m=x>>>26-b}m&&(this.words[l]=m,this.length++)}if(p!==0){for(l=this.length-1;l>=0;l--)this.words[l+p]=this.words[l];for(l=0;l<p;l++)this.words[l]=0;this.length+=p}return this.strip()},n.prototype.ishln=function(u){return r(this.negative===0),this.iushln(u)},n.prototype.iushrn=function(u,b,p){r(typeof u=="number"&&u>=0);var f;b?f=(b-b%26)/26:f=0;var l=u%26,m=Math.min((u-l)/26,this.length),x=67108863^67108863>>>l<<l,v=p;if(f-=m,f=Math.max(0,f),v){for(var c=0;c<m;c++)v.words[c]=this.words[c];v.length=m}if(m!==0)if(this.length>m)for(this.length-=m,c=0;c<this.length;c++)this.words[c]=this.words[c+m];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=f);c--){var R=this.words[c]|0;this.words[c]=w<<26-l|R>>>l,w=R&x}return v&&w!==0&&(v.words[v.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(u,b,p){return r(this.negative===0),this.iushrn(u,b,p)},n.prototype.shln=function(u){return this.clone().ishln(u)},n.prototype.ushln=function(u){return this.clone().iushln(u)},n.prototype.shrn=function(u){return this.clone().ishrn(u)},n.prototype.ushrn=function(u){return this.clone().iushrn(u)},n.prototype.testn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26,f=1<<b;if(this.length<=p)return!1;var l=this.words[p];return!!(l&f)},n.prototype.imaskn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(b!==0&&p++,this.length=Math.min(p,this.length),b!==0){var f=67108863^67108863>>>b<<b;this.words[this.length-1]&=f}return this.strip()},n.prototype.maskn=function(u){return this.clone().imaskn(u)},n.prototype.iaddn=function(u){return r(typeof u=="number"),r(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},n.prototype._iaddn=function(u){this.words[0]+=u;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},n.prototype.isubn=function(u){if(r(typeof u=="number"),r(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},n.prototype.addn=function(u){return this.clone().iaddn(u)},n.prototype.subn=function(u){return this.clone().isubn(u)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(u,b,p){var f=u.length+p,l;this._expand(f);var m,x=0;for(l=0;l<u.length;l++){m=(this.words[l+p]|0)+x;var v=(u.words[l]|0)*b;m-=v&67108863,x=(m>>26)-(v/67108864|0),this.words[l+p]=m&67108863}for(;l<this.length-p;l++)m=(this.words[l+p]|0)+x,x=m>>26,this.words[l+p]=m&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,l=0;l<this.length;l++)m=-(this.words[l]|0)+x,x=m>>26,this.words[l]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(u,b){var p=this.length-u.length,f=this.clone(),l=u,m=l.words[l.length-1]|0,x=this._countBits(m);p=26-x,p!==0&&(l=l.ushln(p),f.iushln(p),m=l.words[l.length-1]|0);var v=f.length-l.length,c;if(b!=="mod"){c=new n(null),c.length=v+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var R=f.clone()._ishlnsubmul(l,1,v);R.negative===0&&(f=R,c&&(c.words[v]=1));for(var E=v-1;E>=0;E--){var N=(f.words[l.length+E]|0)*67108864+(f.words[l.length+E-1]|0);for(N=Math.min(N/m|0,67108863),f._ishlnsubmul(l,N,E);f.negative!==0;)N--,f.negative=0,f._ishlnsubmul(l,1,E),f.isZero()||(f.negative^=1);c&&(c.words[E]=N)}return c&&c.strip(),f.strip(),b!=="div"&&p!==0&&f.iushrn(p),{div:c||null,mod:f}},n.prototype.divmod=function(u,b,p){if(r(!u.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var f,l,m;return this.negative!==0&&u.negative===0?(m=this.neg().divmod(u,b),b!=="mod"&&(f=m.div.neg()),b!=="div"&&(l=m.mod.neg(),p&&l.negative!==0&&l.iadd(u)),{div:f,mod:l}):this.negative===0&&u.negative!==0?(m=this.divmod(u.neg(),b),b!=="mod"&&(f=m.div.neg()),{div:f,mod:m.mod}):this.negative&u.negative?(m=this.neg().divmod(u.neg(),b),b!=="div"&&(l=m.mod.neg(),p&&l.negative!==0&&l.isub(u)),{div:m.div,mod:l}):u.length>this.length||this.cmp(u)<0?{div:new n(0),mod:this}:u.length===1?b==="div"?{div:this.divn(u.words[0]),mod:null}:b==="mod"?{div:null,mod:new n(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new n(this.modn(u.words[0]))}:this._wordDiv(u,b)},n.prototype.div=function(u){return this.divmod(u,"div",!1).div},n.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},n.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},n.prototype.divRound=function(u){var b=this.divmod(u);if(b.mod.isZero())return b.div;var p=b.div.negative!==0?b.mod.isub(u):b.mod,f=u.ushrn(1),l=u.andln(1),m=p.cmp(f);return m<0||l===1&&m===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},n.prototype.modn=function(u){r(u<=67108863);for(var b=(1<<26)%u,p=0,f=this.length-1;f>=0;f--)p=(b*p+(this.words[f]|0))%u;return p},n.prototype.idivn=function(u){r(u<=67108863);for(var b=0,p=this.length-1;p>=0;p--){var f=(this.words[p]|0)+b*67108864;this.words[p]=f/u|0,b=f%u}return this.strip()},n.prototype.divn=function(u){return this.clone().idivn(u)},n.prototype.egcd=function(u){r(u.negative===0),r(!u.isZero());var b=this,p=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var f=new n(1),l=new n(0),m=new n(0),x=new n(1),v=0;b.isEven()&&p.isEven();)b.iushrn(1),p.iushrn(1),++v;for(var c=p.clone(),w=b.clone();!b.isZero();){for(var R=0,E=1;!(b.words[0]&E)&&R<26;++R,E<<=1);if(R>0)for(b.iushrn(R);R-- >0;)(f.isOdd()||l.isOdd())&&(f.iadd(c),l.isub(w)),f.iushrn(1),l.iushrn(1);for(var N=0,q=1;!(p.words[0]&q)&&N<26;++N,q<<=1);if(N>0)for(p.iushrn(N);N-- >0;)(m.isOdd()||x.isOdd())&&(m.iadd(c),x.isub(w)),m.iushrn(1),x.iushrn(1);b.cmp(p)>=0?(b.isub(p),f.isub(m),l.isub(x)):(p.isub(b),m.isub(f),x.isub(l))}return{a:m,b:x,gcd:p.iushln(v)}},n.prototype._invmp=function(u){r(u.negative===0),r(!u.isZero());var b=this,p=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var f=new n(1),l=new n(0),m=p.clone();b.cmpn(1)>0&&p.cmpn(1)>0;){for(var x=0,v=1;!(b.words[0]&v)&&x<26;++x,v<<=1);if(x>0)for(b.iushrn(x);x-- >0;)f.isOdd()&&f.iadd(m),f.iushrn(1);for(var c=0,w=1;!(p.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(p.iushrn(c);c-- >0;)l.isOdd()&&l.iadd(m),l.iushrn(1);b.cmp(p)>=0?(b.isub(p),f.isub(l)):(p.isub(b),l.isub(f))}var R;return b.cmpn(1)===0?R=f:R=l,R.cmpn(0)<0&&R.iadd(u),R},n.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var b=this.clone(),p=u.clone();b.negative=0,p.negative=0;for(var f=0;b.isEven()&&p.isEven();f++)b.iushrn(1),p.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;p.isEven();)p.iushrn(1);var l=b.cmp(p);if(l<0){var m=b;b=p,p=m}else if(l===0||p.cmpn(1)===0)break;b.isub(p)}while(!0);return p.iushln(f)},n.prototype.invm=function(u){return this.egcd(u).a.umod(u)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(u){return this.words[0]&u},n.prototype.bincn=function(u){r(typeof u=="number");var b=u%26,p=(u-b)/26,f=1<<b;if(this.length<=p)return this._expand(p+1),this.words[p]|=f,this;for(var l=f,m=p;l!==0&&m<this.length;m++){var x=this.words[m]|0;x+=l,l=x>>>26,x&=67108863,this.words[m]=x}return l!==0&&(this.words[m]=l,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(u){var b=u<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var p;if(this.length>1)p=1;else{b&&(u=-u),r(u<=67108863,"Number is too big");var f=this.words[0]|0;p=f===u?0:f<u?-1:1}return this.negative!==0?-p|0:p},n.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var b=this.ucmp(u);return this.negative!==0?-b|0:b},n.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var b=0,p=this.length-1;p>=0;p--){var f=this.words[p]|0,l=u.words[p]|0;if(f!==l){f<l?b=-1:f>l&&(b=1);break}}return b},n.prototype.gtn=function(u){return this.cmpn(u)===1},n.prototype.gt=function(u){return this.cmp(u)===1},n.prototype.gten=function(u){return this.cmpn(u)>=0},n.prototype.gte=function(u){return this.cmp(u)>=0},n.prototype.ltn=function(u){return this.cmpn(u)===-1},n.prototype.lt=function(u){return this.cmp(u)===-1},n.prototype.lten=function(u){return this.cmpn(u)<=0},n.prototype.lte=function(u){return this.cmp(u)<=0},n.prototype.eqn=function(u){return this.cmpn(u)===0},n.prototype.eq=function(u){return this.cmp(u)===0},n.red=function(u){return new C(u)},n.prototype.toRed=function(u){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(u){return this.red=u,this},n.prototype.forceRed=function(u){return r(!this.red,"Already a number in reduction context"),this._forceRed(u)},n.prototype.redAdd=function(u){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},n.prototype.redIAdd=function(u){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},n.prototype.redSub=function(u){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},n.prototype.redISub=function(u){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},n.prototype.redShl=function(u){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},n.prototype.redMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},n.prototype.redIMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(u){return r(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var U={k256:null,p224:null,p192:null,p25519:null};function D(M,u){this.name=M,this.p=new n(u,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var u=new n(null);return u.words=new Array(Math.ceil(this.n/13)),u},D.prototype.ireduce=function(u){var b=u,p;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),p=b.bitLength();while(p>this.n);var f=p<this.n?-1:b.ucmp(this.p);return f===0?(b.words[0]=0,b.length=1):f>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},D.prototype.split=function(u,b){u.iushrn(this.n,0,b)},D.prototype.imulK=function(u){return u.imul(this.k)};function F(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,D),F.prototype.split=function(u,b){for(var p=4194303,f=Math.min(u.length,9),l=0;l<f;l++)b.words[l]=u.words[l];if(b.length=f,u.length<=9){u.words[0]=0,u.length=1;return}var m=u.words[9];for(b.words[b.length++]=m&p,l=10;l<u.length;l++){var x=u.words[l]|0;u.words[l-10]=(x&p)<<4|m>>>22,m=x}m>>>=22,u.words[l-10]=m,m===0&&u.length>10?u.length-=10:u.length-=9},F.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var b=0,p=0;p<u.length;p++){var f=u.words[p]|0;b+=f*977,u.words[p]=b&67108863,b=f*64+(b/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function j(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,D);function V(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(V,D);function B(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(B,D),B.prototype.imulK=function(u){for(var b=0,p=0;p<u.length;p++){var f=(u.words[p]|0)*19+b,l=f&67108863;f>>>=26,u.words[p]=l,b=f}return b!==0&&(u.words[u.length++]=b),u},n._prime=function(u){if(U[u])return U[u];var b;if(u==="k256")b=new F;else if(u==="p224")b=new j;else if(u==="p192")b=new V;else if(u==="p25519")b=new B;else throw new Error("Unknown prime "+u);return U[u]=b,b};function C(M){if(typeof M=="string"){var u=n._prime(M);this.m=u.p,this.prime=u}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}C.prototype._verify1=function(u){r(u.negative===0,"red works only with positives"),r(u.red,"red works only with red numbers")},C.prototype._verify2=function(u,b){r((u.negative|b.negative)===0,"red works only with positives"),r(u.red&&u.red===b.red,"red works only with red numbers")},C.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},C.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},C.prototype.add=function(u,b){this._verify2(u,b);var p=u.add(b);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},C.prototype.iadd=function(u,b){this._verify2(u,b);var p=u.iadd(b);return p.cmp(this.m)>=0&&p.isub(this.m),p},C.prototype.sub=function(u,b){this._verify2(u,b);var p=u.sub(b);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},C.prototype.isub=function(u,b){this._verify2(u,b);var p=u.isub(b);return p.cmpn(0)<0&&p.iadd(this.m),p},C.prototype.shl=function(u,b){return this._verify1(u),this.imod(u.ushln(b))},C.prototype.imul=function(u,b){return this._verify2(u,b),this.imod(u.imul(b))},C.prototype.mul=function(u,b){return this._verify2(u,b),this.imod(u.mul(b))},C.prototype.isqr=function(u){return this.imul(u,u.clone())},C.prototype.sqr=function(u){return this.mul(u,u)},C.prototype.sqrt=function(u){if(u.isZero())return u.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var p=this.m.add(new n(1)).iushrn(2);return this.pow(u,p)}for(var f=this.m.subn(1),l=0;!f.isZero()&&f.andln(1)===0;)l++,f.iushrn(1);r(!f.isZero());var m=new n(1).toRed(this),x=m.redNeg(),v=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,v).cmp(x)!==0;)c.redIAdd(x);for(var w=this.pow(c,f),R=this.pow(u,f.addn(1).iushrn(1)),E=this.pow(u,f),N=l;E.cmp(m)!==0;){for(var q=E,A=0;q.cmp(m)!==0;A++)q=q.redSqr();r(A<N);var L=this.pow(w,new n(1).iushln(N-A-1));R=R.redMul(L),w=L.redSqr(),E=E.redMul(w),N=A}return R},C.prototype.invm=function(u){var b=u._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},C.prototype.pow=function(u,b){if(b.isZero())return new n(1).toRed(this);if(b.cmpn(1)===0)return u.clone();var p=4,f=new Array(1<<p);f[0]=new n(1).toRed(this),f[1]=u;for(var l=2;l<f.length;l++)f[l]=this.mul(f[l-1],u);var m=f[0],x=0,v=0,c=b.bitLength()%26;for(c===0&&(c=26),l=b.length-1;l>=0;l--){for(var w=b.words[l],R=c-1;R>=0;R--){var E=w>>R&1;if(m!==f[0]&&(m=this.sqr(m)),E===0&&x===0){v=0;continue}x<<=1,x|=E,v++,!(v!==p&&(l!==0||R!==0))&&(m=this.mul(m,f[x]),v=0,x=0)}c=26}return m},C.prototype.convertTo=function(u){var b=u.umod(this.m);return b===u?b.clone():b},C.prototype.convertFrom=function(u){var b=u.clone();return b.red=null,b},n.mont=function(u){return new K(u)};function K(M){C.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,C),K.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},K.prototype.convertFrom=function(u){var b=this.imod(u.mul(this.rinv));return b.red=null,b},K.prototype.imul=function(u,b){if(u.isZero()||b.isZero())return u.words[0]=0,u.length=1,u;var p=u.imul(b),f=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=p.isub(f).iushrn(this.shift),m=l;return l.cmp(this.m)>=0?m=l.isub(this.m):l.cmpn(0)<0&&(m=l.iadd(this.m)),m._forceRed(this)},K.prototype.mul=function(u,b){if(u.isZero()||b.isZero())return new n(0)._forceRed(this);var p=u.mul(b),f=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=p.isub(f).iushrn(this.shift),m=l;return l.cmp(this.m)>=0?m=l.isub(this.m):l.cmpn(0)<0&&(m=l.iadd(this.m)),m._forceRed(this)},K.prototype.invm=function(u){var b=this.imod(u._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof W0>"u"||W0,Xy)});var Vu=X(e3=>{"use strict";var Ku=e3;function aO(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t!="string"){for(var i=0;i<t.length;i++)r[i]=t[i]|0;return r}if(e==="hex"){t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t);for(var i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var i=0;i<t.length;i++){var n=t.charCodeAt(i),s=n>>8,o=n&255;s?r.push(s,o):r.push(o)}return r}Ku.toArray=aO;function Zy(t){return t.length===1?"0"+t:t}Ku.zero2=Zy;function Qy(t){for(var e="",r=0;r<t.length;r++)e+=Zy(t[r].toString(16));return e}Ku.toHex=Qy;Ku.encode=function(e,r){return r==="hex"?Qy(e):e}});var zr=X(t3=>{"use strict";var Ai=t3,fO=Yi(),cO=xn(),Hu=Vu();Ai.assert=cO;Ai.toArray=Hu.toArray;Ai.zero2=Hu.zero2;Ai.toHex=Hu.toHex;Ai.encode=Hu.encode;function uO(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1),n;for(n=0;n<i.length;n+=1)i[n]=0;var s=1<<e+1,o=t.clone();for(n=0;n<i.length;n++){var a,h=o.andln(s-1);o.isOdd()?(h>(s>>1)-1?a=(s>>1)-h:a=h,o.isubn(a)):a=0,i[n]=a,o.iushrn(1)}return i}Ai.getNAF=uO;function hO(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0,s;t.cmpn(-i)>0||e.cmpn(-n)>0;){var o=t.andln(3)+i&3,a=e.andln(3)+n&3;o===3&&(o=-1),a===3&&(a=-1);var h;o&1?(s=t.andln(7)+i&7,(s===3||s===5)&&a===2?h=-o:h=o):h=0,r[0].push(h);var d;a&1?(s=e.andln(7)+n&7,(s===3||s===5)&&o===2?d=-a:d=a):d=0,r[1].push(d),2*i===h+1&&(i=1-i),2*n===d+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r}Ai.getJSF=hO;function dO(t,e,r){var i="_"+e;t.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}Ai.cachedProperty=dO;function lO(t){return typeof t=="string"?Ai.toArray(t,"hex"):t}Ai.parseBytes=lO;function pO(t){return new fO(t,"hex","le")}Ai.intFromLE=pO});var _f=X((TH,Z0)=>{var Y0;Z0.exports=function(e){return Y0||(Y0=new Qn(null)),Y0.generate(e)};function Qn(t){this.rand=t}Z0.exports.Rand=Qn;Qn.prototype.generate=function(e){return this._rand(e)};Qn.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Qn.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Qn.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Qn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(X0=_l(),typeof X0.randomBytes!="function")throw new Error("Not supported");Qn.prototype._rand=function(e){return X0.randomBytes(e)}}catch{}var X0});var If=X((DH,r3)=>{"use strict";var eo=Yi(),Sf=zr(),Gu=Sf.getNAF,bO=Sf.getJSF,Ju=Sf.assert;function es(t,e){this.type=t,this.p=new eo(e.p,16),this.red=e.prime?eo.red(e.prime):eo.mont(this.p),this.zero=new eo(0).toRed(this.red),this.one=new eo(1).toRed(this.red),this.two=new eo(2).toRed(this.red),this.n=e.n&&new eo(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}r3.exports=es;es.prototype.point=function(){throw new Error("Not implemented")};es.prototype.validate=function(){throw new Error("Not implemented")};es.prototype._fixedNafMul=function(e,r){Ju(e.precomputed);var i=e._getDoubles(),n=Gu(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,h;for(a=0;a<n.length;a+=i.step){h=0;for(var d=a+i.step-1;d>=a;d--)h=(h<<1)+n[d];o.push(h)}for(var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null),_=s;_>0;_--){for(a=0;a<o.length;a++)h=o[a],h===_?y=y.mixedAdd(i.points[a]):h===-_&&(y=y.mixedAdd(i.points[a].neg()));g=g.add(y)}return g.toP()};es.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=Gu(r,i,this._bitLength),a=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var d=0;h>=0&&o[h]===0;h--)d++;if(h>=0&&d++,a=a.dblp(d),h<0)break;var g=o[h];Ju(g!==0),e.type==="affine"?g>0?a=a.mixedAdd(s[g-1>>1]):a=a.mixedAdd(s[-g-1>>1].neg()):g>0?a=a.add(s[g-1>>1]):a=a.add(s[-g-1>>1].neg())}return e.type==="affine"?a.toP():a};es.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,h=this._wnafT3,d=0,g,y,_;for(g=0;g<n;g++){_=r[g];var S=_._getNAFPoints(e);o[g]=S.wnd,a[g]=S.points}for(g=n-1;g>=1;g-=2){var I=g-1,O=g;if(o[I]!==1||o[O]!==1){h[I]=Gu(i[I],o[I],this._bitLength),h[O]=Gu(i[O],o[O],this._bitLength),d=Math.max(h[I].length,d),d=Math.max(h[O].length,d);continue}var P=[r[I],null,null,r[O]];r[I].y.cmp(r[O].y)===0?(P[1]=r[I].add(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg())):r[I].y.cmp(r[O].y.redNeg())===0?(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].add(r[O].neg())):(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],U=bO(i[I],i[O]);for(d=Math.max(U[0].length,d),h[I]=new Array(d),h[O]=new Array(d),y=0;y<d;y++){var D=U[0][y]|0,F=U[1][y]|0;h[I][y]=T[(D+1)*3+(F+1)],h[O][y]=0,a[I]=P}}var j=this.jpoint(null,null,null),V=this._wnafT4;for(g=d;g>=0;g--){for(var B=0;g>=0;){var C=!0;for(y=0;y<n;y++)V[y]=h[y][g]|0,V[y]!==0&&(C=!1);if(!C)break;B++,g--}if(g>=0&&B++,j=j.dblp(B),g<0)break;for(y=0;y<n;y++){var K=V[y];K!==0&&(K>0?_=a[y][K-1>>1]:K<0&&(_=a[y][-K-1>>1].neg()),_.type==="affine"?j=j.mixedAdd(_):j=j.add(_))}}for(g=0;g<n;g++)a[g]=null;return s?j:j.toP()};function Zr(t,e){this.curve=t,this.type=e,this.precomputed=null}es.BasePoint=Zr;Zr.prototype.eq=function(){throw new Error("Not implemented")};Zr.prototype.validate=function(){return this.curve.validate(this)};es.prototype.decodePoint=function(e,r){e=Sf.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Ju(e[e.length-1]%2===0):e[0]===7&&Ju(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Zr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Zr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Zr.prototype.encode=function(e,r){return Sf.encode(this._encode(r),e)};Zr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Zr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Zr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};Zr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Zr.prototype._getBeta=function(){return null};Zr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r}});var n3=X((CH,i3)=>{"use strict";var gO=zr(),ot=Yi(),Q0=Jn(),ia=If(),vO=gO.assert;function Qr(t){ia.call(this,"short",t),this.a=new ot(t.a,16).toRed(this.red),this.b=new ot(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Q0(Qr,ia);i3.exports=Qr;Qr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new ot(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new ot(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],vO(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new ot(a.a,16),b:new ot(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};Qr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ot.mont(e),i=new ot(2).toRed(r).redInvm(),n=i.redNeg(),s=new ot(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};Qr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new ot(1),o=new ot(0),a=new ot(0),h=new ot(1),d,g,y,_,S,I,O,P=0,T,U;i.cmpn(0)!==0;){var D=n.div(i);T=n.sub(D.mul(i)),U=a.sub(D.mul(s));var F=h.sub(D.mul(o));if(!y&&T.cmp(r)<0)d=O.neg(),g=s,y=T.neg(),_=U;else if(y&&++P===2)break;O=T,n=i,i=T,a=s,s=U,h=o,o=F}S=T.neg(),I=U;var j=y.sqr().add(_.sqr()),V=S.sqr().add(I.sqr());return V.cmp(j)>=0&&(S=d,I=g),y.negative&&(y=y.neg(),_=_.neg()),S.negative&&(S=S.neg(),I=I.neg()),[{a:y,b:_},{a:S,b:I}]};Qr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),h=o.mul(n.a),d=s.mul(i.b),g=o.mul(n.b),y=e.sub(a).sub(h),_=d.add(g).neg();return{k1:y,k2:_}};Qr.prototype.pointFromX=function(e,r){e=new ot(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};Qr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Qr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),h=e[o],d=h._getBeta();a.k1.negative&&(a.k1.ineg(),h=h.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),n[o*2]=h,n[o*2+1]=d,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var g=this._wnafMulAdd(1,n,s,o*2,i),y=0;y<o*2;y++)n[y]=null,s[y]=null;return g};function wt(t,e,r,i){ia.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ot(e,16),this.y=new ot(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Q0(wt,ia.BasePoint);Qr.prototype.point=function(e,r,i){return new wt(this,e,r,i)};Qr.prototype.pointFromJSON=function(e,r){return wt.fromJSON(this,e,r)};wt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};wt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};wt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};wt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};wt.prototype.isInfinity=function(){return this.inf};wt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};wt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};wt.prototype.getX=function(){return this.x.fromRed()};wt.prototype.getY=function(){return this.y.fromRed()};wt.prototype.mul=function(e){return e=new ot(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};wt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};wt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};wt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};wt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};wt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Dt(t,e,r,i){ia.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ot(0)):(this.x=new ot(e,16),this.y=new ot(r,16),this.z=new ot(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Q0(Dt,ia.BasePoint);Qr.prototype.jpoint=function(e,r,i){return new Dt(this,e,r,i)};Dt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Dt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Dt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),h=n.redSub(s),d=o.redSub(a);if(h.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=h.redSqr(),y=g.redMul(h),_=n.redMul(g),S=d.redSqr().redIAdd(y).redISub(_).redISub(_),I=d.redMul(_.redISub(S)).redISub(o.redMul(y)),O=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(S,I,O)};Dt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),h=s.redSub(o);if(a.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),g=d.redMul(a),y=i.redMul(d),_=h.redSqr().redIAdd(g).redISub(y).redISub(y),S=h.redMul(y.redISub(_)).redISub(s.redMul(g)),I=this.z.redMul(a);return this.curve.jpoint(_,S,I)};Dt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,h=this.z,d=h.redSqr().redSqr(),g=a.redAdd(a);for(r=0;r<e;r++){var y=o.redSqr(),_=g.redSqr(),S=_.redSqr(),I=y.redAdd(y).redIAdd(y).redIAdd(n.redMul(d)),O=o.redMul(_),P=I.redSqr().redISub(O.redAdd(O)),T=O.redISub(P),U=I.redMul(T);U=U.redIAdd(U).redISub(S);var D=g.redMul(h);r+1<e&&(d=d.redMul(S)),o=P,h=D,g=U}return this.curve.jpoint(o,g.redMul(s),h)};Dt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Dt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n),d=h.redSqr().redISub(a).redISub(a),g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),e=d,r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),I=this.x.redAdd(_).redSqr().redISub(y).redISub(S);I=I.redIAdd(I);var O=y.redAdd(y).redIAdd(y),P=O.redSqr(),T=S.redIAdd(S);T=T.redIAdd(T),T=T.redIAdd(T),e=P.redISub(I).redISub(I),r=O.redMul(I.redISub(e)).redISub(T),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Dt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),d=h.redSqr().redISub(a).redISub(a);e=d;var g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),I=this.x.redSub(y).redMul(this.x.redAdd(y));I=I.redAdd(I).redIAdd(I);var O=S.redIAdd(S);O=O.redIAdd(O);var P=O.redAdd(O);e=I.redSqr().redISub(P),i=this.y.redAdd(this.z).redSqr().redISub(_).redISub(y);var T=_.redSqr();T=T.redIAdd(T),T=T.redIAdd(T),T=T.redIAdd(T),r=I.redMul(O.redISub(e)).redISub(T)}return this.curve.jpoint(e,r,i)};Dt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var g=d.redMul(a),y=h.redSqr().redISub(g.redAdd(g)),_=g.redISub(y),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=h.redMul(_).redISub(S),O=i.redAdd(i).redMul(n);return this.curve.jpoint(y,I,O)};Dt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var h=a.redSqr(),d=n.redIAdd(n);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=s.redIAdd(a).redSqr().redISub(o).redISub(h).redISub(d),y=r.redMul(g);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.x.redMul(h).redISub(y);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(g.redMul(d.redISub(g)).redISub(a.redMul(h)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=this.z.redAdd(a).redSqr().redISub(i).redISub(h);return this.curve.jpoint(_,S,I)};Dt.prototype.mul=function(e,r){return e=new ot(e,r),this.curve._wnafMul(this,e)};Dt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Dt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Dt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Dt.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var a3=X((LH,o3)=>{"use strict";var na=Yi(),s3=Jn(),Wu=If(),mO=zr();function sa(t){Wu.call(this,"mont",t),this.a=new na(t.a,16).toRed(this.red),this.b=new na(t.b,16).toRed(this.red),this.i4=new na(4).toRed(this.red).redInvm(),this.two=new na(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}s3(sa,Wu);o3.exports=sa;sa.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function xt(t,e,r){Wu.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new na(e,16),this.z=new na(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s3(xt,Wu.BasePoint);sa.prototype.decodePoint=function(e,r){return this.point(mO.toArray(e,r),1)};sa.prototype.point=function(e,r){return new xt(this,e,r)};sa.prototype.pointFromJSON=function(e){return xt.fromJSON(this,e)};xt.prototype.precompute=function(){};xt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};xt.fromJSON=function(e,r){return new xt(e,r[0],r[1]||e.one)};xt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};xt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};xt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};xt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};xt.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),h=s.redMul(n),d=r.z.redMul(a.redAdd(h).redSqr()),g=r.x.redMul(a.redISub(h).redSqr());return this.curve.point(d,g)};xt.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};xt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};xt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};xt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};xt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};xt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var u3=X((FH,c3)=>{"use strict";var yO=zr(),On=Yi(),f3=Jn(),Yu=If(),wO=yO.assert;function Xi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Yu.call(this,"edwards",t),this.a=new On(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new On(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new On(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),wO(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}f3(Xi,Yu);c3.exports=Xi;Xi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Xi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Xi.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};Xi.prototype.pointFromX=function(e,r){e=new On(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var h=a.fromRed().isOdd();return(r&&!h||!r&&h)&&(a=a.redNeg()),this.point(e,a)};Xi.prototype.pointFromY=function(e,r){e=new On(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};Xi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function et(t,e,r,i,n){Yu.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new On(e,16),this.y=new On(r,16),this.z=i?new On(i,16):this.curve.one,this.t=n&&new On(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}f3(et,Yu.BasePoint);Xi.prototype.pointFromJSON=function(e){return et.fromJSON(this,e)};Xi.prototype.point=function(e,r,i,n){return new et(this,e,r,i,n)};et.fromJSON=function(e,r){return new et(e,r[0],r[1],r[2])};et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};et.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};et.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),h=n.redSub(r),d=s.redMul(a),g=o.redMul(h),y=s.redMul(h),_=a.redMul(o);return this.curve.point(d,g,_,y)};et.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,h,d;if(this.curve.twisted){a=this.curve._mulA(r);var g=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(g.redSub(this.curve.two)),s=g.redMul(a.redSub(i)),o=g.redSqr().redSub(g).redSub(g)):(h=this.z.redSqr(),d=g.redSub(h).redISub(h),n=e.redSub(r).redISub(i).redMul(d),s=g.redMul(a.redSub(i)),o=g.redMul(d))}else a=r.redAdd(i),h=this.curve._mulC(this.z).redSqr(),d=a.redSub(h).redSub(h),n=this.curve._mulC(e.redISub(a)).redMul(d),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(d);return this.curve.point(n,s,o)};et.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};et.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),h=s.redAdd(n),d=i.redAdd(r),g=o.redMul(a),y=h.redMul(d),_=o.redMul(d),S=a.redMul(h);return this.curve.point(g,y,S,_)};et.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),h=i.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),g=r.redMul(a).redMul(d),y,_;return this.curve.twisted?(y=r.redMul(h).redMul(s.redSub(this.curve._mulA(n))),_=a.redMul(h)):(y=r.redMul(h).redMul(s.redSub(n)),_=this.curve._mulC(a).redMul(h)),this.curve.point(g,y,_)};et.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};et.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};et.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};et.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};et.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};et.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};et.prototype.getX=function(){return this.normalize(),this.x.fromRed()};et.prototype.getY=function(){return this.normalize(),this.y.fromRed()};et.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};et.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};et.prototype.toP=et.prototype.normalize;et.prototype.mixedAdd=et.prototype.add});var ep=X(h3=>{"use strict";var Xu=h3;Xu.base=If();Xu.short=n3();Xu.mont=a3();Xu.edwards=u3()});var l3=X((UH,d3)=>{d3.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Zu=X(g3=>{"use strict";var rp=g3,ts=Xs(),tp=ep(),xO=zr(),p3=xO.assert;function b3(t){t.type==="short"?this.curve=new tp.short(t):t.type==="edwards"?this.curve=new tp.edwards(t):this.curve=new tp.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,p3(this.g.validate(),"Invalid curve"),p3(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}rp.PresetCurve=b3;function rs(t,e){Object.defineProperty(rp,t,{configurable:!0,enumerable:!0,get:function(){var r=new b3(e);return Object.defineProperty(rp,t,{configurable:!0,enumerable:!0,value:r}),r}})}rs("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ts.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});rs("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ts.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});rs("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ts.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});rs("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ts.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});rs("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ts.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});rs("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ts.sha256,gRed:!1,g:["9"]});rs("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ts.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var ip;try{ip=l3()}catch{ip=void 0}rs("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ts.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",ip]})});var np=X((zH,m3)=>{"use strict";var EO=Xs(),to=Vu(),v3=xn();function is(t){if(!(this instanceof is))return new is(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=to.toArray(t.entropy,t.entropyEnc||"hex"),r=to.toArray(t.nonce,t.nonceEnc||"hex"),i=to.toArray(t.pers,t.persEnc||"hex");v3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}m3.exports=is;is.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};is.prototype._hmac=function(){return new EO.hmac(this.hash,this.K)};is.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};is.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=to.toArray(e,r),i=to.toArray(i,n),v3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};is.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=to.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,to.encode(o,r)}});var w3=X((kH,y3)=>{"use strict";var _O=Yi(),SO=zr(),sp=SO.assert;function Qt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}y3.exports=Qt;Qt.fromPublic=function(e,r,i){return r instanceof Qt?r:new Qt(e,{pub:r,pubEnc:i})};Qt.fromPrivate=function(e,r,i){return r instanceof Qt?r:new Qt(e,{priv:r,privEnc:i})};Qt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Qt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Qt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Qt.prototype._importPrivate=function(e,r){this.priv=new _O(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Qt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?sp(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&sp(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Qt.prototype.derive=function(e){return e.validate()||sp(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Qt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};Qt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Qt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var _3=X((jH,E3)=>{"use strict";var Qu=Yi(),fp=zr(),IO=fp.assert;function eh(t,e){if(t instanceof eh)return t;this._importDER(t,e)||(IO(t.r&&t.s,"Signature without r or s"),this.r=new Qu(t.r,16),this.s=new Qu(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}E3.exports=eh;function AO(){this.place=0}function op(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function x3(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}eh.prototype._importDER=function(e,r){e=fp.toArray(e,r);var i=new AO;if(e[i.place++]!==48)return!1;var n=op(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=op(e,i);if(s===!1||e[i.place]&128)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=op(e,i);if(a===!1||e.length!==a+i.place||e[i.place]&128)return!1;var h=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new Qu(o),this.s=new Qu(h),this.recoveryParam=null,!0};function ap(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}eh.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=x3(r),i=x3(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];ap(n,r.length),n=n.concat(r),n.push(2),ap(n,i.length);var s=n.concat(i),o=[48];return ap(o,s.length),o=o.concat(s),fp.encode(o,e)}});var M3=X(($H,A3)=>{"use strict";var ro=Yi(),S3=np(),MO=zr(),cp=Zu(),OO=_f(),I3=MO.assert,up=w3(),th=_3();function ei(t){if(!(this instanceof ei))return new ei(t);typeof t=="string"&&(I3(Object.prototype.hasOwnProperty.call(cp,t),"Unknown curve "+t),t=cp[t]),t instanceof cp.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}A3.exports=ei;ei.prototype.keyPair=function(e){return new up(this,e)};ei.prototype.keyFromPrivate=function(e,r){return up.fromPrivate(this,e,r)};ei.prototype.keyFromPublic=function(e,r){return up.fromPublic(this,e,r)};ei.prototype.genKeyPair=function(e){e||(e={});for(var r=new S3({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||OO(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new ro(2));;){var s=new ro(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};ei.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};ei.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new ro(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),h=new S3({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),d=this.n.sub(new ro(1)),g=0;;g++){var y=n.k?n.k(g):new ro(h.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var _=this.g.mul(y);if(!_.isInfinity()){var S=_.getX(),I=S.umod(this.n);if(I.cmpn(0)!==0){var O=y.invm(this.n).mul(I.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var P=(_.getY().isOdd()?1:0)|(S.cmp(I)!==0?2:0);return n.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),P^=1),new th({r:I,s:O,recoveryParam:P})}}}}}};ei.prototype.verify=function(e,r,i,n){e=this._truncateToN(new ro(e,16)),i=this.keyFromPublic(i,n),r=new th(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),h=a.mul(e).umod(this.n),d=a.mul(s).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(h,i.getPublic(),d),g.isInfinity()?!1:g.eqXToP(s)):(g=this.g.mulAdd(h,i.getPublic(),d),g.isInfinity()?!1:g.getX().umod(this.n).cmp(s)===0)};ei.prototype.recoverPubKey=function(t,e,r,i){I3((3&r)===r,"The recovery param is more than two bits"),e=new th(e,i);var n=this.n,s=new ro(t),o=e.r,a=e.s,h=r&1,d=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?o=this.curve.pointFromX(o.add(this.curve.n),h):o=this.curve.pointFromX(o,h);var g=e.r.invm(n),y=n.sub(s).mul(g).umod(n),_=a.mul(g).umod(n);return this.g.mulAdd(y,o,_)};ei.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new th(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}});var P3=X((KH,N3)=>{"use strict";var Af=zr(),R3=Af.assert,O3=Af.parseBytes,oa=Af.cachedProperty;function Et(t,e){this.eddsa=t,this._secret=O3(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=O3(e.pub)}Et.fromPublic=function(e,r){return r instanceof Et?r:new Et(e,{pub:r})};Et.fromSecret=function(e,r){return r instanceof Et?r:new Et(e,{secret:r})};Et.prototype.secret=function(){return this._secret};oa(Et,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});oa(Et,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});oa(Et,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});oa(Et,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});oa(Et,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});oa(Et,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Et.prototype.sign=function(e){return R3(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Et.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Et.prototype.getSecret=function(e){return R3(this._secret,"KeyPair is public only"),Af.encode(this.secret(),e)};Et.prototype.getPublic=function(e){return Af.encode(this.pubBytes(),e)};N3.exports=Et});var C3=X((VH,D3)=>{"use strict";var RO=Yi(),rh=zr(),T3=rh.assert,ih=rh.cachedProperty,NO=rh.parseBytes;function io(t,e){this.eddsa=t,typeof e!="object"&&(e=NO(e)),Array.isArray(e)&&(T3(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),T3(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof RO&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}ih(io,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});ih(io,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});ih(io,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});ih(io,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});io.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};io.prototype.toHex=function(){return rh.encode(this.toBytes(),"hex").toUpperCase()};D3.exports=io});var q3=X((HH,U3)=>{"use strict";var PO=Xs(),TO=Zu(),aa=zr(),DO=aa.assert,F3=aa.parseBytes,B3=P3(),L3=C3();function xr(t){if(DO(t==="ed25519","only tested with ed25519 so far"),!(this instanceof xr))return new xr(t);t=TO[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=PO.sha512}U3.exports=xr;xr.prototype.sign=function(e,r){e=F3(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),h=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:h,Rencoded:o})};xr.prototype.verify=function(e,r,i){if(e=F3(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)};xr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return aa.intFromLE(e.digest()).umod(this.curve.n)};xr.prototype.keyFromPublic=function(e){return B3.fromPublic(this,e)};xr.prototype.keyFromSecret=function(e){return B3.fromSecret(this,e)};xr.prototype.makeSignature=function(e){return e instanceof L3?e:new L3(this,e)};xr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};xr.prototype.decodePoint=function(e){e=aa.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),n=(e[r]&128)!==0,s=aa.intFromLE(i);return this.curve.pointFromY(s,n)};xr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};xr.prototype.decodeInt=function(e){return aa.intFromLE(e)};xr.prototype.isPoint=function(e){return e instanceof this.pointClass}});var k3=X(z3=>{"use strict";var no=z3;no.version=Yy().version;no.utils=zr();no.rand=_f();no.curve=ep();no.curves=Zu();no.ec=M3();no.eddsa=q3()});var P6=X(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.isBrowserCryptoAvailable=as.getSubtleCrypto=as.getBrowerCrypto=void 0;function Op(){return globalThis?.crypto||globalThis?.msCrypto||{}}as.getBrowerCrypto=Op;function N6(){let t=Op();return t.subtle||t.webkitSubtle}as.getSubtleCrypto=N6;function hR(){return!!Op()&&!!N6()}as.isBrowserCryptoAvailable=hR});var C6=X(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.isBrowser=fs.isNode=fs.isReactNative=void 0;function T6(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}fs.isReactNative=T6;function D6(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}fs.isNode=D6;function dR(){return!T6()&&!D6()}fs.isBrowser=dR});var Rp=X(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var L6=(Ro(),Ka(Oo));L6.__exportStar(P6(),mh);L6.__exportStar(C6(),mh)});var j6=X((AG,k6)=>{"use strict";k6.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var A5=X((qf,ba)=>{var SR=200,$p="__lodash_hash_undefined__",Th=1,i5=2,n5=9007199254740991,Ih="[object Arguments]",Fp="[object Array]",IR="[object AsyncFunction]",s5="[object Boolean]",o5="[object Date]",a5="[object Error]",f5="[object Function]",AR="[object GeneratorFunction]",Ah="[object Map]",c5="[object Number]",MR="[object Null]",pa="[object Object]",H6="[object Promise]",OR="[object Proxy]",u5="[object RegExp]",Mh="[object Set]",h5="[object String]",RR="[object Symbol]",NR="[object Undefined]",Bp="[object WeakMap]",d5="[object ArrayBuffer]",Oh="[object DataView]",PR="[object Float32Array]",TR="[object Float64Array]",DR="[object Int8Array]",CR="[object Int16Array]",LR="[object Int32Array]",FR="[object Uint8Array]",BR="[object Uint8ClampedArray]",UR="[object Uint16Array]",qR="[object Uint32Array]",zR=/[\\^$.*+?()[\]{}|]/g,kR=/^\[object .+?Constructor\]$/,jR=/^(?:0|[1-9]\d*)$/,rt={};rt[PR]=rt[TR]=rt[DR]=rt[CR]=rt[LR]=rt[FR]=rt[BR]=rt[UR]=rt[qR]=!0;rt[Ih]=rt[Fp]=rt[d5]=rt[s5]=rt[Oh]=rt[o5]=rt[a5]=rt[f5]=rt[Ah]=rt[c5]=rt[pa]=rt[u5]=rt[Mh]=rt[h5]=rt[Bp]=!1;var l5=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,$R=typeof self=="object"&&self&&self.Object===Object&&self,Pn=l5||$R||Function("return this")(),p5=typeof qf=="object"&&qf&&!qf.nodeType&&qf,G6=p5&&typeof ba=="object"&&ba&&!ba.nodeType&&ba,b5=G6&&G6.exports===p5,Dp=b5&&l5.process,J6=function(){try{return Dp&&Dp.binding&&Dp.binding("util")}catch{}}(),W6=J6&&J6.isTypedArray;function KR(t,e){for(var r=-1,i=t==null?0:t.length,n=0,s=[];++r<i;){var o=t[r];e(o,r,t)&&(s[n++]=o)}return s}function VR(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function HR(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}function GR(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function JR(t){return function(e){return t(e)}}function WR(t,e){return t.has(e)}function YR(t,e){return t?.[e]}function XR(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}function ZR(t,e){return function(r){return t(e(r))}}function QR(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var eN=Array.prototype,tN=Function.prototype,Dh=Object.prototype,Cp=Pn["__core-js_shared__"],g5=tN.toString,en=Dh.hasOwnProperty,Y6=function(){var t=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),v5=Dh.toString,rN=RegExp("^"+g5.call(en).replace(zR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X6=b5?Pn.Buffer:void 0,Rh=Pn.Symbol,Z6=Pn.Uint8Array,m5=Dh.propertyIsEnumerable,iN=eN.splice,ao=Rh?Rh.toStringTag:void 0,Q6=Object.getOwnPropertySymbols,nN=X6?X6.isBuffer:void 0,sN=ZR(Object.keys,Object),Up=ga(Pn,"DataView"),zf=ga(Pn,"Map"),qp=ga(Pn,"Promise"),zp=ga(Pn,"Set"),kp=ga(Pn,"WeakMap"),kf=ga(Object,"create"),oN=uo(Up),aN=uo(zf),fN=uo(qp),cN=uo(zp),uN=uo(kp),e5=Rh?Rh.prototype:void 0,Lp=e5?e5.valueOf:void 0;function fo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function hN(){this.__data__=kf?kf(null):{},this.size=0}function dN(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function lN(t){var e=this.__data__;if(kf){var r=e[t];return r===$p?void 0:r}return en.call(e,t)?e[t]:void 0}function pN(t){var e=this.__data__;return kf?e[t]!==void 0:en.call(e,t)}function bN(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=kf&&e===void 0?$p:e,this}fo.prototype.clear=hN;fo.prototype.delete=dN;fo.prototype.get=lN;fo.prototype.has=pN;fo.prototype.set=bN;function Tn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function gN(){this.__data__=[],this.size=0}function vN(t){var e=this.__data__,r=Ch(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():iN.call(e,r,1),--this.size,!0}function mN(t){var e=this.__data__,r=Ch(e,t);return r<0?void 0:e[r][1]}function yN(t){return Ch(this.__data__,t)>-1}function wN(t,e){var r=this.__data__,i=Ch(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}Tn.prototype.clear=gN;Tn.prototype.delete=vN;Tn.prototype.get=mN;Tn.prototype.has=yN;Tn.prototype.set=wN;function co(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function xN(){this.size=0,this.__data__={hash:new fo,map:new(zf||Tn),string:new fo}}function EN(t){var e=Lh(this,t).delete(t);return this.size-=e?1:0,e}function _N(t){return Lh(this,t).get(t)}function SN(t){return Lh(this,t).has(t)}function IN(t,e){var r=Lh(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}co.prototype.clear=xN;co.prototype.delete=EN;co.prototype.get=_N;co.prototype.has=SN;co.prototype.set=IN;function Nh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new co;++e<r;)this.add(t[e])}function AN(t){return this.__data__.set(t,$p),this}function MN(t){return this.__data__.has(t)}Nh.prototype.add=Nh.prototype.push=AN;Nh.prototype.has=MN;function ds(t){var e=this.__data__=new Tn(t);this.size=e.size}function ON(){this.__data__=new Tn,this.size=0}function RN(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function NN(t){return this.__data__.get(t)}function PN(t){return this.__data__.has(t)}function TN(t,e){var r=this.__data__;if(r instanceof Tn){var i=r.__data__;if(!zf||i.length<SR-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new co(i)}return r.set(t,e),this.size=r.size,this}ds.prototype.clear=ON;ds.prototype.delete=RN;ds.prototype.get=NN;ds.prototype.has=PN;ds.prototype.set=TN;function DN(t,e){var r=Ph(t),i=!r&&JN(t),n=!r&&!i&&jp(t),s=!r&&!i&&!n&&I5(t),o=r||i||n||s,a=o?GR(t.length,String):[],h=a.length;for(var d in t)(e||en.call(t,d))&&!(o&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||$N(d,h)))&&a.push(d);return a}function Ch(t,e){for(var r=t.length;r--;)if(x5(t[r][0],e))return r;return-1}function CN(t,e,r){var i=e(t);return Ph(t)?i:VR(i,r(t))}function $f(t){return t==null?t===void 0?NR:MR:ao&&ao in Object(t)?kN(t):GN(t)}function t5(t){return jf(t)&&$f(t)==Ih}function y5(t,e,r,i,n){return t===e?!0:t==null||e==null||!jf(t)&&!jf(e)?t!==t&&e!==e:LN(t,e,r,i,y5,n)}function LN(t,e,r,i,n,s){var o=Ph(t),a=Ph(e),h=o?Fp:hs(t),d=a?Fp:hs(e);h=h==Ih?pa:h,d=d==Ih?pa:d;var g=h==pa,y=d==pa,_=h==d;if(_&&jp(t)){if(!jp(e))return!1;o=!0,g=!1}if(_&&!g)return s||(s=new ds),o||I5(t)?w5(t,e,r,i,n,s):qN(t,e,h,r,i,n,s);if(!(r&Th)){var S=g&&en.call(t,"__wrapped__"),I=y&&en.call(e,"__wrapped__");if(S||I){var O=S?t.value():t,P=I?e.value():e;return s||(s=new ds),n(O,P,r,i,s)}}return _?(s||(s=new ds),zN(t,e,r,i,n,s)):!1}function FN(t){if(!S5(t)||VN(t))return!1;var e=E5(t)?rN:kR;return e.test(uo(t))}function BN(t){return jf(t)&&_5(t.length)&&!!rt[$f(t)]}function UN(t){if(!HN(t))return sN(t);var e=[];for(var r in Object(t))en.call(t,r)&&r!="constructor"&&e.push(r);return e}function w5(t,e,r,i,n,s){var o=r&Th,a=t.length,h=e.length;if(a!=h&&!(o&&h>a))return!1;var d=s.get(t);if(d&&s.get(e))return d==e;var g=-1,y=!0,_=r&i5?new Nh:void 0;for(s.set(t,e),s.set(e,t);++g<a;){var S=t[g],I=e[g];if(i)var O=o?i(I,S,g,e,t,s):i(S,I,g,t,e,s);if(O!==void 0){if(O)continue;y=!1;break}if(_){if(!HR(e,function(P,T){if(!WR(_,T)&&(S===P||n(S,P,r,i,s)))return _.push(T)})){y=!1;break}}else if(!(S===I||n(S,I,r,i,s))){y=!1;break}}return s.delete(t),s.delete(e),y}function qN(t,e,r,i,n,s,o){switch(r){case Oh:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case d5:return!(t.byteLength!=e.byteLength||!s(new Z6(t),new Z6(e)));case s5:case o5:case c5:return x5(+t,+e);case a5:return t.name==e.name&&t.message==e.message;case u5:case h5:return t==e+"";case Ah:var a=XR;case Mh:var h=i&Th;if(a||(a=QR),t.size!=e.size&&!h)return!1;var d=o.get(t);if(d)return d==e;i|=i5,o.set(t,e);var g=w5(a(t),a(e),i,n,s,o);return o.delete(t),g;case RR:if(Lp)return Lp.call(t)==Lp.call(e)}return!1}function zN(t,e,r,i,n,s){var o=r&Th,a=r5(t),h=a.length,d=r5(e),g=d.length;if(h!=g&&!o)return!1;for(var y=h;y--;){var _=a[y];if(!(o?_ in e:en.call(e,_)))return!1}var S=s.get(t);if(S&&s.get(e))return S==e;var I=!0;s.set(t,e),s.set(e,t);for(var O=o;++y<h;){_=a[y];var P=t[_],T=e[_];if(i)var U=o?i(T,P,_,e,t,s):i(P,T,_,t,e,s);if(!(U===void 0?P===T||n(P,T,r,i,s):U)){I=!1;break}O||(O=_=="constructor")}if(I&&!O){var D=t.constructor,F=e.constructor;D!=F&&"constructor"in t&&"constructor"in e&&!(typeof D=="function"&&D instanceof D&&typeof F=="function"&&F instanceof F)&&(I=!1)}return s.delete(t),s.delete(e),I}function r5(t){return CN(t,XN,jN)}function Lh(t,e){var r=t.__data__;return KN(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ga(t,e){var r=YR(t,e);return FN(r)?r:void 0}function kN(t){var e=en.call(t,ao),r=t[ao];try{t[ao]=void 0;var i=!0}catch{}var n=v5.call(t);return i&&(e?t[ao]=r:delete t[ao]),n}var jN=Q6?function(t){return t==null?[]:(t=Object(t),KR(Q6(t),function(e){return m5.call(t,e)}))}:ZN,hs=$f;(Up&&hs(new Up(new ArrayBuffer(1)))!=Oh||zf&&hs(new zf)!=Ah||qp&&hs(qp.resolve())!=H6||zp&&hs(new zp)!=Mh||kp&&hs(new kp)!=Bp)&&(hs=function(t){var e=$f(t),r=e==pa?t.constructor:void 0,i=r?uo(r):"";if(i)switch(i){case oN:return Oh;case aN:return Ah;case fN:return H6;case cN:return Mh;case uN:return Bp}return e});function $N(t,e){return e=e??n5,!!e&&(typeof t=="number"||jR.test(t))&&t>-1&&t%1==0&&t<e}function KN(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function VN(t){return!!Y6&&Y6 in t}function HN(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Dh;return t===r}function GN(t){return v5.call(t)}function uo(t){if(t!=null){try{return g5.call(t)}catch{}try{return t+""}catch{}}return""}function x5(t,e){return t===e||t!==t&&e!==e}var JN=t5(function(){return arguments}())?t5:function(t){return jf(t)&&en.call(t,"callee")&&!m5.call(t,"callee")},Ph=Array.isArray;function WN(t){return t!=null&&_5(t.length)&&!E5(t)}var jp=nN||QN;function YN(t,e){return y5(t,e)}function E5(t){if(!S5(t))return!1;var e=$f(t);return e==f5||e==AR||e==IR||e==OR}function _5(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n5}function S5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function jf(t){return t!=null&&typeof t=="object"}var I5=W6?JR(W6):BN;function XN(t){return WN(t)?DN(t):UN(t)}function ZN(){return[]}function QN(){return!1}ba.exports=YN});var y1=X((jG,l4)=>{"use strict";var u4=Kc();l4.exports=on;var Jf=ID().console||{},gD={mapHttpRequest:Bh,mapHttpResponse:Bh,wrapRequestSerializer:v1,wrapResponseSerializer:v1,wrapErrorSerializer:v1,req:Bh,res:Bh,err:xD};function vD(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function on(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||Jf;t.browser.write&&(t.browser.asObject=!0);let i=t.serializers||{},n=vD(t.browser.serialize,i),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let a=t.level||"info",h=Object.create(r);h.log||(h.log=Wf),Object.defineProperty(h,"levelVal",{get:g}),Object.defineProperty(h,"level",{get:y,set:_});let d={transmit:e,serialize:n,asObject:t.browser.asObject,levels:o,timestamp:ED(t)};h.levels=on.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=Wf,h.serializers=i,h._serialize=n,h._stdErrSerialize=s,h.child=S,e&&(h._logEvent=m1());function g(){return this.level==="silent"?1/0:this.levels.values[this.level]}function y(){return this._level}function _(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,ya(d,h,"error","log"),ya(d,h,"fatal","error"),ya(d,h,"warn","error"),ya(d,h,"info","log"),ya(d,h,"debug","log"),ya(d,h,"trace","log")}function S(I,O){if(!I)throw new Error("missing bindings for child Pino");O=O||{},n&&I.serializers&&(O.serializers=I.serializers);let P=O.serializers;if(n&&P){var T=Object.assign({},i,P),U=t.browser.serialize===!0?Object.keys(T):n;delete I.serializers,Uh([I],U,T,this._stdErrSerialize)}function D(F){this._childLevel=(F._childLevel|0)+1,this.error=wa(F,I,"error"),this.fatal=wa(F,I,"fatal"),this.warn=wa(F,I,"warn"),this.info=wa(F,I,"info"),this.debug=wa(F,I,"debug"),this.trace=wa(F,I,"trace"),T&&(this.serializers=T,this._serialize=U),e&&(this._logEvent=m1([].concat(F._logEvent.bindings,I)))}return D.prototype=this,new D(this)}return h}on.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};on.stdSerializers=gD;on.stdTimeFunctions=Object.assign({},{nullTime:h4,epochTime:d4,unixTime:_D,isoTime:SD});function ya(t,e,r,i){let n=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Wf:n[r]?n[r]:Jf[r]||Jf[i]||Wf,mD(t,e,r)}function mD(t,e,r){!t.transmit&&e[r]===Wf||(e[r]=function(i){return function(){let s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Jf?Jf:this;for(var h=0;h<o.length;h++)o[h]=arguments[h];if(t.serialize&&!t.asObject&&Uh(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(a,yD(this,r,o,s)):i.apply(a,o),t.transmit){let d=t.transmit.level||e.level,g=on.levels.values[d],y=on.levels.values[r];if(y<g)return;wD(this,{ts:s,methodLevel:r,methodValue:y,transmitLevel:d,transmitValue:on.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function yD(t,e,r,i){t._serialize&&Uh(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),s=n[0],o={};i&&(o.time=i),o.level=on.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof n[0]=="object";)Object.assign(o,n.shift());s=n.length?u4(n.shift(),n):void 0}else typeof s=="string"&&(s=u4(n.shift(),n));return s!==void 0&&(o.msg=s),o}function Uh(t,e,r,i){for(let n in t)if(i&&t[n]instanceof Error)t[n]=on.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let s in t[n])e&&e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function wa(t,e,r){return function(){let i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return t[r].apply(this,i)}}function wD(t,e,r){let i=e.send,n=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,h=t._logEvent.bindings;Uh(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(d){return h.indexOf(d)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,i(s,t._logEvent,a),t._logEvent=m1(h)}function m1(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function xD(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function ED(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?h4:d4}function Bh(){return{}}function v1(t){return t}function Wf(){}function h4(){return!1}function d4(){return Date.now()}function _D(){return Math.round(Date.now()/1e3)}function SD(){return new Date(Date.now()).toISOString()}function ID(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var Q1=X((OJ,aw)=>{var bF="Input must be an string, Buffer or Uint8Array";function gF(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(bF);return e}function vF(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Hh(t){return(4294967296+t).toString(16).substring(1)}function mF(t,e,r){let i=`
`+t+" = ";for(let n=0;n<e.length;n+=2){if(r===32)i+=Hh(e[n]).toUpperCase(),i+=" ",i+=Hh(e[n+1]).toUpperCase();else if(r===64)i+=Hh(e[n+1]).toUpperCase(),i+=Hh(e[n]).toUpperCase();else throw new Error("Invalid size "+r);n%6===4?i+=`
`+new Array(t.length+4).join(" "):n<e.length-2&&(i+=" ")}console.log(i)}function yF(t,e,r){let i=new Date().getTime(),n=new Uint8Array(e);for(let o=0;o<e;o++)n[o]=o%256;let s=new Date().getTime();console.log("Generated random input in "+(s-i)+"ms"),i=s;for(let o=0;o<r;o++){let a=t(n),h=new Date().getTime(),d=h-i;i=h,console.log("Hashed in "+d+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(d/1e3)*100)/100+" MB PER SECOND")}}aw.exports={normalizeInput:gF,toHex:vF,debugPrint:mF,testSpeed:yF}});var gw=X((RJ,bw)=>{var Jh=Q1();function Gh(t,e,r){let i=t[e]+t[r],n=t[e+1]+t[r+1];i>=4294967296&&n++,t[e]=i,t[e+1]=n}function fw(t,e,r,i){let n=t[e]+r;r<0&&(n+=4294967296);let s=t[e+1]+i;n>=4294967296&&s++,t[e]=n,t[e+1]=s}function cw(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function vs(t,e,r,i,n,s){let o=Qf[n],a=Qf[n+1],h=Qf[s],d=Qf[s+1];Gh(Fe,t,e),fw(Fe,t,o,a);let g=Fe[i]^Fe[t],y=Fe[i+1]^Fe[t+1];Fe[i]=y,Fe[i+1]=g,Gh(Fe,r,i),g=Fe[e]^Fe[r],y=Fe[e+1]^Fe[r+1],Fe[e]=g>>>24^y<<8,Fe[e+1]=y>>>24^g<<8,Gh(Fe,t,e),fw(Fe,t,h,d),g=Fe[i]^Fe[t],y=Fe[i+1]^Fe[t+1],Fe[i]=g>>>16^y<<16,Fe[i+1]=y>>>16^g<<16,Gh(Fe,r,i),g=Fe[e]^Fe[r],y=Fe[e+1]^Fe[r+1],Fe[e]=y>>>31^g<<1,Fe[e+1]=g>>>31^y<<1}var uw=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),wF=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],tr=new Uint8Array(wF.map(function(t){return t*2})),Fe=new Uint32Array(32),Qf=new Uint32Array(32);function hw(t,e){let r=0;for(r=0;r<16;r++)Fe[r]=t.h[r],Fe[r+16]=uw[r];for(Fe[24]=Fe[24]^t.t,Fe[25]=Fe[25]^t.t/4294967296,e&&(Fe[28]=~Fe[28],Fe[29]=~Fe[29]),r=0;r<32;r++)Qf[r]=cw(t.b,4*r);for(r=0;r<12;r++)vs(0,8,16,24,tr[r*16+0],tr[r*16+1]),vs(2,10,18,26,tr[r*16+2],tr[r*16+3]),vs(4,12,20,28,tr[r*16+4],tr[r*16+5]),vs(6,14,22,30,tr[r*16+6],tr[r*16+7]),vs(0,10,20,30,tr[r*16+8],tr[r*16+9]),vs(2,12,22,24,tr[r*16+10],tr[r*16+11]),vs(4,14,16,26,tr[r*16+12],tr[r*16+13]),vs(6,8,18,28,tr[r*16+14],tr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^Fe[r]^Fe[r+16]}var ms=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function dw(t,e,r,i){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(i&&i.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");let n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ms.fill(0),ms[0]=t,e&&(ms[1]=e.length),ms[2]=1,ms[3]=1,r&&ms.set(r,32),i&&ms.set(i,48);for(let s=0;s<16;s++)n.h[s]=uw[s]^cw(ms,s*4);return e&&(eb(n,e),n.c=128),n}function eb(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,hw(t,!1),t.c=0),t.b[t.c++]=e[r]}function lw(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;hw(t,!0);let e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function pw(t,e,r,i,n){r=r||64,t=Jh.normalizeInput(t),i&&(i=Jh.normalizeInput(i)),n&&(n=Jh.normalizeInput(n));let s=dw(r,e,i,n);return eb(s,t),lw(s)}function xF(t,e,r,i,n){let s=pw(t,e,r,i,n);return Jh.toHex(s)}bw.exports={blake2b:pw,blake2bHex:xF,blake2bInit:dw,blake2bUpdate:eb,blake2bFinal:lw}});var Sw=X((NJ,_w)=>{var vw=Q1();function EF(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ys(t,e,r,i,n,s){$e[t]=$e[t]+$e[e]+n,$e[i]=Wh($e[i]^$e[t],16),$e[r]=$e[r]+$e[i],$e[e]=Wh($e[e]^$e[r],12),$e[t]=$e[t]+$e[e]+s,$e[i]=Wh($e[i]^$e[t],8),$e[r]=$e[r]+$e[i],$e[e]=Wh($e[e]^$e[r],7)}function Wh(t,e){return t>>>e^t<<32-e}var mw=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),$e=new Uint32Array(16),Bt=new Uint32Array(16);function yw(t,e){let r=0;for(r=0;r<8;r++)$e[r]=t.h[r],$e[r+8]=mw[r];for($e[12]^=t.t,$e[13]^=t.t/4294967296,e&&($e[14]=~$e[14]),r=0;r<16;r++)Bt[r]=EF(t.b,4*r);for(r=0;r<10;r++)ys(0,4,8,12,Bt[rr[r*16+0]],Bt[rr[r*16+1]]),ys(1,5,9,13,Bt[rr[r*16+2]],Bt[rr[r*16+3]]),ys(2,6,10,14,Bt[rr[r*16+4]],Bt[rr[r*16+5]]),ys(3,7,11,15,Bt[rr[r*16+6]],Bt[rr[r*16+7]]),ys(0,5,10,15,Bt[rr[r*16+8]],Bt[rr[r*16+9]]),ys(1,6,11,12,Bt[rr[r*16+10]],Bt[rr[r*16+11]]),ys(2,7,8,13,Bt[rr[r*16+12]],Bt[rr[r*16+13]]),ys(3,4,9,14,Bt[rr[r*16+14]],Bt[rr[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=$e[r]^$e[r+8]}function ww(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");let r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");let i={h:new Uint32Array(mw),b:new Uint8Array(64),c:0,t:0,outlen:t};return i.h[0]^=16842752^r<<8^t,r>0&&(tb(i,e),i.c=64),i}function tb(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,yw(t,!1),t.c=0),t.b[t.c++]=e[r]}function xw(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;yw(t,!0);let e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function Ew(t,e,r){r=r||32,t=vw.normalizeInput(t);let i=ww(r,e);return tb(i,t),xw(i)}function _F(t,e,r){let i=Ew(t,e,r);return vw.toHex(i)}_w.exports={blake2s:Ew,blake2sHex:_F,blake2sInit:ww,blake2sUpdate:tb,blake2sFinal:xw}});var Aw=X((PJ,Iw)=>{var ec=gw(),tc=Sw();Iw.exports={blake2b:ec.blake2b,blake2bHex:ec.blake2bHex,blake2bInit:ec.blake2bInit,blake2bUpdate:ec.blake2bUpdate,blake2bFinal:ec.blake2bFinal,blake2s:tc.blake2s,blake2sHex:tc.blake2sHex,blake2sInit:tc.blake2sInit,blake2sUpdate:tc.blake2sUpdate,blake2sFinal:tc.blake2sFinal}});var Kb=X((dW,G8)=>{G8.exports=function(t,e){return e=e||{},new Promise(function(r,i){var n=new XMLHttpRequest,s=[],o=[],a={},h=function(){return{ok:(n.status/100|0)==2,statusText:n.statusText,status:n.status,url:n.responseURL,text:function(){return Promise.resolve(n.responseText)},json:function(){return Promise.resolve(n.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([n.response]))},clone:h,headers:{keys:function(){return s},entries:function(){return o},get:function(g){return a[g.toLowerCase()]},has:function(g){return g.toLowerCase()in a}}}};for(var d in n.open(e.method||"get",t,!0),n.onload=function(){n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(g,y,_){s.push(y=y.toLowerCase()),o.push([y,_]),a[y]=a[y]?a[y]+","+_:_}),r(h())},n.onerror=i,n.withCredentials=e.credentials=="include",e.headers)n.setRequestHeader(d,e.headers[d]);n.send(e.body||null)})}});var W8=X((lW,J8)=>{J8.exports=self.fetch||(self.fetch=Kb().default||Kb())});var cg=X((xW,O9)=>{"use strict";var I9=Kc();O9.exports=cn;var bc=Rz().console||{},wz={mapHttpRequest:bd,mapHttpResponse:bd,wrapRequestSerializer:ag,wrapResponseSerializer:ag,wrapErrorSerializer:ag,req:bd,res:bd,err:Iz};function xz(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function cn(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||bc;t.browser.write&&(t.browser.asObject=!0);let i=t.serializers||{},n=xz(t.browser.serialize,i),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");let a=t.level||"info",h=Object.create(r);h.log||(h.log=gc),Object.defineProperty(h,"levelVal",{get:g}),Object.defineProperty(h,"level",{get:y,set:_});let d={transmit:e,serialize:n,asObject:t.browser.asObject,levels:o,timestamp:Az(t)};h.levels=cn.levels,h.level=a,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=gc,h.serializers=i,h._serialize=n,h._stdErrSerialize=s,h.child=S,e&&(h._logEvent=fg());function g(){return this.level==="silent"?1/0:this.levels.values[this.level]}function y(){return this._level}function _(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,Ta(d,h,"error","log"),Ta(d,h,"fatal","error"),Ta(d,h,"warn","error"),Ta(d,h,"info","log"),Ta(d,h,"debug","log"),Ta(d,h,"trace","log")}function S(I,O){if(!I)throw new Error("missing bindings for child Pino");O=O||{},n&&I.serializers&&(O.serializers=I.serializers);let P=O.serializers;if(n&&P){var T=Object.assign({},i,P),U=t.browser.serialize===!0?Object.keys(T):n;delete I.serializers,gd([I],U,T,this._stdErrSerialize)}function D(F){this._childLevel=(F._childLevel|0)+1,this.error=Da(F,I,"error"),this.fatal=Da(F,I,"fatal"),this.warn=Da(F,I,"warn"),this.info=Da(F,I,"info"),this.debug=Da(F,I,"debug"),this.trace=Da(F,I,"trace"),T&&(this.serializers=T,this._serialize=U),e&&(this._logEvent=fg([].concat(F._logEvent.bindings,I)))}return D.prototype=this,new D(this)}return h}cn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};cn.stdSerializers=wz;cn.stdTimeFunctions=Object.assign({},{nullTime:A9,epochTime:M9,unixTime:Mz,isoTime:Oz});function Ta(t,e,r,i){let n=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?gc:n[r]?n[r]:bc[r]||bc[i]||gc,Ez(t,e,r)}function Ez(t,e,r){!t.transmit&&e[r]===gc||(e[r]=function(i){return function(){let s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===bc?bc:this;for(var h=0;h<o.length;h++)o[h]=arguments[h];if(t.serialize&&!t.asObject&&gd(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(a,_z(this,r,o,s)):i.apply(a,o),t.transmit){let d=t.transmit.level||e.level,g=cn.levels.values[d],y=cn.levels.values[r];if(y<g)return;Sz(this,{ts:s,methodLevel:r,methodValue:y,transmitLevel:d,transmitValue:cn.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function _z(t,e,r,i){t._serialize&&gd(r,t._serialize,t.serializers,t._stdErrSerialize);let n=r.slice(),s=n[0],o={};i&&(o.time=i),o.level=cn.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof n[0]=="object";)Object.assign(o,n.shift());s=n.length?I9(n.shift(),n):void 0}else typeof s=="string"&&(s=I9(n.shift(),n));return s!==void 0&&(o.msg=s),o}function gd(t,e,r,i){for(let n in t)if(i&&t[n]instanceof Error)t[n]=cn.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(let s in t[n])e&&e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function Da(t,e,r){return function(){let i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return t[r].apply(this,i)}}function Sz(t,e,r){let i=e.send,n=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,h=t._logEvent.bindings;gd(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(d){return h.indexOf(d)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,i(s,t._logEvent,a),t._logEvent=fg(h)}function fg(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Iz(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function Az(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?A9:M9}function bd(){return{}}function ag(t){return t}function gc(){}function A9(){return!1}function M9(){return Date.now()}function Mz(){return Math.round(Date.now()/1e3)}function Oz(){return new Date(Date.now()).toISOString()}function Rz(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}});var j9=X((dY,$z)=>{$z.exports={name:"elliptic",version:"6.5.7",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var un=X(($9,lg)=>{(function(t,e){"use strict";function r(M,u){if(!M)throw new Error(u||"Assertion failed")}function i(M,u){M.super_=u;var b=function(){};b.prototype=u.prototype,M.prototype=new b,M.prototype.constructor=M}function n(M,u,b){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((u==="le"||u==="be")&&(b=u,u=10),this._init(M||0,u||10,b||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=Su().Buffer}catch{}n.isBN=function(u){return u instanceof n?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===n.wordSize&&Array.isArray(u.words)},n.max=function(u,b){return u.cmp(b)>0?u:b},n.min=function(u,b){return u.cmp(b)<0?u:b},n.prototype._init=function(u,b,p){if(typeof u=="number")return this._initNumber(u,b,p);if(typeof u=="object")return this._initArray(u,b,p);b==="hex"&&(b=16),r(b===(b|0)&&b>=2&&b<=36),u=u.toString().replace(/\s+/g,"");var f=0;u[0]==="-"&&(f++,this.negative=1),f<u.length&&(b===16?this._parseHex(u,f,p):(this._parseBase(u,b,f),p==="le"&&this._initArray(this.toArray(),b,p)))},n.prototype._initNumber=function(u,b,p){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(r(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),b,p)},n.prototype._initArray=function(u,b,p){if(r(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var l,m,x=0;if(p==="be")for(f=u.length-1,l=0;f>=0;f-=3)m=u[f]|u[f-1]<<8|u[f-2]<<16,this.words[l]|=m<<x&67108863,this.words[l+1]=m>>>26-x&67108863,x+=24,x>=26&&(x-=26,l++);else if(p==="le")for(f=0,l=0;f<u.length;f+=3)m=u[f]|u[f+1]<<8|u[f+2]<<16,this.words[l]|=m<<x&67108863,this.words[l+1]=m>>>26-x&67108863,x+=24,x>=26&&(x-=26,l++);return this.strip()};function o(M,u){var b=M.charCodeAt(u);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function a(M,u,b){var p=o(M,b);return b-1>=u&&(p|=o(M,b-1)<<4),p}n.prototype._parseHex=function(u,b,p){this.length=Math.ceil((u.length-b)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var l=0,m=0,x;if(p==="be")for(f=u.length-1;f>=b;f-=2)x=a(u,b,f)<<l,this.words[m]|=x&67108863,l>=18?(l-=18,m+=1,this.words[m]|=x>>>26):l+=8;else{var v=u.length-b;for(f=v%2===0?b+1:b;f<u.length;f+=2)x=a(u,b,f)<<l,this.words[m]|=x&67108863,l>=18?(l-=18,m+=1,this.words[m]|=x>>>26):l+=8}this.strip()};function h(M,u,b,p){for(var f=0,l=Math.min(M.length,b),m=u;m<l;m++){var x=M.charCodeAt(m)-48;f*=p,x>=49?f+=x-49+10:x>=17?f+=x-17+10:f+=x}return f}n.prototype._parseBase=function(u,b,p){this.words=[0],this.length=1;for(var f=0,l=1;l<=67108863;l*=b)f++;f--,l=l/b|0;for(var m=u.length-p,x=m%f,v=Math.min(m,m-x)+p,c=0,w=p;w<v;w+=f)c=h(u,w,w+f,b),this.imuln(l),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(x!==0){var R=1;for(c=h(u,w,u.length,b),w=0;w<x;w++)R*=b;this.imuln(R),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},n.prototype.copy=function(u){u.words=new Array(this.length);for(var b=0;b<this.length;b++)u.words[b]=this.words[b];u.length=this.length,u.negative=this.negative,u.red=this.red},n.prototype.clone=function(){var u=new n(null);return this.copy(u),u},n.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(u,b){u=u||10,b=b|0||1;var p;if(u===16||u==="hex"){p="";for(var f=0,l=0,m=0;m<this.length;m++){var x=this.words[m],v=((x<<f|l)&16777215).toString(16);l=x>>>24-f&16777215,f+=2,f>=26&&(f-=26,m--),l!==0||m!==this.length-1?p=d[6-v.length]+v+p:p=v+p}for(l!==0&&(p=l.toString(16)+p);p.length%b!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(u===(u|0)&&u>=2&&u<=36){var c=g[u],w=y[u];p="";var R=this.clone();for(R.negative=0;!R.isZero();){var E=R.modn(w).toString(u);R=R.idivn(w),R.isZero()?p=E+p:p=d[c-E.length]+E+p}for(this.isZero()&&(p="0"+p);p.length%b!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(u,b){return r(typeof s<"u"),this.toArrayLike(s,u,b)},n.prototype.toArray=function(u,b){return this.toArrayLike(Array,u,b)},n.prototype.toArrayLike=function(u,b,p){var f=this.byteLength(),l=p||Math.max(1,f);r(f<=l,"byte array longer than desired length"),r(l>0,"Requested array length <= 0"),this.strip();var m=b==="le",x=new u(l),v,c,w=this.clone();if(m){for(c=0;!w.isZero();c++)v=w.andln(255),w.iushrn(8),x[c]=v;for(;c<l;c++)x[c]=0}else{for(c=0;c<l-f;c++)x[c]=0;for(c=0;!w.isZero();c++)v=w.andln(255),w.iushrn(8),x[l-c-1]=v}return x},Math.clz32?n.prototype._countBits=function(u){return 32-Math.clz32(u)}:n.prototype._countBits=function(u){var b=u,p=0;return b>=4096&&(p+=13,b>>>=13),b>=64&&(p+=7,b>>>=7),b>=8&&(p+=4,b>>>=4),b>=2&&(p+=2,b>>>=2),p+b},n.prototype._zeroBits=function(u){if(u===0)return 26;var b=u,p=0;return b&8191||(p+=13,b>>>=13),b&127||(p+=7,b>>>=7),b&15||(p+=4,b>>>=4),b&3||(p+=2,b>>>=2),b&1||p++,p},n.prototype.bitLength=function(){var u=this.words[this.length-1],b=this._countBits(u);return(this.length-1)*26+b};function _(M){for(var u=new Array(M.bitLength()),b=0;b<u.length;b++){var p=b/26|0,f=b%26;u[b]=(M.words[p]&1<<f)>>>f}return u}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,b=0;b<this.length;b++){var p=this._zeroBits(this.words[b]);if(u+=p,p!==26)break}return u},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},n.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var b=0;b<u.length;b++)this.words[b]=this.words[b]|u.words[b];return this.strip()},n.prototype.ior=function(u){return r((this.negative|u.negative)===0),this.iuor(u)},n.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},n.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},n.prototype.iuand=function(u){var b;this.length>u.length?b=u:b=this;for(var p=0;p<b.length;p++)this.words[p]=this.words[p]&u.words[p];return this.length=b.length,this.strip()},n.prototype.iand=function(u){return r((this.negative|u.negative)===0),this.iuand(u)},n.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},n.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},n.prototype.iuxor=function(u){var b,p;this.length>u.length?(b=this,p=u):(b=u,p=this);for(var f=0;f<p.length;f++)this.words[f]=b.words[f]^p.words[f];if(this!==b)for(;f<b.length;f++)this.words[f]=b.words[f];return this.length=b.length,this.strip()},n.prototype.ixor=function(u){return r((this.negative|u.negative)===0),this.iuxor(u)},n.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},n.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},n.prototype.inotn=function(u){r(typeof u=="number"&&u>=0);var b=Math.ceil(u/26)|0,p=u%26;this._expand(b),p>0&&b--;for(var f=0;f<b;f++)this.words[f]=~this.words[f]&67108863;return p>0&&(this.words[f]=~this.words[f]&67108863>>26-p),this.strip()},n.prototype.notn=function(u){return this.clone().inotn(u)},n.prototype.setn=function(u,b){r(typeof u=="number"&&u>=0);var p=u/26|0,f=u%26;return this._expand(p+1),b?this.words[p]=this.words[p]|1<<f:this.words[p]=this.words[p]&~(1<<f),this.strip()},n.prototype.iadd=function(u){var b;if(this.negative!==0&&u.negative===0)return this.negative=0,b=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,b=this.isub(u),u.negative=1,b._normSign();var p,f;this.length>u.length?(p=this,f=u):(p=u,f=this);for(var l=0,m=0;m<f.length;m++)b=(p.words[m]|0)+(f.words[m]|0)+l,this.words[m]=b&67108863,l=b>>>26;for(;l!==0&&m<p.length;m++)b=(p.words[m]|0)+l,this.words[m]=b&67108863,l=b>>>26;if(this.length=p.length,l!==0)this.words[this.length]=l,this.length++;else if(p!==this)for(;m<p.length;m++)this.words[m]=p.words[m];return this},n.prototype.add=function(u){var b;return u.negative!==0&&this.negative===0?(u.negative=0,b=this.sub(u),u.negative^=1,b):u.negative===0&&this.negative!==0?(this.negative=0,b=u.sub(this),this.negative=1,b):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},n.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var b=this.iadd(u);return u.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var p=this.cmp(u);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,l;p>0?(f=this,l=u):(f=u,l=this);for(var m=0,x=0;x<l.length;x++)b=(f.words[x]|0)-(l.words[x]|0)+m,m=b>>26,this.words[x]=b&67108863;for(;m!==0&&x<f.length;x++)b=(f.words[x]|0)+m,m=b>>26,this.words[x]=b&67108863;if(m===0&&x<f.length&&f!==this)for(;x<f.length;x++)this.words[x]=f.words[x];return this.length=Math.max(this.length,x),f!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(u){return this.clone().isub(u)};function S(M,u,b){b.negative=u.negative^M.negative;var p=M.length+u.length|0;b.length=p,p=p-1|0;var f=M.words[0]|0,l=u.words[0]|0,m=f*l,x=m&67108863,v=m/67108864|0;b.words[0]=x;for(var c=1;c<p;c++){for(var w=v>>>26,R=v&67108863,E=Math.min(c,u.length-1),N=Math.max(0,c-M.length+1);N<=E;N++){var q=c-N|0;f=M.words[q]|0,l=u.words[N]|0,m=f*l+R,w+=m/67108864|0,R=m&67108863}b.words[c]=R|0,v=w|0}return v!==0?b.words[c]=v|0:b.length--,b.strip()}var I=function(u,b,p){var f=u.words,l=b.words,m=p.words,x=0,v,c,w,R=f[0]|0,E=R&8191,N=R>>>13,q=f[1]|0,A=q&8191,L=q>>>13,z=f[2]|0,k=z&8191,$=z>>>13,W=f[3]|0,H=W&8191,G=W>>>13,Z=f[4]|0,J=Z&8191,Y=Z>>>13,fr=f[5]|0,oe=fr&8191,ae=fr>>>13,kt=f[6]|0,re=kt&8191,te=kt>>>13,jt=f[7]|0,ie=jt&8191,ne=jt>>>13,$t=f[8]|0,se=$t&8191,fe=$t>>>13,cr=f[9]|0,ce=cr&8191,ue=cr>>>13,Mr=l[0]|0,he=Mr&8191,de=Mr>>>13,Or=l[1]|0,le=Or&8191,pe=Or>>>13,Rr=l[2]|0,be=Rr&8191,ge=Rr>>>13,Nr=l[3]|0,ve=Nr&8191,me=Nr>>>13,Pr=l[4]|0,ye=Pr&8191,we=Pr>>>13,Tr=l[5]|0,xe=Tr&8191,Ee=Tr>>>13,Dr=l[6]|0,_e=Dr&8191,Se=Dr>>>13,Cr=l[7]|0,Ie=Cr&8191,Ae=Cr>>>13,Lr=l[8]|0,Me=Lr&8191,Oe=Lr>>>13,Fr=l[9]|0,Re=Fr&8191,Ne=Fr>>>13;p.negative=u.negative^b.negative,p.length=19,v=Math.imul(E,he),c=Math.imul(E,de),c=c+Math.imul(N,he)|0,w=Math.imul(N,de);var ur=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ur>>>26)|0,ur&=67108863,v=Math.imul(A,he),c=Math.imul(A,de),c=c+Math.imul(L,he)|0,w=Math.imul(L,de),v=v+Math.imul(E,le)|0,c=c+Math.imul(E,pe)|0,c=c+Math.imul(N,le)|0,w=w+Math.imul(N,pe)|0;var ke=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ke>>>26)|0,ke&=67108863,v=Math.imul(k,he),c=Math.imul(k,de),c=c+Math.imul($,he)|0,w=Math.imul($,de),v=v+Math.imul(A,le)|0,c=c+Math.imul(A,pe)|0,c=c+Math.imul(L,le)|0,w=w+Math.imul(L,pe)|0,v=v+Math.imul(E,be)|0,c=c+Math.imul(E,ge)|0,c=c+Math.imul(N,be)|0,w=w+Math.imul(N,ge)|0;var je=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(je>>>26)|0,je&=67108863,v=Math.imul(H,he),c=Math.imul(H,de),c=c+Math.imul(G,he)|0,w=Math.imul(G,de),v=v+Math.imul(k,le)|0,c=c+Math.imul(k,pe)|0,c=c+Math.imul($,le)|0,w=w+Math.imul($,pe)|0,v=v+Math.imul(A,be)|0,c=c+Math.imul(A,ge)|0,c=c+Math.imul(L,be)|0,w=w+Math.imul(L,ge)|0,v=v+Math.imul(E,ve)|0,c=c+Math.imul(E,me)|0,c=c+Math.imul(N,ve)|0,w=w+Math.imul(N,me)|0;var Kt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(J,he),c=Math.imul(J,de),c=c+Math.imul(Y,he)|0,w=Math.imul(Y,de),v=v+Math.imul(H,le)|0,c=c+Math.imul(H,pe)|0,c=c+Math.imul(G,le)|0,w=w+Math.imul(G,pe)|0,v=v+Math.imul(k,be)|0,c=c+Math.imul(k,ge)|0,c=c+Math.imul($,be)|0,w=w+Math.imul($,ge)|0,v=v+Math.imul(A,ve)|0,c=c+Math.imul(A,me)|0,c=c+Math.imul(L,ve)|0,w=w+Math.imul(L,me)|0,v=v+Math.imul(E,ye)|0,c=c+Math.imul(E,we)|0,c=c+Math.imul(N,ye)|0,w=w+Math.imul(N,we)|0;var Vt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,v=Math.imul(oe,he),c=Math.imul(oe,de),c=c+Math.imul(ae,he)|0,w=Math.imul(ae,de),v=v+Math.imul(J,le)|0,c=c+Math.imul(J,pe)|0,c=c+Math.imul(Y,le)|0,w=w+Math.imul(Y,pe)|0,v=v+Math.imul(H,be)|0,c=c+Math.imul(H,ge)|0,c=c+Math.imul(G,be)|0,w=w+Math.imul(G,ge)|0,v=v+Math.imul(k,ve)|0,c=c+Math.imul(k,me)|0,c=c+Math.imul($,ve)|0,w=w+Math.imul($,me)|0,v=v+Math.imul(A,ye)|0,c=c+Math.imul(A,we)|0,c=c+Math.imul(L,ye)|0,w=w+Math.imul(L,we)|0,v=v+Math.imul(E,xe)|0,c=c+Math.imul(E,Ee)|0,c=c+Math.imul(N,xe)|0,w=w+Math.imul(N,Ee)|0;var Ht=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(re,he),c=Math.imul(re,de),c=c+Math.imul(te,he)|0,w=Math.imul(te,de),v=v+Math.imul(oe,le)|0,c=c+Math.imul(oe,pe)|0,c=c+Math.imul(ae,le)|0,w=w+Math.imul(ae,pe)|0,v=v+Math.imul(J,be)|0,c=c+Math.imul(J,ge)|0,c=c+Math.imul(Y,be)|0,w=w+Math.imul(Y,ge)|0,v=v+Math.imul(H,ve)|0,c=c+Math.imul(H,me)|0,c=c+Math.imul(G,ve)|0,w=w+Math.imul(G,me)|0,v=v+Math.imul(k,ye)|0,c=c+Math.imul(k,we)|0,c=c+Math.imul($,ye)|0,w=w+Math.imul($,we)|0,v=v+Math.imul(A,xe)|0,c=c+Math.imul(A,Ee)|0,c=c+Math.imul(L,xe)|0,w=w+Math.imul(L,Ee)|0,v=v+Math.imul(E,_e)|0,c=c+Math.imul(E,Se)|0,c=c+Math.imul(N,_e)|0,w=w+Math.imul(N,Se)|0;var Gt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,v=Math.imul(ie,he),c=Math.imul(ie,de),c=c+Math.imul(ne,he)|0,w=Math.imul(ne,de),v=v+Math.imul(re,le)|0,c=c+Math.imul(re,pe)|0,c=c+Math.imul(te,le)|0,w=w+Math.imul(te,pe)|0,v=v+Math.imul(oe,be)|0,c=c+Math.imul(oe,ge)|0,c=c+Math.imul(ae,be)|0,w=w+Math.imul(ae,ge)|0,v=v+Math.imul(J,ve)|0,c=c+Math.imul(J,me)|0,c=c+Math.imul(Y,ve)|0,w=w+Math.imul(Y,me)|0,v=v+Math.imul(H,ye)|0,c=c+Math.imul(H,we)|0,c=c+Math.imul(G,ye)|0,w=w+Math.imul(G,we)|0,v=v+Math.imul(k,xe)|0,c=c+Math.imul(k,Ee)|0,c=c+Math.imul($,xe)|0,w=w+Math.imul($,Ee)|0,v=v+Math.imul(A,_e)|0,c=c+Math.imul(A,Se)|0,c=c+Math.imul(L,_e)|0,w=w+Math.imul(L,Se)|0,v=v+Math.imul(E,Ie)|0,c=c+Math.imul(E,Ae)|0,c=c+Math.imul(N,Ie)|0,w=w+Math.imul(N,Ae)|0;var Jt=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,v=Math.imul(se,he),c=Math.imul(se,de),c=c+Math.imul(fe,he)|0,w=Math.imul(fe,de),v=v+Math.imul(ie,le)|0,c=c+Math.imul(ie,pe)|0,c=c+Math.imul(ne,le)|0,w=w+Math.imul(ne,pe)|0,v=v+Math.imul(re,be)|0,c=c+Math.imul(re,ge)|0,c=c+Math.imul(te,be)|0,w=w+Math.imul(te,ge)|0,v=v+Math.imul(oe,ve)|0,c=c+Math.imul(oe,me)|0,c=c+Math.imul(ae,ve)|0,w=w+Math.imul(ae,me)|0,v=v+Math.imul(J,ye)|0,c=c+Math.imul(J,we)|0,c=c+Math.imul(Y,ye)|0,w=w+Math.imul(Y,we)|0,v=v+Math.imul(H,xe)|0,c=c+Math.imul(H,Ee)|0,c=c+Math.imul(G,xe)|0,w=w+Math.imul(G,Ee)|0,v=v+Math.imul(k,_e)|0,c=c+Math.imul(k,Se)|0,c=c+Math.imul($,_e)|0,w=w+Math.imul($,Se)|0,v=v+Math.imul(A,Ie)|0,c=c+Math.imul(A,Ae)|0,c=c+Math.imul(L,Ie)|0,w=w+Math.imul(L,Ae)|0,v=v+Math.imul(E,Me)|0,c=c+Math.imul(E,Oe)|0,c=c+Math.imul(N,Me)|0,w=w+Math.imul(N,Oe)|0;var fi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(fi>>>26)|0,fi&=67108863,v=Math.imul(ce,he),c=Math.imul(ce,de),c=c+Math.imul(ue,he)|0,w=Math.imul(ue,de),v=v+Math.imul(se,le)|0,c=c+Math.imul(se,pe)|0,c=c+Math.imul(fe,le)|0,w=w+Math.imul(fe,pe)|0,v=v+Math.imul(ie,be)|0,c=c+Math.imul(ie,ge)|0,c=c+Math.imul(ne,be)|0,w=w+Math.imul(ne,ge)|0,v=v+Math.imul(re,ve)|0,c=c+Math.imul(re,me)|0,c=c+Math.imul(te,ve)|0,w=w+Math.imul(te,me)|0,v=v+Math.imul(oe,ye)|0,c=c+Math.imul(oe,we)|0,c=c+Math.imul(ae,ye)|0,w=w+Math.imul(ae,we)|0,v=v+Math.imul(J,xe)|0,c=c+Math.imul(J,Ee)|0,c=c+Math.imul(Y,xe)|0,w=w+Math.imul(Y,Ee)|0,v=v+Math.imul(H,_e)|0,c=c+Math.imul(H,Se)|0,c=c+Math.imul(G,_e)|0,w=w+Math.imul(G,Se)|0,v=v+Math.imul(k,Ie)|0,c=c+Math.imul(k,Ae)|0,c=c+Math.imul($,Ie)|0,w=w+Math.imul($,Ae)|0,v=v+Math.imul(A,Me)|0,c=c+Math.imul(A,Oe)|0,c=c+Math.imul(L,Me)|0,w=w+Math.imul(L,Oe)|0,v=v+Math.imul(E,Re)|0,c=c+Math.imul(E,Ne)|0,c=c+Math.imul(N,Re)|0,w=w+Math.imul(N,Ne)|0;var ci=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,v=Math.imul(ce,le),c=Math.imul(ce,pe),c=c+Math.imul(ue,le)|0,w=Math.imul(ue,pe),v=v+Math.imul(se,be)|0,c=c+Math.imul(se,ge)|0,c=c+Math.imul(fe,be)|0,w=w+Math.imul(fe,ge)|0,v=v+Math.imul(ie,ve)|0,c=c+Math.imul(ie,me)|0,c=c+Math.imul(ne,ve)|0,w=w+Math.imul(ne,me)|0,v=v+Math.imul(re,ye)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(te,ye)|0,w=w+Math.imul(te,we)|0,v=v+Math.imul(oe,xe)|0,c=c+Math.imul(oe,Ee)|0,c=c+Math.imul(ae,xe)|0,w=w+Math.imul(ae,Ee)|0,v=v+Math.imul(J,_e)|0,c=c+Math.imul(J,Se)|0,c=c+Math.imul(Y,_e)|0,w=w+Math.imul(Y,Se)|0,v=v+Math.imul(H,Ie)|0,c=c+Math.imul(H,Ae)|0,c=c+Math.imul(G,Ie)|0,w=w+Math.imul(G,Ae)|0,v=v+Math.imul(k,Me)|0,c=c+Math.imul(k,Oe)|0,c=c+Math.imul($,Me)|0,w=w+Math.imul($,Oe)|0,v=v+Math.imul(A,Re)|0,c=c+Math.imul(A,Ne)|0,c=c+Math.imul(L,Re)|0,w=w+Math.imul(L,Ne)|0;var ui=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(ui>>>26)|0,ui&=67108863,v=Math.imul(ce,be),c=Math.imul(ce,ge),c=c+Math.imul(ue,be)|0,w=Math.imul(ue,ge),v=v+Math.imul(se,ve)|0,c=c+Math.imul(se,me)|0,c=c+Math.imul(fe,ve)|0,w=w+Math.imul(fe,me)|0,v=v+Math.imul(ie,ye)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(ne,ye)|0,w=w+Math.imul(ne,we)|0,v=v+Math.imul(re,xe)|0,c=c+Math.imul(re,Ee)|0,c=c+Math.imul(te,xe)|0,w=w+Math.imul(te,Ee)|0,v=v+Math.imul(oe,_e)|0,c=c+Math.imul(oe,Se)|0,c=c+Math.imul(ae,_e)|0,w=w+Math.imul(ae,Se)|0,v=v+Math.imul(J,Ie)|0,c=c+Math.imul(J,Ae)|0,c=c+Math.imul(Y,Ie)|0,w=w+Math.imul(Y,Ae)|0,v=v+Math.imul(H,Me)|0,c=c+Math.imul(H,Oe)|0,c=c+Math.imul(G,Me)|0,w=w+Math.imul(G,Oe)|0,v=v+Math.imul(k,Re)|0,c=c+Math.imul(k,Ne)|0,c=c+Math.imul($,Re)|0,w=w+Math.imul($,Ne)|0;var hi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,v=Math.imul(ce,ve),c=Math.imul(ce,me),c=c+Math.imul(ue,ve)|0,w=Math.imul(ue,me),v=v+Math.imul(se,ye)|0,c=c+Math.imul(se,we)|0,c=c+Math.imul(fe,ye)|0,w=w+Math.imul(fe,we)|0,v=v+Math.imul(ie,xe)|0,c=c+Math.imul(ie,Ee)|0,c=c+Math.imul(ne,xe)|0,w=w+Math.imul(ne,Ee)|0,v=v+Math.imul(re,_e)|0,c=c+Math.imul(re,Se)|0,c=c+Math.imul(te,_e)|0,w=w+Math.imul(te,Se)|0,v=v+Math.imul(oe,Ie)|0,c=c+Math.imul(oe,Ae)|0,c=c+Math.imul(ae,Ie)|0,w=w+Math.imul(ae,Ae)|0,v=v+Math.imul(J,Me)|0,c=c+Math.imul(J,Oe)|0,c=c+Math.imul(Y,Me)|0,w=w+Math.imul(Y,Oe)|0,v=v+Math.imul(H,Re)|0,c=c+Math.imul(H,Ne)|0,c=c+Math.imul(G,Re)|0,w=w+Math.imul(G,Ne)|0;var di=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(di>>>26)|0,di&=67108863,v=Math.imul(ce,ye),c=Math.imul(ce,we),c=c+Math.imul(ue,ye)|0,w=Math.imul(ue,we),v=v+Math.imul(se,xe)|0,c=c+Math.imul(se,Ee)|0,c=c+Math.imul(fe,xe)|0,w=w+Math.imul(fe,Ee)|0,v=v+Math.imul(ie,_e)|0,c=c+Math.imul(ie,Se)|0,c=c+Math.imul(ne,_e)|0,w=w+Math.imul(ne,Se)|0,v=v+Math.imul(re,Ie)|0,c=c+Math.imul(re,Ae)|0,c=c+Math.imul(te,Ie)|0,w=w+Math.imul(te,Ae)|0,v=v+Math.imul(oe,Me)|0,c=c+Math.imul(oe,Oe)|0,c=c+Math.imul(ae,Me)|0,w=w+Math.imul(ae,Oe)|0,v=v+Math.imul(J,Re)|0,c=c+Math.imul(J,Ne)|0,c=c+Math.imul(Y,Re)|0,w=w+Math.imul(Y,Ne)|0;var li=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(li>>>26)|0,li&=67108863,v=Math.imul(ce,xe),c=Math.imul(ce,Ee),c=c+Math.imul(ue,xe)|0,w=Math.imul(ue,Ee),v=v+Math.imul(se,_e)|0,c=c+Math.imul(se,Se)|0,c=c+Math.imul(fe,_e)|0,w=w+Math.imul(fe,Se)|0,v=v+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Ae)|0,c=c+Math.imul(ne,Ie)|0,w=w+Math.imul(ne,Ae)|0,v=v+Math.imul(re,Me)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(te,Me)|0,w=w+Math.imul(te,Oe)|0,v=v+Math.imul(oe,Re)|0,c=c+Math.imul(oe,Ne)|0,c=c+Math.imul(ae,Re)|0,w=w+Math.imul(ae,Ne)|0;var pi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,v=Math.imul(ce,_e),c=Math.imul(ce,Se),c=c+Math.imul(ue,_e)|0,w=Math.imul(ue,Se),v=v+Math.imul(se,Ie)|0,c=c+Math.imul(se,Ae)|0,c=c+Math.imul(fe,Ie)|0,w=w+Math.imul(fe,Ae)|0,v=v+Math.imul(ie,Me)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(ne,Me)|0,w=w+Math.imul(ne,Oe)|0,v=v+Math.imul(re,Re)|0,c=c+Math.imul(re,Ne)|0,c=c+Math.imul(te,Re)|0,w=w+Math.imul(te,Ne)|0;var bi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,v=Math.imul(ce,Ie),c=Math.imul(ce,Ae),c=c+Math.imul(ue,Ie)|0,w=Math.imul(ue,Ae),v=v+Math.imul(se,Me)|0,c=c+Math.imul(se,Oe)|0,c=c+Math.imul(fe,Me)|0,w=w+Math.imul(fe,Oe)|0,v=v+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Ne)|0,c=c+Math.imul(ne,Re)|0,w=w+Math.imul(ne,Ne)|0;var gi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,v=Math.imul(ce,Me),c=Math.imul(ce,Oe),c=c+Math.imul(ue,Me)|0,w=Math.imul(ue,Oe),v=v+Math.imul(se,Re)|0,c=c+Math.imul(se,Ne)|0,c=c+Math.imul(fe,Re)|0,w=w+Math.imul(fe,Ne)|0;var vi=(x+v|0)+((c&8191)<<13)|0;x=(w+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,v=Math.imul(ce,Re),c=Math.imul(ce,Ne),c=c+Math.imul(ue,Re)|0,w=Math.imul(ue,Ne);var mi=(x+v|0)+((c&8191)<<13)|0;return x=(w+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,m[0]=ur,m[1]=ke,m[2]=je,m[3]=Kt,m[4]=Vt,m[5]=Ht,m[6]=Gt,m[7]=Jt,m[8]=fi,m[9]=ci,m[10]=ui,m[11]=hi,m[12]=di,m[13]=li,m[14]=pi,m[15]=bi,m[16]=gi,m[17]=vi,m[18]=mi,x!==0&&(m[19]=x,p.length++),p};Math.imul||(I=S);function O(M,u,b){b.negative=u.negative^M.negative,b.length=M.length+u.length;for(var p=0,f=0,l=0;l<b.length-1;l++){var m=f;f=0;for(var x=p&67108863,v=Math.min(l,u.length-1),c=Math.max(0,l-M.length+1);c<=v;c++){var w=l-c,R=M.words[w]|0,E=u.words[c]|0,N=R*E,q=N&67108863;m=m+(N/67108864|0)|0,q=q+x|0,x=q&67108863,m=m+(q>>>26)|0,f+=m>>>26,m&=67108863}b.words[l]=x,p=m,m=f}return p!==0?b.words[l]=p:b.length--,b.strip()}function P(M,u,b){var p=new T;return p.mulp(M,u,b)}n.prototype.mulTo=function(u,b){var p,f=this.length+u.length;return this.length===10&&u.length===10?p=I(this,u,b):f<63?p=S(this,u,b):f<1024?p=O(this,u,b):p=P(this,u,b),p};function T(M,u){this.x=M,this.y=u}T.prototype.makeRBT=function(u){for(var b=new Array(u),p=n.prototype._countBits(u)-1,f=0;f<u;f++)b[f]=this.revBin(f,p,u);return b},T.prototype.revBin=function(u,b,p){if(u===0||u===p-1)return u;for(var f=0,l=0;l<b;l++)f|=(u&1)<<b-l-1,u>>=1;return f},T.prototype.permute=function(u,b,p,f,l,m){for(var x=0;x<m;x++)f[x]=b[u[x]],l[x]=p[u[x]]},T.prototype.transform=function(u,b,p,f,l,m){this.permute(m,u,b,p,f,l);for(var x=1;x<l;x<<=1)for(var v=x<<1,c=Math.cos(2*Math.PI/v),w=Math.sin(2*Math.PI/v),R=0;R<l;R+=v)for(var E=c,N=w,q=0;q<x;q++){var A=p[R+q],L=f[R+q],z=p[R+q+x],k=f[R+q+x],$=E*z-N*k;k=E*k+N*z,z=$,p[R+q]=A+z,f[R+q]=L+k,p[R+q+x]=A-z,f[R+q+x]=L-k,q!==v&&($=c*E-w*N,N=c*N+w*E,E=$)}},T.prototype.guessLen13b=function(u,b){var p=Math.max(b,u)|1,f=p&1,l=0;for(p=p/2|0;p;p=p>>>1)l++;return 1<<l+1+f},T.prototype.conjugate=function(u,b,p){if(!(p<=1))for(var f=0;f<p/2;f++){var l=u[f];u[f]=u[p-f-1],u[p-f-1]=l,l=b[f],b[f]=-b[p-f-1],b[p-f-1]=-l}},T.prototype.normalize13b=function(u,b){for(var p=0,f=0;f<b/2;f++){var l=Math.round(u[2*f+1]/b)*8192+Math.round(u[2*f]/b)+p;u[f]=l&67108863,l<67108864?p=0:p=l/67108864|0}return u},T.prototype.convert13b=function(u,b,p,f){for(var l=0,m=0;m<b;m++)l=l+(u[m]|0),p[2*m]=l&8191,l=l>>>13,p[2*m+1]=l&8191,l=l>>>13;for(m=2*b;m<f;++m)p[m]=0;r(l===0),r((l&-8192)===0)},T.prototype.stub=function(u){for(var b=new Array(u),p=0;p<u;p++)b[p]=0;return b},T.prototype.mulp=function(u,b,p){var f=2*this.guessLen13b(u.length,b.length),l=this.makeRBT(f),m=this.stub(f),x=new Array(f),v=new Array(f),c=new Array(f),w=new Array(f),R=new Array(f),E=new Array(f),N=p.words;N.length=f,this.convert13b(u.words,u.length,x,f),this.convert13b(b.words,b.length,w,f),this.transform(x,m,v,c,f,l),this.transform(w,m,R,E,f,l);for(var q=0;q<f;q++){var A=v[q]*R[q]-c[q]*E[q];c[q]=v[q]*E[q]+c[q]*R[q],v[q]=A}return this.conjugate(v,c,f),this.transform(v,c,N,m,f,l),this.conjugate(N,m,f),this.normalize13b(N,f),p.negative=u.negative^b.negative,p.length=u.length+b.length,p.strip()},n.prototype.mul=function(u){var b=new n(null);return b.words=new Array(this.length+u.length),this.mulTo(u,b)},n.prototype.mulf=function(u){var b=new n(null);return b.words=new Array(this.length+u.length),P(this,u,b)},n.prototype.imul=function(u){return this.clone().mulTo(u,this)},n.prototype.imuln=function(u){r(typeof u=="number"),r(u<67108864);for(var b=0,p=0;p<this.length;p++){var f=(this.words[p]|0)*u,l=(f&67108863)+(b&67108863);b>>=26,b+=f/67108864|0,b+=l>>>26,this.words[p]=l&67108863}return b!==0&&(this.words[p]=b,this.length++),this.length=u===0?1:this.length,this},n.prototype.muln=function(u){return this.clone().imuln(u)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(u){var b=_(u);if(b.length===0)return new n(1);for(var p=this,f=0;f<b.length&&b[f]===0;f++,p=p.sqr());if(++f<b.length)for(var l=p.sqr();f<b.length;f++,l=l.sqr())b[f]!==0&&(p=p.mul(l));return p},n.prototype.iushln=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26,f=67108863>>>26-b<<26-b,l;if(b!==0){var m=0;for(l=0;l<this.length;l++){var x=this.words[l]&f,v=(this.words[l]|0)-x<<b;this.words[l]=v|m,m=x>>>26-b}m&&(this.words[l]=m,this.length++)}if(p!==0){for(l=this.length-1;l>=0;l--)this.words[l+p]=this.words[l];for(l=0;l<p;l++)this.words[l]=0;this.length+=p}return this.strip()},n.prototype.ishln=function(u){return r(this.negative===0),this.iushln(u)},n.prototype.iushrn=function(u,b,p){r(typeof u=="number"&&u>=0);var f;b?f=(b-b%26)/26:f=0;var l=u%26,m=Math.min((u-l)/26,this.length),x=67108863^67108863>>>l<<l,v=p;if(f-=m,f=Math.max(0,f),v){for(var c=0;c<m;c++)v.words[c]=this.words[c];v.length=m}if(m!==0)if(this.length>m)for(this.length-=m,c=0;c<this.length;c++)this.words[c]=this.words[c+m];else this.words[0]=0,this.length=1;var w=0;for(c=this.length-1;c>=0&&(w!==0||c>=f);c--){var R=this.words[c]|0;this.words[c]=w<<26-l|R>>>l,w=R&x}return v&&w!==0&&(v.words[v.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(u,b,p){return r(this.negative===0),this.iushrn(u,b,p)},n.prototype.shln=function(u){return this.clone().ishln(u)},n.prototype.ushln=function(u){return this.clone().iushln(u)},n.prototype.shrn=function(u){return this.clone().ishrn(u)},n.prototype.ushrn=function(u){return this.clone().iushrn(u)},n.prototype.testn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26,f=1<<b;if(this.length<=p)return!1;var l=this.words[p];return!!(l&f)},n.prototype.imaskn=function(u){r(typeof u=="number"&&u>=0);var b=u%26,p=(u-b)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(b!==0&&p++,this.length=Math.min(p,this.length),b!==0){var f=67108863^67108863>>>b<<b;this.words[this.length-1]&=f}return this.strip()},n.prototype.maskn=function(u){return this.clone().imaskn(u)},n.prototype.iaddn=function(u){return r(typeof u=="number"),r(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},n.prototype._iaddn=function(u){this.words[0]+=u;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},n.prototype.isubn=function(u){if(r(typeof u=="number"),r(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},n.prototype.addn=function(u){return this.clone().iaddn(u)},n.prototype.subn=function(u){return this.clone().isubn(u)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(u,b,p){var f=u.length+p,l;this._expand(f);var m,x=0;for(l=0;l<u.length;l++){m=(this.words[l+p]|0)+x;var v=(u.words[l]|0)*b;m-=v&67108863,x=(m>>26)-(v/67108864|0),this.words[l+p]=m&67108863}for(;l<this.length-p;l++)m=(this.words[l+p]|0)+x,x=m>>26,this.words[l+p]=m&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,l=0;l<this.length;l++)m=-(this.words[l]|0)+x,x=m>>26,this.words[l]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(u,b){var p=this.length-u.length,f=this.clone(),l=u,m=l.words[l.length-1]|0,x=this._countBits(m);p=26-x,p!==0&&(l=l.ushln(p),f.iushln(p),m=l.words[l.length-1]|0);var v=f.length-l.length,c;if(b!=="mod"){c=new n(null),c.length=v+1,c.words=new Array(c.length);for(var w=0;w<c.length;w++)c.words[w]=0}var R=f.clone()._ishlnsubmul(l,1,v);R.negative===0&&(f=R,c&&(c.words[v]=1));for(var E=v-1;E>=0;E--){var N=(f.words[l.length+E]|0)*67108864+(f.words[l.length+E-1]|0);for(N=Math.min(N/m|0,67108863),f._ishlnsubmul(l,N,E);f.negative!==0;)N--,f.negative=0,f._ishlnsubmul(l,1,E),f.isZero()||(f.negative^=1);c&&(c.words[E]=N)}return c&&c.strip(),f.strip(),b!=="div"&&p!==0&&f.iushrn(p),{div:c||null,mod:f}},n.prototype.divmod=function(u,b,p){if(r(!u.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var f,l,m;return this.negative!==0&&u.negative===0?(m=this.neg().divmod(u,b),b!=="mod"&&(f=m.div.neg()),b!=="div"&&(l=m.mod.neg(),p&&l.negative!==0&&l.iadd(u)),{div:f,mod:l}):this.negative===0&&u.negative!==0?(m=this.divmod(u.neg(),b),b!=="mod"&&(f=m.div.neg()),{div:f,mod:m.mod}):this.negative&u.negative?(m=this.neg().divmod(u.neg(),b),b!=="div"&&(l=m.mod.neg(),p&&l.negative!==0&&l.isub(u)),{div:m.div,mod:l}):u.length>this.length||this.cmp(u)<0?{div:new n(0),mod:this}:u.length===1?b==="div"?{div:this.divn(u.words[0]),mod:null}:b==="mod"?{div:null,mod:new n(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new n(this.modn(u.words[0]))}:this._wordDiv(u,b)},n.prototype.div=function(u){return this.divmod(u,"div",!1).div},n.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},n.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},n.prototype.divRound=function(u){var b=this.divmod(u);if(b.mod.isZero())return b.div;var p=b.div.negative!==0?b.mod.isub(u):b.mod,f=u.ushrn(1),l=u.andln(1),m=p.cmp(f);return m<0||l===1&&m===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},n.prototype.modn=function(u){r(u<=67108863);for(var b=(1<<26)%u,p=0,f=this.length-1;f>=0;f--)p=(b*p+(this.words[f]|0))%u;return p},n.prototype.idivn=function(u){r(u<=67108863);for(var b=0,p=this.length-1;p>=0;p--){var f=(this.words[p]|0)+b*67108864;this.words[p]=f/u|0,b=f%u}return this.strip()},n.prototype.divn=function(u){return this.clone().idivn(u)},n.prototype.egcd=function(u){r(u.negative===0),r(!u.isZero());var b=this,p=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var f=new n(1),l=new n(0),m=new n(0),x=new n(1),v=0;b.isEven()&&p.isEven();)b.iushrn(1),p.iushrn(1),++v;for(var c=p.clone(),w=b.clone();!b.isZero();){for(var R=0,E=1;!(b.words[0]&E)&&R<26;++R,E<<=1);if(R>0)for(b.iushrn(R);R-- >0;)(f.isOdd()||l.isOdd())&&(f.iadd(c),l.isub(w)),f.iushrn(1),l.iushrn(1);for(var N=0,q=1;!(p.words[0]&q)&&N<26;++N,q<<=1);if(N>0)for(p.iushrn(N);N-- >0;)(m.isOdd()||x.isOdd())&&(m.iadd(c),x.isub(w)),m.iushrn(1),x.iushrn(1);b.cmp(p)>=0?(b.isub(p),f.isub(m),l.isub(x)):(p.isub(b),m.isub(f),x.isub(l))}return{a:m,b:x,gcd:p.iushln(v)}},n.prototype._invmp=function(u){r(u.negative===0),r(!u.isZero());var b=this,p=u.clone();b.negative!==0?b=b.umod(u):b=b.clone();for(var f=new n(1),l=new n(0),m=p.clone();b.cmpn(1)>0&&p.cmpn(1)>0;){for(var x=0,v=1;!(b.words[0]&v)&&x<26;++x,v<<=1);if(x>0)for(b.iushrn(x);x-- >0;)f.isOdd()&&f.iadd(m),f.iushrn(1);for(var c=0,w=1;!(p.words[0]&w)&&c<26;++c,w<<=1);if(c>0)for(p.iushrn(c);c-- >0;)l.isOdd()&&l.iadd(m),l.iushrn(1);b.cmp(p)>=0?(b.isub(p),f.isub(l)):(p.isub(b),l.isub(f))}var R;return b.cmpn(1)===0?R=f:R=l,R.cmpn(0)<0&&R.iadd(u),R},n.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var b=this.clone(),p=u.clone();b.negative=0,p.negative=0;for(var f=0;b.isEven()&&p.isEven();f++)b.iushrn(1),p.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;p.isEven();)p.iushrn(1);var l=b.cmp(p);if(l<0){var m=b;b=p,p=m}else if(l===0||p.cmpn(1)===0)break;b.isub(p)}while(!0);return p.iushln(f)},n.prototype.invm=function(u){return this.egcd(u).a.umod(u)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(u){return this.words[0]&u},n.prototype.bincn=function(u){r(typeof u=="number");var b=u%26,p=(u-b)/26,f=1<<b;if(this.length<=p)return this._expand(p+1),this.words[p]|=f,this;for(var l=f,m=p;l!==0&&m<this.length;m++){var x=this.words[m]|0;x+=l,l=x>>>26,x&=67108863,this.words[m]=x}return l!==0&&(this.words[m]=l,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(u){var b=u<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var p;if(this.length>1)p=1;else{b&&(u=-u),r(u<=67108863,"Number is too big");var f=this.words[0]|0;p=f===u?0:f<u?-1:1}return this.negative!==0?-p|0:p},n.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var b=this.ucmp(u);return this.negative!==0?-b|0:b},n.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var b=0,p=this.length-1;p>=0;p--){var f=this.words[p]|0,l=u.words[p]|0;if(f!==l){f<l?b=-1:f>l&&(b=1);break}}return b},n.prototype.gtn=function(u){return this.cmpn(u)===1},n.prototype.gt=function(u){return this.cmp(u)===1},n.prototype.gten=function(u){return this.cmpn(u)>=0},n.prototype.gte=function(u){return this.cmp(u)>=0},n.prototype.ltn=function(u){return this.cmpn(u)===-1},n.prototype.lt=function(u){return this.cmp(u)===-1},n.prototype.lten=function(u){return this.cmpn(u)<=0},n.prototype.lte=function(u){return this.cmp(u)<=0},n.prototype.eqn=function(u){return this.cmpn(u)===0},n.prototype.eq=function(u){return this.cmp(u)===0},n.red=function(u){return new C(u)},n.prototype.toRed=function(u){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(u){return this.red=u,this},n.prototype.forceRed=function(u){return r(!this.red,"Already a number in reduction context"),this._forceRed(u)},n.prototype.redAdd=function(u){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},n.prototype.redIAdd=function(u){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},n.prototype.redSub=function(u){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},n.prototype.redISub=function(u){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},n.prototype.redShl=function(u){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},n.prototype.redMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},n.prototype.redIMul=function(u){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(u){return r(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var U={k256:null,p224:null,p192:null,p25519:null};function D(M,u){this.name=M,this.p=new n(u,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var u=new n(null);return u.words=new Array(Math.ceil(this.n/13)),u},D.prototype.ireduce=function(u){var b=u,p;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),p=b.bitLength();while(p>this.n);var f=p<this.n?-1:b.ucmp(this.p);return f===0?(b.words[0]=0,b.length=1):f>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},D.prototype.split=function(u,b){u.iushrn(this.n,0,b)},D.prototype.imulK=function(u){return u.imul(this.k)};function F(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,D),F.prototype.split=function(u,b){for(var p=4194303,f=Math.min(u.length,9),l=0;l<f;l++)b.words[l]=u.words[l];if(b.length=f,u.length<=9){u.words[0]=0,u.length=1;return}var m=u.words[9];for(b.words[b.length++]=m&p,l=10;l<u.length;l++){var x=u.words[l]|0;u.words[l-10]=(x&p)<<4|m>>>22,m=x}m>>>=22,u.words[l-10]=m,m===0&&u.length>10?u.length-=10:u.length-=9},F.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var b=0,p=0;p<u.length;p++){var f=u.words[p]|0;b+=f*977,u.words[p]=b&67108863,b=f*64+(b/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function j(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(j,D);function V(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(V,D);function B(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(B,D),B.prototype.imulK=function(u){for(var b=0,p=0;p<u.length;p++){var f=(u.words[p]|0)*19+b,l=f&67108863;f>>>=26,u.words[p]=l,b=f}return b!==0&&(u.words[u.length++]=b),u},n._prime=function(u){if(U[u])return U[u];var b;if(u==="k256")b=new F;else if(u==="p224")b=new j;else if(u==="p192")b=new V;else if(u==="p25519")b=new B;else throw new Error("Unknown prime "+u);return U[u]=b,b};function C(M){if(typeof M=="string"){var u=n._prime(M);this.m=u.p,this.prime=u}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}C.prototype._verify1=function(u){r(u.negative===0,"red works only with positives"),r(u.red,"red works only with red numbers")},C.prototype._verify2=function(u,b){r((u.negative|b.negative)===0,"red works only with positives"),r(u.red&&u.red===b.red,"red works only with red numbers")},C.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)},C.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},C.prototype.add=function(u,b){this._verify2(u,b);var p=u.add(b);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},C.prototype.iadd=function(u,b){this._verify2(u,b);var p=u.iadd(b);return p.cmp(this.m)>=0&&p.isub(this.m),p},C.prototype.sub=function(u,b){this._verify2(u,b);var p=u.sub(b);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},C.prototype.isub=function(u,b){this._verify2(u,b);var p=u.isub(b);return p.cmpn(0)<0&&p.iadd(this.m),p},C.prototype.shl=function(u,b){return this._verify1(u),this.imod(u.ushln(b))},C.prototype.imul=function(u,b){return this._verify2(u,b),this.imod(u.imul(b))},C.prototype.mul=function(u,b){return this._verify2(u,b),this.imod(u.mul(b))},C.prototype.isqr=function(u){return this.imul(u,u.clone())},C.prototype.sqr=function(u){return this.mul(u,u)},C.prototype.sqrt=function(u){if(u.isZero())return u.clone();var b=this.m.andln(3);if(r(b%2===1),b===3){var p=this.m.add(new n(1)).iushrn(2);return this.pow(u,p)}for(var f=this.m.subn(1),l=0;!f.isZero()&&f.andln(1)===0;)l++,f.iushrn(1);r(!f.isZero());var m=new n(1).toRed(this),x=m.redNeg(),v=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,v).cmp(x)!==0;)c.redIAdd(x);for(var w=this.pow(c,f),R=this.pow(u,f.addn(1).iushrn(1)),E=this.pow(u,f),N=l;E.cmp(m)!==0;){for(var q=E,A=0;q.cmp(m)!==0;A++)q=q.redSqr();r(A<N);var L=this.pow(w,new n(1).iushln(N-A-1));R=R.redMul(L),w=L.redSqr(),E=E.redMul(w),N=A}return R},C.prototype.invm=function(u){var b=u._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},C.prototype.pow=function(u,b){if(b.isZero())return new n(1).toRed(this);if(b.cmpn(1)===0)return u.clone();var p=4,f=new Array(1<<p);f[0]=new n(1).toRed(this),f[1]=u;for(var l=2;l<f.length;l++)f[l]=this.mul(f[l-1],u);var m=f[0],x=0,v=0,c=b.bitLength()%26;for(c===0&&(c=26),l=b.length-1;l>=0;l--){for(var w=b.words[l],R=c-1;R>=0;R--){var E=w>>R&1;if(m!==f[0]&&(m=this.sqr(m)),E===0&&x===0){v=0;continue}x<<=1,x|=E,v++,!(v!==p&&(l!==0||R!==0))&&(m=this.mul(m,f[x]),v=0,x=0)}c=26}return m},C.prototype.convertTo=function(u){var b=u.umod(this.m);return b===u?b.clone():b},C.prototype.convertFrom=function(u){var b=u.clone();return b.red=null,b},n.mont=function(u){return new K(u)};function K(M){C.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,C),K.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},K.prototype.convertFrom=function(u){var b=this.imod(u.mul(this.rinv));return b.red=null,b},K.prototype.imul=function(u,b){if(u.isZero()||b.isZero())return u.words[0]=0,u.length=1,u;var p=u.imul(b),f=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=p.isub(f).iushrn(this.shift),m=l;return l.cmp(this.m)>=0?m=l.isub(this.m):l.cmpn(0)<0&&(m=l.iadd(this.m)),m._forceRed(this)},K.prototype.mul=function(u,b){if(u.isZero()||b.isZero())return new n(0)._forceRed(this);var p=u.mul(b),f=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=p.isub(f).iushrn(this.shift),m=l;return l.cmp(this.m)>=0?m=l.isub(this.m):l.cmpn(0)<0&&(m=l.iadd(this.m)),m._forceRed(this)},K.prototype.invm=function(u){var b=this.imod(u._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof lg>"u"||lg,$9)});var Kr=X(K9=>{"use strict";var Li=K9,Kz=un(),Vz=xn(),Ed=Vu();Li.assert=Vz;Li.toArray=Ed.toArray;Li.zero2=Ed.zero2;Li.toHex=Ed.toHex;Li.encode=Ed.encode;function Hz(t,e,r){var i=new Array(Math.max(t.bitLength(),r)+1),n;for(n=0;n<i.length;n+=1)i[n]=0;var s=1<<e+1,o=t.clone();for(n=0;n<i.length;n++){var a,h=o.andln(s-1);o.isOdd()?(h>(s>>1)-1?a=(s>>1)-h:a=h,o.isubn(a)):a=0,i[n]=a,o.iushrn(1)}return i}Li.getNAF=Hz;function Gz(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var i=0,n=0,s;t.cmpn(-i)>0||e.cmpn(-n)>0;){var o=t.andln(3)+i&3,a=e.andln(3)+n&3;o===3&&(o=-1),a===3&&(a=-1);var h;o&1?(s=t.andln(7)+i&7,(s===3||s===5)&&a===2?h=-o:h=o):h=0,r[0].push(h);var d;a&1?(s=e.andln(7)+n&7,(s===3||s===5)&&o===2?d=-a:d=a):d=0,r[1].push(d),2*i===h+1&&(i=1-i),2*n===d+1&&(n=1-n),t.iushrn(1),e.iushrn(1)}return r}Li.getJSF=Gz;function Jz(t,e,r){var i="_"+e;t.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=r.call(this)}}Li.cachedProperty=Jz;function Wz(t){return typeof t=="string"?Li.toArray(t,"hex"):t}Li.parseBytes=Wz;function Yz(t){return new Kz(t,"hex","le")}Li.intFromLE=Yz});var xc=X((pY,V9)=>{"use strict";var mo=un(),wc=Kr(),_d=wc.getNAF,Xz=wc.getJSF,Sd=wc.assert;function Ls(t,e){this.type=t,this.p=new mo(e.p,16),this.red=e.prime?mo.red(e.prime):mo.mont(this.p),this.zero=new mo(0).toRed(this.red),this.one=new mo(1).toRed(this.red),this.two=new mo(2).toRed(this.red),this.n=e.n&&new mo(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}V9.exports=Ls;Ls.prototype.point=function(){throw new Error("Not implemented")};Ls.prototype.validate=function(){throw new Error("Not implemented")};Ls.prototype._fixedNafMul=function(e,r){Sd(e.precomputed);var i=e._getDoubles(),n=_d(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,h;for(a=0;a<n.length;a+=i.step){h=0;for(var d=a+i.step-1;d>=a;d--)h=(h<<1)+n[d];o.push(h)}for(var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null),_=s;_>0;_--){for(a=0;a<o.length;a++)h=o[a],h===_?y=y.mixedAdd(i.points[a]):h===-_&&(y=y.mixedAdd(i.points[a].neg()));g=g.add(y)}return g.toP()};Ls.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=_d(r,i,this._bitLength),a=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var d=0;h>=0&&o[h]===0;h--)d++;if(h>=0&&d++,a=a.dblp(d),h<0)break;var g=o[h];Sd(g!==0),e.type==="affine"?g>0?a=a.mixedAdd(s[g-1>>1]):a=a.mixedAdd(s[-g-1>>1].neg()):g>0?a=a.add(s[g-1>>1]):a=a.add(s[-g-1>>1].neg())}return e.type==="affine"?a.toP():a};Ls.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,h=this._wnafT3,d=0,g,y,_;for(g=0;g<n;g++){_=r[g];var S=_._getNAFPoints(e);o[g]=S.wnd,a[g]=S.points}for(g=n-1;g>=1;g-=2){var I=g-1,O=g;if(o[I]!==1||o[O]!==1){h[I]=_d(i[I],o[I],this._bitLength),h[O]=_d(i[O],o[O],this._bitLength),d=Math.max(h[I].length,d),d=Math.max(h[O].length,d);continue}var P=[r[I],null,null,r[O]];r[I].y.cmp(r[O].y)===0?(P[1]=r[I].add(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg())):r[I].y.cmp(r[O].y.redNeg())===0?(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].add(r[O].neg())):(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],U=Xz(i[I],i[O]);for(d=Math.max(U[0].length,d),h[I]=new Array(d),h[O]=new Array(d),y=0;y<d;y++){var D=U[0][y]|0,F=U[1][y]|0;h[I][y]=T[(D+1)*3+(F+1)],h[O][y]=0,a[I]=P}}var j=this.jpoint(null,null,null),V=this._wnafT4;for(g=d;g>=0;g--){for(var B=0;g>=0;){var C=!0;for(y=0;y<n;y++)V[y]=h[y][g]|0,V[y]!==0&&(C=!1);if(!C)break;B++,g--}if(g>=0&&B++,j=j.dblp(B),g<0)break;for(y=0;y<n;y++){var K=V[y];K!==0&&(K>0?_=a[y][K-1>>1]:K<0&&(_=a[y][-K-1>>1].neg()),_.type==="affine"?j=j.mixedAdd(_):j=j.add(_))}}for(g=0;g<n;g++)a[g]=null;return s?j:j.toP()};function ni(t,e){this.curve=t,this.type=e,this.precomputed=null}Ls.BasePoint=ni;ni.prototype.eq=function(){throw new Error("Not implemented")};ni.prototype.validate=function(){return this.curve.validate(this)};Ls.prototype.decodePoint=function(e,r){e=wc.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Sd(e[e.length-1]%2===0):e[0]===7&&Sd(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};ni.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ni.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};ni.prototype.encode=function(e,r){return wc.encode(this._encode(r),e)};ni.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};ni.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};ni.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};ni.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};ni.prototype._getBeta=function(){return null};ni.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r}});var G9=X((bY,H9)=>{"use strict";var Zz=Kr(),at=un(),pg=Jn(),Ca=xc(),Qz=Zz.assert;function si(t){Ca.call(this,"short",t),this.a=new at(t.a,16).toRed(this.red),this.b=new at(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}pg(si,Ca);H9.exports=si;si.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new at(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new at(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],Qz(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new at(a.a,16),b:new at(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};si.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:at.mont(e),i=new at(2).toRed(r).redInvm(),n=i.redNeg(),s=new at(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};si.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new at(1),o=new at(0),a=new at(0),h=new at(1),d,g,y,_,S,I,O,P=0,T,U;i.cmpn(0)!==0;){var D=n.div(i);T=n.sub(D.mul(i)),U=a.sub(D.mul(s));var F=h.sub(D.mul(o));if(!y&&T.cmp(r)<0)d=O.neg(),g=s,y=T.neg(),_=U;else if(y&&++P===2)break;O=T,n=i,i=T,a=s,s=U,h=o,o=F}S=T.neg(),I=U;var j=y.sqr().add(_.sqr()),V=S.sqr().add(I.sqr());return V.cmp(j)>=0&&(S=d,I=g),y.negative&&(y=y.neg(),_=_.neg()),S.negative&&(S=S.neg(),I=I.neg()),[{a:y,b:_},{a:S,b:I}]};si.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),h=o.mul(n.a),d=s.mul(i.b),g=o.mul(n.b),y=e.sub(a).sub(h),_=d.add(g).neg();return{k1:y,k2:_}};si.prototype.pointFromX=function(e,r){e=new at(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};si.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};si.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),h=e[o],d=h._getBeta();a.k1.negative&&(a.k1.ineg(),h=h.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),n[o*2]=h,n[o*2+1]=d,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var g=this._wnafMulAdd(1,n,s,o*2,i),y=0;y<o*2;y++)n[y]=null,s[y]=null;return g};function At(t,e,r,i){Ca.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new at(e,16),this.y=new at(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pg(At,Ca.BasePoint);si.prototype.point=function(e,r,i){return new At(this,e,r,i)};si.prototype.pointFromJSON=function(e,r){return At.fromJSON(this,e,r)};At.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};At.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};At.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};At.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};At.prototype.isInfinity=function(){return this.inf};At.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};At.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};At.prototype.getX=function(){return this.x.fromRed()};At.prototype.getY=function(){return this.y.fromRed()};At.prototype.mul=function(e){return e=new at(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};At.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};At.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};At.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};At.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};At.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function zt(t,e,r,i){Ca.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new at(0)):(this.x=new at(e,16),this.y=new at(r,16),this.z=new at(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}pg(zt,Ca.BasePoint);si.prototype.jpoint=function(e,r,i){return new zt(this,e,r,i)};zt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};zt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};zt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),h=n.redSub(s),d=o.redSub(a);if(h.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=h.redSqr(),y=g.redMul(h),_=n.redMul(g),S=d.redSqr().redIAdd(y).redISub(_).redISub(_),I=d.redMul(_.redISub(S)).redISub(o.redMul(y)),O=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(S,I,O)};zt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),h=s.redSub(o);if(a.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),g=d.redMul(a),y=i.redMul(d),_=h.redSqr().redIAdd(g).redISub(y).redISub(y),S=h.redMul(y.redISub(_)).redISub(s.redMul(g)),I=this.z.redMul(a);return this.curve.jpoint(_,S,I)};zt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,h=this.z,d=h.redSqr().redSqr(),g=a.redAdd(a);for(r=0;r<e;r++){var y=o.redSqr(),_=g.redSqr(),S=_.redSqr(),I=y.redAdd(y).redIAdd(y).redIAdd(n.redMul(d)),O=o.redMul(_),P=I.redSqr().redISub(O.redAdd(O)),T=O.redISub(P),U=I.redMul(T);U=U.redIAdd(U).redISub(S);var D=g.redMul(h);r+1<e&&(d=d.redMul(S)),o=P,h=D,g=U}return this.curve.jpoint(o,g.redMul(s),h)};zt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};zt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n),d=h.redSqr().redISub(a).redISub(a),g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),e=d,r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),I=this.x.redAdd(_).redSqr().redISub(y).redISub(S);I=I.redIAdd(I);var O=y.redAdd(y).redIAdd(y),P=O.redSqr(),T=S.redIAdd(S);T=T.redIAdd(T),T=T.redIAdd(T),e=P.redISub(I).redISub(I),r=O.redMul(I.redISub(e)).redISub(T),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};zt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),d=h.redSqr().redISub(a).redISub(a);e=d;var g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),I=this.x.redSub(y).redMul(this.x.redAdd(y));I=I.redAdd(I).redIAdd(I);var O=S.redIAdd(S);O=O.redIAdd(O);var P=O.redAdd(O);e=I.redSqr().redISub(P),i=this.y.redAdd(this.z).redSqr().redISub(_).redISub(y);var T=_.redSqr();T=T.redIAdd(T),T=T.redIAdd(T),T=T.redIAdd(T),r=I.redMul(O.redISub(e)).redISub(T)}return this.curve.jpoint(e,r,i)};zt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var g=d.redMul(a),y=h.redSqr().redISub(g.redAdd(g)),_=g.redISub(y),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=h.redMul(_).redISub(S),O=i.redAdd(i).redMul(n);return this.curve.jpoint(y,I,O)};zt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var h=a.redSqr(),d=n.redIAdd(n);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=s.redIAdd(a).redSqr().redISub(o).redISub(h).redISub(d),y=r.redMul(g);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.x.redMul(h).redISub(y);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(g.redMul(d.redISub(g)).redISub(a.redMul(h)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=this.z.redAdd(a).redSqr().redISub(i).redISub(h);return this.curve.jpoint(_,S,I)};zt.prototype.mul=function(e,r){return e=new at(e,r),this.curve._wnafMul(this,e)};zt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};zt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};zt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};zt.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var Y9=X((gY,W9)=>{"use strict";var La=un(),J9=Jn(),Id=xc(),ek=Kr();function Fa(t){Id.call(this,"mont",t),this.a=new La(t.a,16).toRed(this.red),this.b=new La(t.b,16).toRed(this.red),this.i4=new La(4).toRed(this.red).redInvm(),this.two=new La(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}J9(Fa,Id);W9.exports=Fa;Fa.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function Mt(t,e,r){Id.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new La(e,16),this.z=new La(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}J9(Mt,Id.BasePoint);Fa.prototype.decodePoint=function(e,r){return this.point(ek.toArray(e,r),1)};Fa.prototype.point=function(e,r){return new Mt(this,e,r)};Fa.prototype.pointFromJSON=function(e){return Mt.fromJSON(this,e)};Mt.prototype.precompute=function(){};Mt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Mt.fromJSON=function(e,r){return new Mt(e,r[0],r[1]||e.one)};Mt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Mt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Mt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)};Mt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Mt.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),h=s.redMul(n),d=r.z.redMul(a.redAdd(h).redSqr()),g=r.x.redMul(a.redISub(h).redSqr());return this.curve.point(d,g)};Mt.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n};Mt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Mt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Mt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Mt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Mt.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var Q9=X((vY,Z9)=>{"use strict";var tk=Kr(),$n=un(),X9=Jn(),Ad=xc(),rk=tk.assert;function hn(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Ad.call(this,"edwards",t),this.a=new $n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new $n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new $n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),rk(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}X9(hn,Ad);Z9.exports=hn;hn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};hn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};hn.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)};hn.prototype.pointFromX=function(e,r){e=new $n(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var h=a.fromRed().isOdd();return(r&&!h||!r&&h)&&(a=a.redNeg()),this.point(e,a)};hn.prototype.pointFromY=function(e,r){e=new $n(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)};hn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function tt(t,e,r,i,n){Ad.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new $n(e,16),this.y=new $n(r,16),this.z=i?new $n(i,16):this.curve.one,this.t=n&&new $n(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}X9(tt,Ad.BasePoint);hn.prototype.pointFromJSON=function(e){return tt.fromJSON(this,e)};hn.prototype.point=function(e,r,i,n){return new tt(this,e,r,i,n)};tt.fromJSON=function(e,r){return new tt(e,r[0],r[1],r[2])};tt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};tt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};tt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),h=n.redSub(r),d=s.redMul(a),g=o.redMul(h),y=s.redMul(h),_=a.redMul(o);return this.curve.point(d,g,_,y)};tt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,h,d;if(this.curve.twisted){a=this.curve._mulA(r);var g=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(g.redSub(this.curve.two)),s=g.redMul(a.redSub(i)),o=g.redSqr().redSub(g).redSub(g)):(h=this.z.redSqr(),d=g.redSub(h).redISub(h),n=e.redSub(r).redISub(i).redMul(d),s=g.redMul(a.redSub(i)),o=g.redMul(d))}else a=r.redAdd(i),h=this.curve._mulC(this.z).redSqr(),d=a.redSub(h).redSub(h),n=this.curve._mulC(e.redISub(a)).redMul(d),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(d);return this.curve.point(n,s,o)};tt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};tt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),h=s.redAdd(n),d=i.redAdd(r),g=o.redMul(a),y=h.redMul(d),_=o.redMul(d),S=a.redMul(h);return this.curve.point(g,y,S,_)};tt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),h=i.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),g=r.redMul(a).redMul(d),y,_;return this.curve.twisted?(y=r.redMul(h).redMul(s.redSub(this.curve._mulA(n))),_=a.redMul(h)):(y=r.redMul(h).redMul(s.redSub(n)),_=this.curve._mulC(a).redMul(h)),this.curve.point(g,y,_)};tt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};tt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};tt.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)};tt.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)};tt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};tt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};tt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};tt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};tt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};tt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}};tt.prototype.toP=tt.prototype.normalize;tt.prototype.mixedAdd=tt.prototype.add});var bg=X(e7=>{"use strict";var Md=e7;Md.base=xc();Md.short=G9();Md.mont=Y9();Md.edwards=Q9()});var r7=X((yY,t7)=>{t7.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Od=X(s7=>{"use strict";var vg=s7,Fs=Xs(),gg=bg(),ik=Kr(),i7=ik.assert;function n7(t){t.type==="short"?this.curve=new gg.short(t):t.type==="edwards"?this.curve=new gg.edwards(t):this.curve=new gg.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i7(this.g.validate(),"Invalid curve"),i7(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}vg.PresetCurve=n7;function Bs(t,e){Object.defineProperty(vg,t,{configurable:!0,enumerable:!0,get:function(){var r=new n7(e);return Object.defineProperty(vg,t,{configurable:!0,enumerable:!0,value:r}),r}})}Bs("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Fs.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Bs("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Fs.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Bs("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Fs.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Bs("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Fs.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Bs("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Fs.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Bs("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fs.sha256,gRed:!1,g:["9"]});Bs("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Fs.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var mg;try{mg=r7()}catch{mg=void 0}Bs("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Fs.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",mg]})});var a7=X((xY,o7)=>{"use strict";var nk=un(),sk=Kr(),yg=sk.assert;function ar(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}o7.exports=ar;ar.fromPublic=function(e,r,i){return r instanceof ar?r:new ar(e,{pub:r,pubEnc:i})};ar.fromPrivate=function(e,r,i){return r instanceof ar?r:new ar(e,{priv:r,privEnc:i})};ar.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};ar.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};ar.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};ar.prototype._importPrivate=function(e,r){this.priv=new nk(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};ar.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?yg(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&yg(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};ar.prototype.derive=function(e){return e.validate()||yg(e.validate(),"public point not validated"),e.mul(this.priv).getX()};ar.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};ar.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};ar.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var u7=X((EY,c7)=>{"use strict";var Rd=un(),Eg=Kr(),ok=Eg.assert;function Nd(t,e){if(t instanceof Nd)return t;this._importDER(t,e)||(ok(t.r&&t.s,"Signature without r or s"),this.r=new Rd(t.r,16),this.s=new Rd(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}c7.exports=Nd;function ak(){this.place=0}function wg(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function f7(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Nd.prototype._importDER=function(e,r){e=Eg.toArray(e,r);var i=new ak;if(e[i.place++]!==48)return!1;var n=wg(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=wg(e,i);if(s===!1||e[i.place]&128)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=wg(e,i);if(a===!1||e.length!==a+i.place||e[i.place]&128)return!1;var h=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new Rd(o),this.s=new Rd(h),this.recoveryParam=null,!0};function xg(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Nd.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=f7(r),i=f7(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];xg(n,r.length),n=n.concat(r),n.push(2),xg(n,i.length);var s=n.concat(i),o=[48];return xg(o,s.length),o=o.concat(s),Eg.encode(o,e)}});var p7=X((_Y,l7)=>{"use strict";var yo=un(),h7=np(),fk=Kr(),_g=Od(),ck=_f(),d7=fk.assert,Sg=a7(),Pd=u7();function oi(t){if(!(this instanceof oi))return new oi(t);typeof t=="string"&&(d7(Object.prototype.hasOwnProperty.call(_g,t),"Unknown curve "+t),t=_g[t]),t instanceof _g.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}l7.exports=oi;oi.prototype.keyPair=function(e){return new Sg(this,e)};oi.prototype.keyFromPrivate=function(e,r){return Sg.fromPrivate(this,e,r)};oi.prototype.keyFromPublic=function(e,r){return Sg.fromPublic(this,e,r)};oi.prototype.genKeyPair=function(e){e||(e={});for(var r=new h7({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||ck(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new yo(2));;){var s=new yo(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};oi.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};oi.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new yo(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),h=new h7({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),d=this.n.sub(new yo(1)),g=0;;g++){var y=n.k?n.k(g):new yo(h.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var _=this.g.mul(y);if(!_.isInfinity()){var S=_.getX(),I=S.umod(this.n);if(I.cmpn(0)!==0){var O=y.invm(this.n).mul(I.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var P=(_.getY().isOdd()?1:0)|(S.cmp(I)!==0?2:0);return n.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),P^=1),new Pd({r:I,s:O,recoveryParam:P})}}}}}};oi.prototype.verify=function(e,r,i,n){e=this._truncateToN(new yo(e,16)),i=this.keyFromPublic(i,n),r=new Pd(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),h=a.mul(e).umod(this.n),d=a.mul(s).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(h,i.getPublic(),d),g.isInfinity()?!1:g.eqXToP(s)):(g=this.g.mulAdd(h,i.getPublic(),d),g.isInfinity()?!1:g.getX().umod(this.n).cmp(s)===0)};oi.prototype.recoverPubKey=function(t,e,r,i){d7((3&r)===r,"The recovery param is more than two bits"),e=new Pd(e,i);var n=this.n,s=new yo(t),o=e.r,a=e.s,h=r&1,d=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?o=this.curve.pointFromX(o.add(this.curve.n),h):o=this.curve.pointFromX(o,h);var g=e.r.invm(n),y=n.sub(s).mul(g).umod(n),_=a.mul(g).umod(n);return this.g.mulAdd(y,o,_)};oi.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new Pd(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")}});var m7=X((SY,v7)=>{"use strict";var Ec=Kr(),g7=Ec.assert,b7=Ec.parseBytes,Ba=Ec.cachedProperty;function Ot(t,e){this.eddsa=t,this._secret=b7(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=b7(e.pub)}Ot.fromPublic=function(e,r){return r instanceof Ot?r:new Ot(e,{pub:r})};Ot.fromSecret=function(e,r){return r instanceof Ot?r:new Ot(e,{secret:r})};Ot.prototype.secret=function(){return this._secret};Ba(Ot,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Ba(Ot,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Ba(Ot,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});Ba(Ot,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Ba(Ot,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Ba(Ot,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Ot.prototype.sign=function(e){return g7(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Ot.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};Ot.prototype.getSecret=function(e){return g7(this._secret,"KeyPair is public only"),Ec.encode(this.secret(),e)};Ot.prototype.getPublic=function(e){return Ec.encode(this.pubBytes(),e)};v7.exports=Ot});var x7=X((IY,w7)=>{"use strict";var uk=un(),Td=Kr(),y7=Td.assert,Dd=Td.cachedProperty,hk=Td.parseBytes;function wo(t,e){this.eddsa=t,typeof e!="object"&&(e=hk(e)),Array.isArray(e)&&(y7(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),y7(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof uk&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Dd(wo,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Dd(wo,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Dd(wo,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Dd(wo,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});wo.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};wo.prototype.toHex=function(){return Td.encode(this.toBytes(),"hex").toUpperCase()};w7.exports=wo});var A7=X((AY,I7)=>{"use strict";var dk=Xs(),lk=Od(),Ua=Kr(),pk=Ua.assert,_7=Ua.parseBytes,S7=m7(),E7=x7();function Ar(t){if(pk(t==="ed25519","only tested with ed25519 so far"),!(this instanceof Ar))return new Ar(t);t=lk[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=dk.sha512}I7.exports=Ar;Ar.prototype.sign=function(e,r){e=_7(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),h=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:h,Rencoded:o})};Ar.prototype.verify=function(e,r,i){if(e=_7(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)};Ar.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Ua.intFromLE(e.digest()).umod(this.curve.n)};Ar.prototype.keyFromPublic=function(e){return S7.fromPublic(this,e)};Ar.prototype.keyFromSecret=function(e){return S7.fromSecret(this,e)};Ar.prototype.makeSignature=function(e){return e instanceof E7?e:new E7(this,e)};Ar.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};Ar.prototype.decodePoint=function(e){e=Ua.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),n=(e[r]&128)!==0,s=Ua.intFromLE(i);return this.curve.pointFromY(s,n)};Ar.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Ar.prototype.decodeInt=function(e){return Ua.intFromLE(e)};Ar.prototype.isPoint=function(e){return e instanceof this.pointClass}});var O7=X(M7=>{"use strict";var xo=M7;xo.version=j9().version;xo.utils=Kr();xo.rand=_f();xo.curve=bg();xo.curves=Od();xo.ec=p7();xo.eddsa=A7()});var Dn=Pe(ln());var Iv=Pe(ln()),kc=Pe(yi());var Hr=class{};var nl=class extends Hr{constructor(e){super()}},Sv=kc.FIVE_SECONDS,zs={pulse:"heartbeat_pulse"},zc=class t extends nl{constructor(e){super(e),this.events=new Iv.EventEmitter,this.interval=Sv,this.interval=e?.interval||Sv}static async init(e){let r=new t(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,kc.toMiliseconds)(this.interval))}pulse(){this.events.emit(zs.pulse)}};var lE=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,pE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,bE=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function gE(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){vE(t);return}return e}function vE(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ga(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);let r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!bE.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(lE.test(t)||pE.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,gE)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}function mE(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function gt(t,...e){try{return mE(t(...e))}catch(r){return Promise.reject(r)}}function yE(t){let e=typeof t;return t===null||e!=="object"&&e!=="function"}function wE(t){let e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Ja(t){if(yE(t))return String(t);if(wE(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Ja(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}var sl="base64:";function Av(t){return typeof t=="string"?t:sl+EE(t)}function Mv(t){return typeof t!="string"||!t.startsWith(sl)?t:xE(t.slice(sl.length))}function xE(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function EE(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function dr(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Ov(...t){return dr(t.join(":"))}function Wa(t){return t=dr(t),t?t+":":""}function Rv(t,e){if(e===void 0)return!0;let r=0,i=t.indexOf(":");for(;i>-1;)r++,i=t.indexOf(":",i+1);return r<=e}function Nv(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}var _E="memory",SE=()=>{let t=new Map;return{name:_E,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Dv(t={}){let e={mounts:{"":t.driver||SE()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=d=>{for(let g of e.mountpoints)if(d.startsWith(g))return{base:g,relativeKey:d.slice(g.length),driver:e.mounts[g]};return{base:"",relativeKey:d,driver:e.mounts[""]}},i=(d,g)=>e.mountpoints.filter(y=>y.startsWith(d)||g&&d.startsWith(y)).map(y=>({relativeBase:d.length>y.length?d.slice(y.length):void 0,mountpoint:y,driver:e.mounts[y]})),n=(d,g)=>{if(e.watching){g=dr(g);for(let y of e.watchListeners)y(d,g)}},s=async()=>{if(!e.watching){e.watching=!0;for(let d in e.mounts)e.unwatch[d]=await Pv(e.mounts[d],n,d)}},o=async()=>{if(e.watching){for(let d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},a=(d,g,y)=>{let _=new Map,S=I=>{let O=_.get(I.base);return O||(O={driver:I.driver,base:I.base,items:[]},_.set(I.base,O)),O};for(let I of d){let O=typeof I=="string",P=dr(O?I:I.key),T=O?void 0:I.value,U=O||!I.options?g:{...g,...I.options},D=r(P);S(D).items.push({key:P,value:T,relativeKey:D.relativeKey,options:U})}return Promise.all([..._.values()].map(I=>y(I))).then(I=>I.flat())},h={hasItem(d,g={}){d=dr(d);let{relativeKey:y,driver:_}=r(d);return gt(_.hasItem,y,g)},getItem(d,g={}){d=dr(d);let{relativeKey:y,driver:_}=r(d);return gt(_.getItem,y,g).then(S=>Ga(S))},getItems(d,g={}){return a(d,g,y=>y.driver.getItems?gt(y.driver.getItems,y.items.map(_=>({key:_.relativeKey,options:_.options})),g).then(_=>_.map(S=>({key:Ov(y.base,S.key),value:Ga(S.value)}))):Promise.all(y.items.map(_=>gt(y.driver.getItem,_.relativeKey,_.options).then(S=>({key:_.key,value:Ga(S)})))))},getItemRaw(d,g={}){d=dr(d);let{relativeKey:y,driver:_}=r(d);return _.getItemRaw?gt(_.getItemRaw,y,g):gt(_.getItem,y,g).then(S=>Mv(S))},async setItem(d,g,y={}){if(g===void 0)return h.removeItem(d);d=dr(d);let{relativeKey:_,driver:S}=r(d);S.setItem&&(await gt(S.setItem,_,Ja(g),y),S.watch||n("update",d))},async setItems(d,g){await a(d,g,async y=>{if(y.driver.setItems)return gt(y.driver.setItems,y.items.map(_=>({key:_.relativeKey,value:Ja(_.value),options:_.options})),g);y.driver.setItem&&await Promise.all(y.items.map(_=>gt(y.driver.setItem,_.relativeKey,Ja(_.value),_.options)))})},async setItemRaw(d,g,y={}){if(g===void 0)return h.removeItem(d,y);d=dr(d);let{relativeKey:_,driver:S}=r(d);if(S.setItemRaw)await gt(S.setItemRaw,_,g,y);else if(S.setItem)await gt(S.setItem,_,Av(g),y);else return;S.watch||n("update",d)},async removeItem(d,g={}){typeof g=="boolean"&&(g={removeMeta:g}),d=dr(d);let{relativeKey:y,driver:_}=r(d);_.removeItem&&(await gt(_.removeItem,y,g),(g.removeMeta||g.removeMata)&&await gt(_.removeItem,y+"$",g),_.watch||n("remove",d))},async getMeta(d,g={}){typeof g=="boolean"&&(g={nativeOnly:g}),d=dr(d);let{relativeKey:y,driver:_}=r(d),S=Object.create(null);if(_.getMeta&&Object.assign(S,await gt(_.getMeta,y,g)),!g.nativeOnly){let I=await gt(_.getItem,y+"$",g).then(O=>Ga(O));I&&typeof I=="object"&&(typeof I.atime=="string"&&(I.atime=new Date(I.atime)),typeof I.mtime=="string"&&(I.mtime=new Date(I.mtime)),Object.assign(S,I))}return S},setMeta(d,g,y={}){return this.setItem(d+"$",g,y)},removeMeta(d,g={}){return this.removeItem(d+"$",g)},async getKeys(d,g={}){d=Wa(d);let y=i(d,!0),_=[],S=[],I=!0;for(let P of y){P.driver.flags?.maxDepth||(I=!1);let T=await gt(P.driver.getKeys,P.relativeBase,g);for(let U of T){let D=P.mountpoint+dr(U);_.some(F=>D.startsWith(F))||S.push(D)}_=[P.mountpoint,..._.filter(U=>!U.startsWith(P.mountpoint))]}let O=g.maxDepth!==void 0&&!I;return S.filter(P=>(!O||Rv(P,g.maxDepth))&&Nv(P,d))},async clear(d,g={}){d=Wa(d),await Promise.all(i(d,!1).map(async y=>{if(y.driver.clear)return gt(y.driver.clear,y.relativeBase,g);if(y.driver.removeItem){let _=await y.driver.getKeys(y.relativeBase||"",g);return Promise.all(_.map(S=>y.driver.removeItem(S,g)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>Tv(d)))},async watch(d){return await s(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(g=>g!==d),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(d,g){if(d=Wa(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((y,_)=>_.length-y.length)),e.mounts[d]=g,e.watching&&Promise.resolve(Pv(g,n,d)).then(y=>{e.unwatch[d]=y}).catch(console.error),h},async unmount(d,g=!0){d=Wa(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&(e.unwatch[d]?.(),delete e.unwatch[d]),g&&await Tv(e.mounts[d]),e.mountpoints=e.mountpoints.filter(y=>y!==d),delete e.mounts[d])},getMount(d=""){d=dr(d)+":";let g=r(d);return{driver:g.driver,base:g.base}},getMounts(d="",g={}){return d=dr(d),i(d,g.parents).map(_=>({driver:_.driver,base:_.mountpoint}))},keys:(d,g={})=>h.getKeys(d,g),get:(d,g={})=>h.getItem(d,g),set:(d,g,y={})=>h.setItem(d,g,y),has:(d,g={})=>h.hasItem(d,g),del:(d,g={})=>h.removeItem(d,g),remove:(d,g={})=>h.removeItem(d,g)};return h}function Pv(t,e,r){return t.watch?t.watch((i,n)=>e(i,r+n)):()=>{}}async function Tv(t){typeof t.dispose=="function"&&await gt(t.dispose)}function ks(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function al(t,e){let r,i=()=>{if(r)return r;let n=indexedDB.open(t);return n.onupgradeneeded=()=>n.result.createObjectStore(e),r=ks(n),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(n,s)=>i().then(o=>s(o.transaction(e,n).objectStore(e)))}var ol;function Ya(){return ol||(ol=al("keyval-store","keyval")),ol}function fl(t,e=Ya()){return e("readonly",r=>ks(r.get(t)))}function Cv(t,e,r=Ya()){return r("readwrite",i=>(i.put(e,t),ks(i.transaction)))}function Lv(t,e=Ya()){return e("readwrite",r=>(r.delete(t),ks(r.transaction)))}function Fv(t=Ya()){return t("readwrite",e=>(e.clear(),ks(e.transaction)))}function IE(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ks(t.transaction)}function Bv(t=Ya()){return t("readonly",e=>{if(e.getAllKeys)return ks(e.getAllKeys());let r=[];return IE(e,i=>r.push(i.key)).then(()=>r)})}var AE=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),ME=t=>{let e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function Gr(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ME(t)}catch{return t}}function Wt(t){return typeof t=="string"?t:AE(t)||""}var OE="idb-keyval",RE=(t={})=>{let e=t.base&&t.base.length>0?`${t.base}:`:"",r=n=>e+n,i;return t.dbName&&t.storeName&&(i=al(t.dbName,t.storeName)),{name:OE,options:t,async hasItem(n){return!(typeof await fl(r(n),i)>"u")},async getItem(n){return await fl(r(n),i)??null},setItem(n,s){return Cv(r(n),s,i)},removeItem(n){return Lv(r(n),i)},getKeys(){return Bv(i)},clear(){return Fv(i)}}},NE="WALLET_CONNECT_V2_INDEXED_DB",PE="keyvaluestorage",ul=class{constructor(){this.indexedDb=Dv({driver:RE({dbName:NE,storeName:PE})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Wt(r))}async removeItem(e){await this.indexedDb.removeItem(e)}},cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},jc={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){let r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof cl<"u"&&cl.localStorage?jc.exports=cl.localStorage:typeof window<"u"&&window.localStorage?jc.exports=window.localStorage:jc.exports=new e})();function TE(t){var e;return[t[0],Gr((e=t[1])!=null?e:"")]}var hl=class{constructor(){this.localStorage=jc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(TE)}async getItem(e){let r=this.localStorage.getItem(e);if(r!==null)return Gr(r)}async setItem(e,r){this.localStorage.setItem(e,Wt(r))}async removeItem(e){this.localStorage.removeItem(e)}},DE="wc_storage_version",Uv=1,CE=async(t,e,r)=>{let i=DE,n=await e.getItem(i);if(n&&n>=Uv){r(e);return}let s=await t.getKeys();if(!s.length){r(e);return}let o=[];for(;s.length;){let a=s.shift();if(!a)continue;let h=a.toLowerCase();if(h.includes("wc@")||h.includes("walletconnect")||h.includes("wc_")||h.includes("wallet_connect")){let d=await t.getItem(a);await e.setItem(a,d),o.push(a)}}await e.setItem(i,Uv),r(e),LE(t,o)},LE=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})},$c=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};let e=new hl;this.storage=e;try{let r=new ul;CE(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var pn=Pe(pl()),ml=Pe(pl());var JE={level:"info"},Qa="custom_context",yl=1e3*1024,bl=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Gc=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let r=new bl(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let r=e.value;return e=e.next,{done:!1,value:r}}}}},Jc=class{constructor(e,r=yl){this.level=e??"error",this.levelValue=pn.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Gc(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===pn.levels.values.error?console.error(e):r===pn.levels.values.warn?console.warn(e):r===pn.levels.values.debug?console.debug(e):r===pn.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Wt({timestamp:new Date().toISOString(),log:e}));let r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Gc(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let r=this.getLogArray();return r.push(Wt({extraMetadata:e})),new Blob(r,{type:"application/json"})}},gl=class{constructor(e,r=yl){this.baseChunkLogger=new Jc(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let r=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}},vl=class{constructor(e,r=yl){this.baseChunkLogger=new Jc(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}},WE=Object.defineProperty,YE=Object.defineProperties,XE=Object.getOwnPropertyDescriptors,Kv=Object.getOwnPropertySymbols,ZE=Object.prototype.hasOwnProperty,QE=Object.prototype.propertyIsEnumerable,Vv=(t,e,r)=>e in t?WE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wc=(t,e)=>{for(var r in e||(e={}))ZE.call(e,r)&&Vv(t,r,e[r]);if(Kv)for(var r of Kv(e))QE.call(e,r)&&Vv(t,r,e[r]);return t},Yc=(t,e)=>YE(t,XE(e));function wl(t){return Yc(Wc({},t),{level:t?.level||JE.level})}function e_(t,e=Qa){return t[e]||""}function t_(t,e,r=Qa){return t[r]=e,t}function mr(t,e=Qa){let r="";return typeof t.bindings>"u"?r=e_(t,e):r=t.bindings().context||"",r}function r_(t,e,r=Qa){let i=mr(t,r);return i.trim()?`${i}/${e}`:e}function lr(t,e,r=Qa){let i=r_(t,e,r),n=t.child({context:i});return t_(n,i,r)}function i_(t){var e,r;let i=new gl((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:(0,pn.default)(Yc(Wc({},t.opts),{level:"trace",browser:Yc(Wc({},(r=t.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function n_(t){var e;let r=new vl((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:(0,pn.default)(Yc(Wc({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function Hv(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?i_(t):n_(t)}var Gv=Pe(ln()),Xc=class extends Hr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};var Zc=class extends Hr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},Qc=class{constructor(e,r){this.logger=e,this.core=r}},eu=class extends Hr{constructor(e,r){super(),this.relayer=e,this.logger=r}},tu=class extends Hr{constructor(e){super()}},ru=class{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}};var iu=class extends Hr{constructor(e,r){super(),this.relayer=e,this.logger=r}};var nu=class extends Hr{constructor(e,r){super(),this.core=e,this.logger=r}};var su=class{constructor(e,r,i){this.core=e,this.logger=r,this.store=i}},ou=class{constructor(e,r){this.projectId=e,this.logger=r}},au=class{constructor(e,r,i){this.core=e,this.logger=r,this.telemetryEnabled=i}};var Ce=Pe(yi());var uf=Pe(ql()),Qm=Pe(Vn()),e2=Pe(yi());var _m="EdDSA",Sm="JWT",rf=".",nf="base64url",zl="utf8",kl="utf8",Im=":",Am="did",Mm="key",jl="base58btc",Om="z",Rm="K36";function sf(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Vs(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));let r=sf(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}var Gl={};hr(Gl,{identity:()=>nS});function Q_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,h=t.charAt(0),d=Math.log(a)/Math.log(256),g=Math.log(256)/Math.log(a);function y(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,P=0,T=0,U=I.length;T!==U&&I[T]===0;)T++,O++;for(var D=(U-T)*g+1>>>0,F=new Uint8Array(D);T!==U;){for(var j=I[T],V=0,B=D-1;(j!==0||V<P)&&B!==-1;B--,V++)j+=256*F[B]>>>0,F[B]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");P=V,T++}for(var C=D-P;C!==D&&F[C]===0;)C++;for(var K=h.repeat(O);C<D;++C)K+=t.charAt(F[C]);return K}function _(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var P=0,T=0;I[O]===h;)P++,O++;for(var U=(I.length-O)*d+1>>>0,D=new Uint8Array(U);I[O];){var F=r[I.charCodeAt(O)];if(F===255)return;for(var j=0,V=U-1;(F!==0||j<T)&&V!==-1;V--,j++)F+=a*D[V]>>>0,D[V]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");T=j,O++}if(I[O]!==" "){for(var B=U-T;B!==U&&D[B]===0;)B++;for(var C=new Uint8Array(P+(U-B)),K=P;B!==U;)C[K++]=D[B++];return C}}}function S(I){var O=_(I);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:_,decode:S}}var eS=Q_,tS=eS,Nm=tS;var j$=new Uint8Array(0);var Pm=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},gn=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Tm=t=>new TextEncoder().encode(t),Dm=t=>new TextDecoder().decode(t);var $l=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Kl=class{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Lm(this,e)}},Vl=class{constructor(e){this.decoders=e}or(e){return Lm(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Lm=(t,e)=>new Vl({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Hl=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new $l(e,r,i),this.decoder=new Kl(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},qo=({name:t,prefix:e,encode:r,decode:i})=>new Hl(t,e,r,i),Gn=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=Nm(r,e);return qo({prefix:t,name:e,encode:i,decode:s=>gn(n(s))})},rS=(t,e,r,i)=>{let n={};for(let g=0;g<e.length;++g)n[e[g]]=g;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,d=0;for(let g=0;g<s;++g){let y=n[t[g]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|y,a+=r,a>=8&&(a-=8,o[d++]=255&h>>a)}if(a>=r||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o},iS=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let h=0;h<t.length;++h)for(a=a<<8|t[h],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},it=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>qo({prefix:e,name:t,encode(n){return iS(n,i,r)},decode(n){return rS(n,i,r,t)}});var nS=qo({prefix:"\0",name:"identity",encode:t=>Dm(t),decode:t=>Tm(t)});var Jl={};hr(Jl,{base2:()=>sS});var sS=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Wl={};hr(Wl,{base8:()=>oS});var oS=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yl={};hr(Yl,{base10:()=>aS});var aS=Gn({prefix:"9",name:"base10",alphabet:"0123456789"});var Xl={};hr(Xl,{base16:()=>fS,base16upper:()=>cS});var fS=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cS=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Zl={};hr(Zl,{base32:()=>zo,base32hex:()=>lS,base32hexpad:()=>bS,base32hexpadupper:()=>gS,base32hexupper:()=>pS,base32pad:()=>hS,base32padupper:()=>dS,base32upper:()=>uS,base32z:()=>vS});var zo=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uS=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hS=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dS=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lS=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pS=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bS=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gS=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vS=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ql={};hr(Ql,{base36:()=>mS,base36upper:()=>yS});var mS=Gn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yS=Gn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var e0={};hr(e0,{base58btc:()=>Ui,base58flickr:()=>wS});var Ui=Gn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wS=Gn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var t0={};hr(t0,{base64:()=>xS,base64pad:()=>ES,base64url:()=>_S,base64urlpad:()=>SS});var xS=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ES=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_S=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),SS=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var r0={};hr(r0,{base256emoji:()=>RS});var Fm=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),IS=Fm.reduce((t,e,r)=>(t[r]=e,t),[]),AS=Fm.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function MS(t){return t.reduce((e,r)=>(e+=IS[r],e),"")}function OS(t){let e=[];for(let r of t){let i=AS[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}var RS=qo({prefix:"\u{1F680}",name:"base256emoji",encode:MS,decode:OS});var o0={};hr(o0,{sha256:()=>JS,sha512:()=>WS});var NS=qm,Bm=128,PS=127,TS=~PS,DS=Math.pow(2,31);function qm(t,e,r){e=e||[],r=r||0;for(var i=r;t>=DS;)e[r++]=t&255|Bm,t/=128;for(;t&TS;)e[r++]=t&255|Bm,t>>>=7;return e[r]=t|0,qm.bytes=r-i+1,e}var CS=i0,LS=128,Um=127;function i0(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw i0.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Um)<<n:(o&Um)*Math.pow(2,n),n+=7}while(o>=LS);return i0.bytes=s-i,r}var FS=Math.pow(2,7),BS=Math.pow(2,14),US=Math.pow(2,21),qS=Math.pow(2,28),zS=Math.pow(2,35),kS=Math.pow(2,42),jS=Math.pow(2,49),$S=Math.pow(2,56),KS=Math.pow(2,63),VS=function(t){return t<FS?1:t<BS?2:t<US?3:t<qS?4:t<zS?5:t<kS?6:t<jS?7:t<$S?8:t<KS?9:10},HS={encode:NS,decode:CS,encodingLength:VS},GS=HS,of=GS;var af=(t,e=0)=>[of.decode(t,e),of.decode.bytes],ko=(t,e,r=0)=>(of.encode(t,e,r),e),jo=t=>of.encodingLength(t);var Hs=(t,e)=>{let r=e.byteLength,i=jo(t),n=i+jo(r),s=new Uint8Array(n+r);return ko(t,s,0),ko(r,s,i),s.set(e,n),new $o(t,r,e,s)},zm=t=>{let e=gn(t),[r,i]=af(e),[n,s]=af(e.subarray(i)),o=e.subarray(i+s);if(o.byteLength!==n)throw new Error("Incorrect length");return new $o(r,n,o,e)},km=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Pm(t.bytes,e.bytes),$o=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}};var s0=({name:t,code:e,encode:r})=>new n0(t,e,r),n0=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Hs(this.code,r):r.then(i=>Hs(this.code,i))}else throw Error("Unknown type, must be binary type")}};var $m=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),JS=s0({name:"sha2-256",code:18,encode:$m("SHA-256")}),WS=s0({name:"sha2-512",code:19,encode:$m("SHA-512")});var a0={};hr(a0,{identity:()=>ZS});var Km=0,YS="identity",Vm=gn,XS=t=>Hs(Km,Vm(t)),ZS={code:Km,name:YS,encode:Vm,digest:XS};var cK=new TextEncoder,uK=new TextDecoder;var gu=class t{constructor(e,r,i,n){this.code=r,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:bu,byteLength:bu,code:pu,version:pu,multihash:pu,bytes:pu,_baseCache:bu,asCID:bu})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==cf)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==nI)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,i=Hs(e,r);return t.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&km(this.multihash,e.multihash)}toString(e){let{bytes:r,version:i,_baseCache:n}=this;switch(i){case 0:return rI(r,n,e||Ui.encoder);default:return iI(r,n,e||zo.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return oI(/^0\.0/,aI),!!(e&&(e[Gm]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:i,multihash:n,bytes:s}=e;return new t(r,i,n,s||Hm(r,i,n.bytes))}else if(e!=null&&e[Gm]===!0){let{version:r,multihash:i,code:n}=e,s=zm(i);return t.create(r,n,s)}else return null}static create(e,r,i){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==cf)throw new Error(`Version 0 CID must use dag-pb (code: ${cf}) block encoding`);return new t(e,r,i,i.bytes)}case 1:{let n=Hm(e,r,i.bytes);return new t(e,r,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,cf,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,i]=t.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),i=r.size-r.multihashSize,n=gn(e.subarray(i,i+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=n.subarray(r.multihashSize-r.digestSize),o=new $o(r.multihashCode,r.digestSize,s,n);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,i=()=>{let[y,_]=af(e.subarray(r));return r+=_,y},n=i(),s=cf;if(n===18?(n=0,r=0):n===1&&(s=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=r,a=i(),h=i(),d=r+h,g=d-o;return{version:n,codec:s,multihashCode:a,digestSize:h,multihashSize:g,size:d}}static parse(e,r){let[i,n]=tI(e,r),s=t.decode(n);return s._baseCache.set(i,e),s}},tI=(t,e)=>{switch(t[0]){case"Q":{let r=e||Ui;return[Ui.prefix,r.decode(`${Ui.prefix}${t}`)]}case Ui.prefix:{let r=e||Ui;return[Ui.prefix,r.decode(t)]}case zo.prefix:{let r=e||zo;return[zo.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},rI=(t,e,r)=>{let{prefix:i}=r;if(i!==Ui.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=e.get(i);if(n==null){let s=r.encode(t).slice(1);return e.set(i,s),s}else return n},iI=(t,e,r)=>{let{prefix:i}=r,n=e.get(i);if(n==null){let s=r.encode(t);return e.set(i,s),s}else return n},cf=112,nI=18,Hm=(t,e,r)=>{let i=jo(t),n=i+jo(e),s=new Uint8Array(n+r.byteLength);return ko(t,s,0),ko(e,s,i),s.set(r,n),s},Gm=Symbol.for("@ipld/js-cid/CID"),pu={writable:!1,configurable:!1,enumerable:!0},bu={writable:!1,enumerable:!1,configurable:!1},sI="0.0.0-dev",oI=(t,e)=>{if(t.test(sI))console.warn(e);else throw new Error(e)},aI=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var vn={...Gl,...Jl,...Wl,...Yl,...Xl,...Zl,...Ql,...e0,...t0,...r0},mK={...o0,...a0};function Wm(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var Jm=Wm("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),f0=Wm("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=sf(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),fI={utf8:Jm,"utf-8":Jm,hex:vn.base16,latin1:f0,ascii:f0,binary:f0,...vn},vu=fI;function nt(t,e="utf8"){let r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ut(t,e="utf8"){let r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Ym(t){return Gr(nt(ut(t,nf),zl))}function mu(t){return nt(ut(Wt(t),zl),nf)}function yu(t){let e=ut(Rm,jl),r=Om+nt(Vs([e,t]),jl);return[Am,Mm,r].join(Im)}function cI(t){return nt(t,nf)}function uI(t){return ut(t,nf)}function Xm(t){return ut([mu(t.header),mu(t.payload)].join(rf),kl)}function Zm(t){return[mu(t.header),mu(t.payload),cI(t.signature)].join(rf)}function Ko(t){let e=t.split(rf),r=Ym(e[0]),i=Ym(e[1]),n=uI(e[2]),s=ut(e.slice(0,2).join(rf),kl);return{header:r,payload:i,signature:n,data:s}}function c0(t=(0,Qm.randomBytes)(32)){return uf.generateKeyPairFromSeed(t)}async function t2(t,e,r,i,n=(0,e2.fromMiliseconds)(Date.now())){let s={alg:_m,typ:Sm},o=yu(i.publicKey),a=n+r,h={iss:o,sub:t,aud:e,iat:n,exp:a},d=Xm({header:s,payload:h}),g=uf.sign(i.secretKey,d);return Zm({header:s,payload:h,signature:g})}var r2=function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},lI=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}();var pI=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}();var bI=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}();var gI=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();var vI=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();var mI=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,yI=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,i2=3,wI=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",mI]],n2=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function o2(t){return t?s2(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new vI:typeof navigator<"u"?s2(navigator.userAgent):_I()}function xI(t){return t!==""&&wI.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function s2(t){var e=xI(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new gI;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<i2&&(n=r2(r2([],n,!0),SI(i2-n.length),!0)):n=[];var s=n.join("."),o=EI(t),a=yI.exec(t);return a&&a[1]?new bI(r,s,o,a[1]):new lI(r,s,o)}function EI(t){for(var e=0,r=n2.length;e<r;e++){var i=n2[e],n=i[0],s=i[1],o=s.exec(t);if(o)return n}return null}function _I(){var t=typeof process<"u"&&process.version;return t?new pI(process.version.slice(1)):null}function SI(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Rn=Pe(yi()),ss=Pe(Ho()),W3=Pe(xu()),fa=Pe(d0());var F2=Pe(A2());var M2="logger/5.8.0";var O2=!1,R2=!1,_u={debug:1,default:2,info:2,warning:3,error:4,off:5},N2=_u.default,l0=null;function VI(){try{let t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken implementation")}catch(t){return t.message}return null}var P2=VI(),p0;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(p0||(p0={}));var wi;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(wi||(wi={}));var T2="0123456789abcdef",pt=class t{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){let i=e.toLowerCase();_u[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(N2>_u[i])&&console.log.apply(console,r)}debug(...e){this._log(t.levels.DEBUG,e)}info(...e){this._log(t.levels.INFO,e)}warn(...e){this._log(t.levels.WARNING,e)}makeError(e,r,i){if(R2)return this.makeError("censored error",r,{});r||(r=t.errors.UNKNOWN_ERROR),i||(i={});let n=[];Object.keys(i).forEach(h=>{let d=i[h];try{if(d instanceof Uint8Array){let g="";for(let y=0;y<d.length;y++)g+=T2[d[y]>>4],g+=T2[d[y]&15];n.push(h+"=Uint8Array(0x"+g+")")}else n.push(h+"="+JSON.stringify(d))}catch{n.push(h+"="+JSON.stringify(i[h].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);let s=e,o="";switch(r){case wi.NUMERIC_FAULT:{o="NUMERIC_FAULT";let h=e;switch(h){case"overflow":case"underflow":case"division-by-zero":o+="-"+h;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case wi.CALL_EXCEPTION:case wi.INSUFFICIENT_FUNDS:case wi.MISSING_NEW:case wi.NONCE_EXPIRED:case wi.REPLACEMENT_UNDERPRICED:case wi.TRANSACTION_REPLACED:case wi.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");let a=new Error(e);return a.reason=s,a.code=r,Object.keys(i).forEach(function(h){a[h]=i[h]}),a}throwError(e,r,i){throw this.makeError(e,r,i)}throwArgumentError(e,r,i){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(e,r,i,n){e||this.throwError(r,i,n)}assertArgument(e,r,i,n){e||this.throwArgumentError(r,i,n)}checkNormalize(e){e==null&&(e="platform missing String.prototype.normalize"),P2&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:P2})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,i){i?i=": "+i:i="",e<r&&this.throwError("missing argument"+i,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+i,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return l0||(l0=new t(M2)),l0}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),O2){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}R2=!!e,O2=!!r}static setLogLevel(e){let r=_u[e.toLowerCase()];if(r==null){t.globalLogger().warn("invalid log level - "+e);return}N2=r}static from(e){return new t(e)}};pt.errors=wi;pt.levels=p0;var D2="bytes/5.8.0";var dt=new pt(D2);function L2(t){return!!t.toHexString}function Go(t){return t.slice||(t.slice=function(){let e=Array.prototype.slice.call(arguments);return Go(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function g0(t){return xi(t)&&!(t.length%2)||v0(t)}function C2(t){return typeof t=="number"&&t==t&&t%1===0}function v0(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!C2(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){let r=t[e];if(!C2(r)||r<0||r>=256)return!1}return!0}function Ye(t,e){if(e||(e={}),typeof t=="number"){dt.checkSafeUint53(t,"invalid arrayify value");let r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Go(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),L2(t)&&(t=t.toHexString()),xi(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":dt.throwArgumentError("hex data is odd-length","value",t));let i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return Go(new Uint8Array(i))}return v0(t)?Go(new Uint8Array(t)):dt.throwArgumentError("invalid arrayify value","value",t)}function hf(t){let e=t.map(n=>Ye(n)),r=e.reduce((n,s)=>n+s.length,0),i=new Uint8Array(r);return e.reduce((n,s)=>(i.set(s,n),n+s.length),0),Go(i)}function HI(t,e){t=Ye(t),t.length>e&&dt.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(e);return r.set(t,e-t.length),Go(r)}function xi(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}var b0="0123456789abcdef";function Nt(t,e){if(e||(e={}),typeof t=="number"){dt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=b0[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),L2(t))return t.toHexString();if(xi(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":dt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(v0(t)){let r="0x";for(let i=0;i<t.length;i++){let n=t[i];r+=b0[(n&240)>>4]+b0[n&15]}return r}return dt.throwArgumentError("invalid hexlify value","value",t)}function df(t){if(typeof t!="string")t=Nt(t);else if(!xi(t)||t.length%2)return null;return(t.length-2)/2}function Js(t,e,r){return typeof t!="string"?t=Nt(t):(!xi(t)||t.length%2)&&dt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function yn(t,e){for(typeof t!="string"?t=Nt(t):xi(t)||dt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&dt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function lf(t){let e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(g0(t)){let r=Ye(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Nt(r.slice(0,32)),e.s=Nt(r.slice(32,64))):r.length===65?(e.r=Nt(r.slice(0,32)),e.s=Nt(r.slice(32,64)),e.v=r[64]):dt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:dt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Nt(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){let n=HI(Ye(e._vs),32);e._vs=Nt(n);let s=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&dt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;let o=Nt(n);e.s==null?e.s=o:e.s!==o&&dt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?dt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{let n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&dt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!xi(e.r)?dt.throwArgumentError("signature missing or invalid r","signature",t):e.r=yn(e.r,32),e.s==null||!xi(e.s)?dt.throwArgumentError("signature missing or invalid s","signature",t):e.s=yn(e.s,32);let r=Ye(e.s);r[0]>=128&&dt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);let i=Nt(r);e._vs&&(xi(e._vs)||dt.throwArgumentError("signature invalid _vs","signature",t),e._vs=yn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&dt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function qi(t){return"0x"+F2.default.keccak_256(Ye(t))}var q2=Pe(y0());var U2="bignumber/5.8.0";var GI=q2.default.BN,hV=new pt(U2);function w0(t){return new GI(t,36).toString(16)}var z2="strings/5.8.0";var k2=new pt(z2),pf;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(pf||(pf={}));var Ws;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Ws||(Ws={}));function WI(t,e,r,i,n){return k2.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function j2(t,e,r,i,n){if(t===Ws.BAD_PREFIX||t===Ws.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===Ws.OVERRUN?r.length-e-1:0}function YI(t,e,r,i,n){return t===Ws.OVERLONG?(i.push(n),0):(i.push(65533),j2(t,e,r,i,n))}var XI=Object.freeze({error:WI,ignore:j2,replace:YI});function wn(t,e=pf.current){e!=pf.current&&(k2.checkNormalize(),t=t.normalize(e));let r=[];for(let i=0;i<t.length;i++){let n=t.charCodeAt(i);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(n&63|128);else if((n&64512)==55296){i++;let s=t.charCodeAt(i);if(i>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");let o=65536+((n&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(n&63|128)}return Ye(r)}var $2="address/5.8.0";var bf=new pt($2);function K2(t){xi(t,20)||bf.throwArgumentError("invalid address","address",t),t=t.toLowerCase();let e=t.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=e[n].charCodeAt(0);let i=Ye(qi(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}var ZI=9007199254740991;function QI(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}var x0={};for(let t=0;t<10;t++)x0[String(t)]=String(t);for(let t=0;t<26;t++)x0[String.fromCharCode(65+t)]=String(10+t);var V2=Math.floor(QI(ZI));function eA(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(i=>x0[i]).join("");for(;e.length>=V2;){let i=e.substring(0,V2);e=parseInt(i,10)%97+e.substring(i.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Iu(t){let e=null;if(typeof t!="string"&&bf.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=K2(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&bf.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==eA(t)&&bf.throwArgumentError("bad icap checksum","address",t),e=w0(t.substring(4));e.length<40;)e="0"+e;e=K2("0x"+e)}else bf.throwArgumentError("invalid address","address",t);return e}var G2="properties/5.8.0";var FV=new pt(G2);function Jo(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var Le=Pe(y0()),Hi=Pe(Xs());function ta(t,e,r){return r={path:e,exports:{},require:function(i,n){return _M(i,n??r.path)}},t(r,r.exports),r.exports}function _M(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var C0=Ny;function Ny(t,e){if(!t)throw new Error(e||"Assertion failed")}Ny.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var Ii=ta(function(t,e){"use strict";var r=e;function i(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var h=[];if(typeof o!="string"){for(var d=0;d<o.length;d++)h[d]=o[d]|0;return h}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var d=0;d<o.length;d+=2)h.push(parseInt(o[d]+o[d+1],16))}else for(var d=0;d<o.length;d++){var g=o.charCodeAt(d),y=g>>8,_=g&255;y?h.push(y,_):h.push(_)}return h}r.toArray=i;function n(o){return o.length===1?"0"+o:o}r.zero2=n;function s(o){for(var a="",h=0;h<o.length;h++)a+=n(o[h].toString(16));return a}r.toHex=s,r.encode=function(a,h){return h==="hex"?s(a):a}}),qr=ta(function(t,e){"use strict";var r=e;r.assert=C0,r.toArray=Ii.toArray,r.zero2=Ii.zero2,r.toHex=Ii.toHex,r.encode=Ii.encode;function i(h,d,g){var y=new Array(Math.max(h.bitLength(),g)+1),_;for(_=0;_<y.length;_+=1)y[_]=0;var S=1<<d+1,I=h.clone();for(_=0;_<y.length;_++){var O,P=I.andln(S-1);I.isOdd()?(P>(S>>1)-1?O=(S>>1)-P:O=P,I.isubn(O)):O=0,y[_]=O,I.iushrn(1)}return y}r.getNAF=i;function n(h,d){var g=[[],[]];h=h.clone(),d=d.clone();for(var y=0,_=0,S;h.cmpn(-y)>0||d.cmpn(-_)>0;){var I=h.andln(3)+y&3,O=d.andln(3)+_&3;I===3&&(I=-1),O===3&&(O=-1);var P;I&1?(S=h.andln(7)+y&7,(S===3||S===5)&&O===2?P=-I:P=I):P=0,g[0].push(P);var T;O&1?(S=d.andln(7)+_&7,(S===3||S===5)&&I===2?T=-O:T=O):T=0,g[1].push(T),2*y===P+1&&(y=1-y),2*_===T+1&&(_=1-_),h.iushrn(1),d.iushrn(1)}return g}r.getJSF=n;function s(h,d,g){var y="_"+d;h.prototype[d]=function(){return this[y]!==void 0?this[y]:this[y]=g.call(this)}}r.cachedProperty=s;function o(h){return typeof h=="string"?r.toArray(h,"hex"):h}r.parseBytes=o;function a(h){return new Le.default(h,"hex","le")}r.intFromLE=a}),Nu=qr.getNAF,SM=qr.getJSF,Pu=qr.assert;function Xn(t,e){this.type=t,this.p=new Le.default(e.p,16),this.red=e.prime?Le.default.red(e.prime):Le.default.mont(this.p),this.zero=new Le.default(0).toRed(this.red),this.one=new Le.default(1).toRed(this.red),this.two=new Le.default(2).toRed(this.red),this.n=e.n&&new Le.default(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Qs=Xn;Xn.prototype.point=function(){throw new Error("Not implemented")};Xn.prototype.validate=function(){throw new Error("Not implemented")};Xn.prototype._fixedNafMul=function(e,r){Pu(e.precomputed);var i=e._getDoubles(),n=Nu(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,h;for(a=0;a<n.length;a+=i.step){h=0;for(var d=a+i.step-1;d>=a;d--)h=(h<<1)+n[d];o.push(h)}for(var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null),_=s;_>0;_--){for(a=0;a<o.length;a++)h=o[a],h===_?y=y.mixedAdd(i.points[a]):h===-_&&(y=y.mixedAdd(i.points[a].neg()));g=g.add(y)}return g.toP()};Xn.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=Nu(r,i,this._bitLength),a=this.jpoint(null,null,null),h=o.length-1;h>=0;h--){for(var d=0;h>=0&&o[h]===0;h--)d++;if(h>=0&&d++,a=a.dblp(d),h<0)break;var g=o[h];Pu(g!==0),e.type==="affine"?g>0?a=a.mixedAdd(s[g-1>>1]):a=a.mixedAdd(s[-g-1>>1].neg()):g>0?a=a.add(s[g-1>>1]):a=a.add(s[-g-1>>1].neg())}return e.type==="affine"?a.toP():a};Xn.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,h=this._wnafT3,d=0,g,y,_;for(g=0;g<n;g++){_=r[g];var S=_._getNAFPoints(e);o[g]=S.wnd,a[g]=S.points}for(g=n-1;g>=1;g-=2){var I=g-1,O=g;if(o[I]!==1||o[O]!==1){h[I]=Nu(i[I],o[I],this._bitLength),h[O]=Nu(i[O],o[O],this._bitLength),d=Math.max(h[I].length,d),d=Math.max(h[O].length,d);continue}var P=[r[I],null,null,r[O]];r[I].y.cmp(r[O].y)===0?(P[1]=r[I].add(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg())):r[I].y.cmp(r[O].y.redNeg())===0?(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].add(r[O].neg())):(P[1]=r[I].toJ().mixedAdd(r[O]),P[2]=r[I].toJ().mixedAdd(r[O].neg()));var T=[-3,-1,-5,-7,0,7,5,1,3],U=SM(i[I],i[O]);for(d=Math.max(U[0].length,d),h[I]=new Array(d),h[O]=new Array(d),y=0;y<d;y++){var D=U[0][y]|0,F=U[1][y]|0;h[I][y]=T[(D+1)*3+(F+1)],h[O][y]=0,a[I]=P}}var j=this.jpoint(null,null,null),V=this._wnafT4;for(g=d;g>=0;g--){for(var B=0;g>=0;){var C=!0;for(y=0;y<n;y++)V[y]=h[y][g]|0,V[y]!==0&&(C=!1);if(!C)break;B++,g--}if(g>=0&&B++,j=j.dblp(B),g<0)break;for(y=0;y<n;y++){var K=V[y];K!==0&&(K>0?_=a[y][K-1>>1]:K<0&&(_=a[y][-K-1>>1].neg()),_.type==="affine"?j=j.mixedAdd(_):j=j.add(_))}}for(g=0;g<n;g++)a[g]=null;return s?j:j.toP()};function Yr(t,e){this.curve=t,this.type=e,this.precomputed=null}Xn.BasePoint=Yr;Yr.prototype.eq=function(){throw new Error("Not implemented")};Yr.prototype.validate=function(){return this.curve.validate(this)};Xn.prototype.decodePoint=function(e,r){e=qr.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Pu(e[e.length-1]%2===0):e[0]===7&&Pu(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Yr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Yr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))};Yr.prototype.encode=function(e,r){return qr.encode(this._encode(r),e)};Yr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Yr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Yr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}};Yr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}};Yr.prototype._getBeta=function(){return null};Yr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var L0=ta(function(t){typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var n=function(){};n.prototype=i.prototype,r.prototype=new n,r.prototype.constructor=r}}}),IM=qr.assert;function Xr(t){Qs.call(this,"short",t),this.a=new Le.default(t.a,16).toRed(this.red),this.b=new Le.default(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}L0(Xr,Qs);var AM=Xr;Xr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new Le.default(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new Le.default(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],IM(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new Le.default(a.a,16),b:new Le.default(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}};Xr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Le.default.mont(e),i=new Le.default(2).toRed(r).redInvm(),n=i.redNeg(),s=new Le.default(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]};Xr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new Le.default(1),o=new Le.default(0),a=new Le.default(0),h=new Le.default(1),d,g,y,_,S,I,O,P=0,T,U;i.cmpn(0)!==0;){var D=n.div(i);T=n.sub(D.mul(i)),U=a.sub(D.mul(s));var F=h.sub(D.mul(o));if(!y&&T.cmp(r)<0)d=O.neg(),g=s,y=T.neg(),_=U;else if(y&&++P===2)break;O=T,n=i,i=T,a=s,s=U,h=o,o=F}S=T.neg(),I=U;var j=y.sqr().add(_.sqr()),V=S.sqr().add(I.sqr());return V.cmp(j)>=0&&(S=d,I=g),y.negative&&(y=y.neg(),_=_.neg()),S.negative&&(S=S.neg(),I=I.neg()),[{a:y,b:_},{a:S,b:I}]};Xr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),h=o.mul(n.a),d=s.mul(i.b),g=o.mul(n.b),y=e.sub(a).sub(h),_=d.add(g).neg();return{k1:y,k2:_}};Xr.prototype.pointFromX=function(e,r){e=new Le.default(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)};Xr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};Xr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),h=e[o],d=h._getBeta();a.k1.negative&&(a.k1.ineg(),h=h.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),n[o*2]=h,n[o*2+1]=d,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var g=this._wnafMulAdd(1,n,s,o*2,i),y=0;y<o*2;y++)n[y]=null,s[y]=null;return g};function yt(t,e,r,i){Qs.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Le.default(e,16),this.y=new Le.default(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}L0(yt,Qs.BasePoint);Xr.prototype.point=function(e,r,i){return new yt(this,e,r,i)};Xr.prototype.pointFromJSON=function(e,r){return yt.fromJSON(this,e,r)};yt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}};yt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};yt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n};yt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};yt.prototype.isInfinity=function(){return this.inf};yt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};yt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};yt.prototype.getX=function(){return this.x.fromRed()};yt.prototype.getY=function(){return this.y.fromRed()};yt.prototype.mul=function(e){return e=new Le.default(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};yt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)};yt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)};yt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};yt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};yt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Tt(t,e,r,i){Qs.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Le.default(0)):(this.x=new Le.default(e,16),this.y=new Le.default(r,16),this.z=new Le.default(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}L0(Tt,Qs.BasePoint);Xr.prototype.jpoint=function(e,r,i){return new Tt(this,e,r,i)};Tt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)};Tt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Tt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),h=n.redSub(s),d=o.redSub(a);if(h.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=h.redSqr(),y=g.redMul(h),_=n.redMul(g),S=d.redSqr().redIAdd(y).redISub(_).redISub(_),I=d.redMul(_.redISub(S)).redISub(o.redMul(y)),O=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(S,I,O)};Tt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),h=s.redSub(o);if(a.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),g=d.redMul(a),y=i.redMul(d),_=h.redSqr().redIAdd(g).redISub(y).redISub(y),S=h.redMul(y.redISub(_)).redISub(s.redMul(g)),I=this.z.redMul(a);return this.curve.jpoint(_,S,I)};Tt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,h=this.z,d=h.redSqr().redSqr(),g=a.redAdd(a);for(r=0;r<e;r++){var y=o.redSqr(),_=g.redSqr(),S=_.redSqr(),I=y.redAdd(y).redIAdd(y).redIAdd(n.redMul(d)),O=o.redMul(_),P=I.redSqr().redISub(O.redAdd(O)),T=O.redISub(P),U=I.redMul(T);U=U.redIAdd(U).redISub(S);var D=g.redMul(h);r+1<e&&(d=d.redMul(S)),o=P,h=D,g=U}return this.curve.jpoint(o,g.redMul(s),h)};Tt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Tt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n),d=h.redSqr().redISub(a).redISub(a),g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),e=d,r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),_=this.y.redSqr(),S=_.redSqr(),I=this.x.redAdd(_).redSqr().redISub(y).redISub(S);I=I.redIAdd(I);var O=y.redAdd(y).redIAdd(y),P=O.redSqr(),T=S.redIAdd(S);T=T.redIAdd(T),T=T.redIAdd(T),e=P.redISub(I).redISub(I),r=O.redMul(I.redISub(e)).redISub(T),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)};Tt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var h=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),d=h.redSqr().redISub(a).redISub(a);e=d;var g=o.redIAdd(o);g=g.redIAdd(g),g=g.redIAdd(g),r=h.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),_=this.y.redSqr(),S=this.x.redMul(_),I=this.x.redSub(y).redMul(this.x.redAdd(y));I=I.redAdd(I).redIAdd(I);var O=S.redIAdd(S);O=O.redIAdd(O);var P=O.redAdd(O);e=I.redSqr().redISub(P),i=this.y.redAdd(this.z).redSqr().redISub(_).redISub(y);var T=_.redSqr();T=T.redIAdd(T),T=T.redIAdd(T),T=T.redIAdd(T),r=I.redMul(O.redISub(e)).redISub(T)}return this.curve.jpoint(e,r,i)};Tt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),d=r.redAdd(r);d=d.redIAdd(d);var g=d.redMul(a),y=h.redSqr().redISub(g.redAdd(g)),_=g.redISub(y),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=h.redMul(_).redISub(S),O=i.redAdd(i).redMul(n);return this.curve.jpoint(y,I,O)};Tt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var h=a.redSqr(),d=n.redIAdd(n);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=s.redIAdd(a).redSqr().redISub(o).redISub(h).redISub(d),y=r.redMul(g);y=y.redIAdd(y),y=y.redIAdd(y);var _=this.x.redMul(h).redISub(y);_=_.redIAdd(_),_=_.redIAdd(_);var S=this.y.redMul(g.redMul(d.redISub(g)).redISub(a.redMul(h)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var I=this.z.redAdd(a).redSqr().redISub(i).redISub(h);return this.curve.jpoint(_,S,I)};Tt.prototype.mul=function(e,r){return e=new Le.default(e,r),this.curve._wnafMul(this,e)};Tt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0};Tt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}};Tt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Tt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ou=ta(function(t,e){"use strict";var r=e;r.base=Qs,r.short=AM,r.mont=null,r.edwards=null}),Ru=ta(function(t,e){"use strict";var r=e,i=qr.assert;function n(a){a.type==="short"?this.curve=new Ou.short(a):a.type==="edwards"?this.curve=new Ou.edwards(a):this.curve=new Ou.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function s(a,h){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var d=new n(h);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:d}),d}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Hi.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Hi.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Hi.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Hi.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Hi.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Hi.default.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Hi.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Hi.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Yn(t){if(!(this instanceof Yn))return new Yn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ii.toArray(t.entropy,t.entropyEnc||"hex"),r=Ii.toArray(t.nonce,t.nonceEnc||"hex"),i=Ii.toArray(t.pers,t.persEnc||"hex");C0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var Py=Yn;Yn.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};Yn.prototype._hmac=function(){return new Hi.default.hmac(this.hash,this.K)};Yn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Yn.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=Ii.toArray(e,r),i=Ii.toArray(i,n),C0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Yn.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=Ii.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,Ii.encode(o,r)};var D0=qr.assert;function Xt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var F0=Xt;Xt.fromPublic=function(e,r,i){return r instanceof Xt?r:new Xt(e,{pub:r,pubEnc:i})};Xt.fromPrivate=function(e,r,i){return r instanceof Xt?r:new Xt(e,{priv:r,privEnc:i})};Xt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Xt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Xt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Xt.prototype._importPrivate=function(e,r){this.priv=new Le.default(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Xt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?D0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&D0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Xt.prototype.derive=function(e){return e.validate()||D0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Xt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)};Xt.prototype.verify=function(e,r,i){return this.ec.verify(e,r,this,void 0,i)};Xt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var MM=qr.assert;function Tu(t,e){if(t instanceof Tu)return t;this._importDER(t,e)||(MM(t.r&&t.s,"Signature without r or s"),this.r=new Le.default(t.r,16),this.s=new Le.default(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Du=Tu;function OM(){this.place=0}function P0(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function Ry(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Tu.prototype._importDER=function(e,r){e=qr.toArray(e,r);var i=new OM;if(e[i.place++]!==48)return!1;var n=P0(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=P0(e,i);if(s===!1||e[i.place]&128)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=P0(e,i);if(a===!1||e.length!==a+i.place||e[i.place]&128)return!1;var h=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new Le.default(o),this.s=new Le.default(h),this.recoveryParam=null,!0};function T0(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Tu.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Ry(r),i=Ry(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];T0(n,r.length),n=n.concat(r),n.push(2),T0(n,i.length);var s=n.concat(i),o=[48];return T0(o,s.length),o=o.concat(s),qr.encode(o,e)};var RM=function(){throw new Error("unsupported")},Zs=qr.assert;function Wr(t){if(!(this instanceof Wr))return new Wr(t);typeof t=="string"&&(Zs(Object.prototype.hasOwnProperty.call(Ru,t),"Unknown curve "+t),t=Ru[t]),t instanceof Ru.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var NM=Wr;Wr.prototype.keyPair=function(e){return new F0(this,e)};Wr.prototype.keyFromPrivate=function(e,r){return F0.fromPrivate(this,e,r)};Wr.prototype.keyFromPublic=function(e,r){return F0.fromPublic(this,e,r)};Wr.prototype.genKeyPair=function(e){e||(e={});for(var r=new Py({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||RM(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Le.default(2));;){var s=new Le.default(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Wr.prototype._truncateToN=function(e,r,i){var n;if(Le.default.isBN(e)||typeof e=="number")e=new Le.default(e,16),n=e.byteLength();else if(typeof e=="object")n=e.length,e=new Le.default(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new Le.default(s,16)}typeof i!="number"&&(i=n*8);var o=i-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Wr.prototype.sign=function(e,r,i,n){if(typeof i=="object"&&(n=i,i=null),n||(n={}),typeof e!="string"&&typeof e!="number"&&!Le.default.isBN(e)){Zs(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Zs(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Zs((e[s]&255)===e[s])}r=this.keyFromPrivate(r,i),e=this._truncateToN(e,!1,n.msgBitLength),Zs(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),h=e.toArray("be",o);Zs(new Le.default(h).eq(e),"Can not sign message");for(var d=new Py({hash:this.hash,entropy:a,nonce:h,pers:n.pers,persEnc:n.persEnc||"utf8"}),g=this.n.sub(new Le.default(1)),y=0;;y++){var _=n.k?n.k(y):new Le.default(d.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(g)>=0)){var S=this.g.mul(_);if(!S.isInfinity()){var I=S.getX(),O=I.umod(this.n);if(O.cmpn(0)!==0){var P=_.invm(this.n).mul(O.mul(r.getPrivate()).iadd(e));if(P=P.umod(this.n),P.cmpn(0)!==0){var T=(S.getY().isOdd()?1:0)|(I.cmp(O)!==0?2:0);return n.canonical&&P.cmp(this.nh)>0&&(P=this.n.sub(P),T^=1),new Du({r:O,s:P,recoveryParam:T})}}}}}};Wr.prototype.verify=function(e,r,i,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),i=this.keyFromPublic(i,n),r=new Du(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var h=a.invm(this.n),d=h.mul(e).umod(this.n),g=h.mul(o).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(d,i.getPublic(),g),y.isInfinity()?!1:y.eqXToP(o)):(y=this.g.mulAdd(d,i.getPublic(),g),y.isInfinity()?!1:y.getX().umod(this.n).cmp(o)===0)};Wr.prototype.recoverPubKey=function(t,e,r,i){Zs((3&r)===r,"The recovery param is more than two bits"),e=new Du(e,i);var n=this.n,s=new Le.default(t),o=e.r,a=e.s,h=r&1,d=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?o=this.curve.pointFromX(o.add(this.curve.n),h):o=this.curve.pointFromX(o,h);var g=e.r.invm(n),y=n.sub(s).mul(g).umod(n),_=a.mul(g).umod(n);return this.g.mulAdd(y,o,_)};Wr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new Du(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var PM=ta(function(t,e){"use strict";var r=e;r.version="6.6.1",r.utils=qr,r.rand=function(){throw new Error("unsupported")},r.curve=Ou,r.curves=Ru,r.ec=NM,r.eddsa=null}),Ty=PM.ec;var Dy="signing-key/5.8.0";var U0=new pt(Dy),B0=null;function Gi(){return B0||(B0=new Ty("secp256k1")),B0}var q0=class{constructor(e){Jo(this,"curve","secp256k1"),Jo(this,"privateKey",Nt(e)),df(this.privateKey)!==32&&U0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Gi().keyFromPrivate(Ye(this.privateKey));Jo(this,"publicKey","0x"+r.getPublic(!1,"hex")),Jo(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Jo(this,"_isSigningKey",!0)}_addPoint(e){let r=Gi().keyFromPublic(Ye(this.publicKey)),i=Gi().keyFromPublic(Ye(e));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){let r=Gi().keyFromPrivate(Ye(this.privateKey)),i=Ye(e);i.length!==32&&U0.throwArgumentError("bad digest length","digest",e);let n=r.sign(i,{canonical:!0});return lf({recoveryParam:n.recoveryParam,r:yn("0x"+n.r.toString(16),32),s:yn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){let r=Gi().keyFromPrivate(Ye(this.privateKey)),i=Gi().keyFromPublic(Ye(mf(e)));return yn("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function Cu(t,e){let r=lf(e),i={r:Ye(r.r),s:Ye(r.s)};return"0x"+Gi().recoverPubKey(Ye(t),i,r.recoveryParam).encode("hex",!1)}function mf(t,e){let r=Ye(t);if(r.length===32){let i=new q0(r);return e?"0x"+Gi().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}else{if(r.length===33)return e?Nt(r):"0x"+Gi().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Gi().keyFromPublic(r).getPublic(!0,"hex"):Nt(r)}return U0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var hp=Pe(k0()),Y3=Pe(K0()),Of=Pe(Vn()),ca=Pe(ku()),sh=Pe(J0());var X3=Pe(k3());var nh={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var CO=Object.defineProperty,j3=Object.getOwnPropertySymbols,LO=Object.prototype.hasOwnProperty,FO=Object.prototype.propertyIsEnumerable,$3=(t,e,r)=>e in t?CO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K3=(t,e)=>{for(var r in e||(e={}))LO.call(e,r)&&$3(t,r,e[r]);if(j3)for(var r of j3(e))FO.call(e,r)&&$3(t,r,e[r]);return t},BO="ReactNative",ti={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};var UO="js";function Rf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Nf(){return!(0,ss.getDocument)()&&!!(0,ss.getNavigator)()&&navigator.product===BO}function Pf(){return!Rf()&&!!(0,ss.getNavigator)()&&!!(0,ss.getDocument)()}function oh(){return Nf()?ti.reactNative:Rf()?ti.node:Pf()?ti.browser:ti.unknown}function Z3(){var t;try{return Nf()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function qO(t,e){let r=fa.parse(t);return r=K3(K3({},r),e),t=fa.stringify(r),t}function Q3(){return(0,W3.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function zO(){if(oh()===ti.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){let{OS:r,Version:i}=globalThis.Platform;return[r,i].join("-")}let t=o2();if(t===null)return"unknown";let e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function kO(){var t;let e=oh();return e===ti.browser?[e,((t=(0,ss.getLocation)())==null?void 0:t.host)||"unknown"].join(":"):e}function dp(t,e,r){let i=zO(),n=kO();return[[t,e].join("-"),[UO,r].join("-"),i,n].join("/")}function e6({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a}){let h=r.split("?"),d=dp(t,e,i),g={auth:n,ua:d,projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},y=qO(h[1]||"",g);return h[0]+"?"+y}function lp(t){return Object.fromEntries(t.entries())}function pp(t){return new Map(Object.entries(t))}function t6(t=Rn.FIVE_MINUTES,e){let r=(0,Rn.toMiliseconds)(t||Rn.FIVE_MINUTES),i,n,s;return{resolve:o=>{s&&i&&(clearTimeout(s),i(o))},reject:o=>{s&&n&&(clearTimeout(s),n(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),i=o,n=a})}}function so(t,e,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(new Error(r)),e);try{let o=await t;i(o)}catch(o){n(o)}clearTimeout(s)})}function r6(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function i6(t){return r6("topic",t)}function n6(t){return r6("id",t)}function s6(t){let[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function ua(t,e){return(0,Rn.fromMiliseconds)((e||Date.now())+(0,Rn.toMiliseconds)(t))}function bp(t){return Date.now()>=(0,Rn.toMiliseconds)(t)}function ah(t,e){return`${t}${e?`:${e}`:""}`}function gp(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function vp(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function o6(t){return Buffer.from(t,"base64").toString("utf-8")}var a6="base10",er="base16",Tf="base64pad";var Df="utf8",f6=0,oo=1,fh=2,jO=0,V3=1,Mf=12,mp=32;function c6(){let t=sh.generateKeyPair();return{privateKey:nt(t.secretKey,er),publicKey:nt(t.publicKey,er)}}function ch(){let t=(0,Of.randomBytes)(mp);return nt(t,er)}function u6(t,e){let r=sh.sharedKey(ut(t,er),ut(e,er),!0),i=new Y3.HKDF(ca.SHA256,r).expand(mp);return nt(i,er)}function h6(t){let e=(0,ca.hash)(ut(t,er));return nt(e,er)}function uh(t){let e=(0,ca.hash)(ut(t,Df));return nt(e,er)}function d6(t){return ut(`${t}`,a6)}function ns(t){return Number(nt(t,a6))}function l6(t){let e=d6(typeof t.type<"u"?t.type:f6);if(ns(e)===oo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let r=typeof t.senderPublicKey<"u"?ut(t.senderPublicKey,er):void 0,i=typeof t.iv<"u"?ut(t.iv,er):(0,Of.randomBytes)(Mf),n=new hp.ChaCha20Poly1305(ut(t.symKey,er)).seal(i,ut(t.message,Df));return v6({type:e,sealed:n,iv:i,senderPublicKey:r,encoding:t.encoding})}function p6(t,e){let r=d6(fh),i=(0,Of.randomBytes)(Mf),n=ut(t,Df);return v6({type:r,sealed:n,iv:i,encoding:e})}function b6(t){let e=new hp.ChaCha20Poly1305(ut(t.symKey,er)),{sealed:r,iv:i}=ha({encoded:t.encoded,encoding:t?.encoding}),n=e.open(i,r);if(n===null)throw new Error("Failed to decrypt");return nt(n,Df)}function g6(t,e){let{sealed:r}=ha({encoded:t,encoding:e});return nt(r,Df)}function v6(t){let{encoding:e=Tf}=t;if(ns(t.type)===fh)return nt(Vs([t.type,t.sealed]),e);if(ns(t.type)===oo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return nt(Vs([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return nt(Vs([t.type,t.iv,t.sealed]),e)}function ha(t){let{encoded:e,encoding:r=Tf}=t,i=ut(e,r),n=i.slice(jO,V3),s=V3;if(ns(n)===oo){let d=s+mp,g=d+Mf,y=i.slice(s,d),_=i.slice(d,g),S=i.slice(g);return{type:n,sealed:S,iv:_,senderPublicKey:y}}if(ns(n)===fh){let d=i.slice(s),g=(0,Of.randomBytes)(Mf);return{type:n,sealed:d,iv:g}}let o=s+Mf,a=i.slice(s,o),h=i.slice(o);return{type:n,sealed:h,iv:a}}function m6(t,e){let r=ha({encoded:t,encoding:e?.encoding});return yp({type:ns(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?nt(r.senderPublicKey,er):void 0,receiverPublicKey:e?.receiverPublicKey})}function yp(t){let e=t?.type||f6;if(e===oo){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function wp(t){return t.type===oo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function xp(t){return t.type===fh}function $O(t){return new X3.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function KO(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function VO(t){return Buffer.from(KO(t),"base64")}function y6(t,e){let[r,i,n]=t.split("."),s=VO(n);if(s.length!==64)throw new Error("Invalid signature length");let o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),h=`${r}.${i}`,d=new ca.SHA256().update(Buffer.from(h)).digest(),g=$O(e),y=Buffer.from(d).toString("hex");if(!g.verify(y,{r:o,s:a}))throw new Error("Invalid signature");return Ko(t).payload}var HO="irn";function hh(t){return t?.relay||{protocol:HO}}function da(t){let e=nh[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var GO=Object.defineProperty,JO=Object.defineProperties,WO=Object.getOwnPropertyDescriptors,H3=Object.getOwnPropertySymbols,YO=Object.prototype.hasOwnProperty,XO=Object.prototype.propertyIsEnumerable,G3=(t,e,r)=>e in t?GO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J3=(t,e)=>{for(var r in e||(e={}))YO.call(e,r)&&G3(t,r,e[r]);if(H3)for(var r of H3(e))XO.call(e,r)&&G3(t,r,e[r]);return t},ZO=(t,e)=>JO(t,WO(e));function QO(t,e="-"){let r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){let s=n.replace(i,""),o=t[n];r[s]=o}}),r}function Ep(t){if(!t.includes("wc:")){let h=o6(t);h!=null&&h.includes("wc:")&&(t=h)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;let e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=fa.parse(s),a=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:i,topic:eR(n[0]),version:parseInt(n[1],10),symKey:o.symKey,relay:QO(o),methods:a,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function eR(t){return t.startsWith("//")?t.substring(2):t}function tR(t,e="-"){let r="relay",i={};return Object.keys(t).forEach(n=>{let s=r+e+n;t[n]&&(i[s]=t[n])}),i}function _p(t){return`${t.protocol}:${t.topic}@${t.version}?`+fa.stringify(J3(ZO(J3({symKey:t.symKey},tR(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}var rR={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},iR={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ve(t,e){let{message:r,code:i}=iR[t];return{message:e?`${r} ${e}`:r,code:i}}function la(t,e){let{message:r,code:i}=rR[t];return{message:e?`${r} ${e}`:r,code:i}}function w6(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Cf(t){return typeof t>"u"}function Sp(t,e){return e&&Cf(t)?!0:typeof t=="string"&&!!t.trim().length}function x6(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Sp(t,!1)){if(e(t))return!0;let r=o6(t);return e(r)}}catch{}return!1}function E6(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function _6(t){return t?.topic}function dh(t){return typeof t<"u"&&typeof t!==null}function Ip(){let t=oh();return new Promise(e=>{switch(t){case ti.browser:e(nR());break;case ti.reactNative:e(sR());break;case ti.node:e(oR());break;default:e(!0)}})}function nR(){return Pf()&&navigator?.onLine}async function sR(){return Nf()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function oR(){return!0}function S6(t){switch(oh()){case ti.browser:aR(t);break;case ti.reactNative:fR(t);break;case ti.node:break}}function aR(t){!Nf()&&Pf()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function fR(t){Nf()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(e=>t(e?.isConnected))}var z6=Pe(ln());var Ct={};hr(Ct,{DEFAULT_ERROR:()=>Ff,IBaseJsonRpcProvider:()=>xh,IEvents:()=>Bf,IJsonRpcConnection:()=>Np,IJsonRpcProvider:()=>Uf,INTERNAL_ERROR:()=>lh,INVALID_PARAMS:()=>O6,INVALID_REQUEST:()=>A6,METHOD_NOT_FOUND:()=>M6,PARSE_ERROR:()=>I6,RESERVED_ERROR_CODES:()=>Ap,SERVER_ERROR:()=>Lf,SERVER_ERROR_CODE_RANGE:()=>ph,STANDARD_ERROR_MAP:()=>os,formatErrorMessage:()=>U6,formatJsonRpcError:()=>Nn,formatJsonRpcRequest:()=>kr,formatJsonRpcResult:()=>cs,getBigIntRpcId:()=>Mi,getError:()=>gh,getErrorByCode:()=>vh,isHttpUrl:()=>yR,isJsonRpcError:()=>_t,isJsonRpcPayload:()=>Tp,isJsonRpcRequest:()=>us,isJsonRpcResponse:()=>Qi,isJsonRpcResult:()=>br,isJsonRpcValidationInvalid:()=>wR,isLocalhostUrl:()=>Pp,isNodeJs:()=>B6,isReservedErrorCode:()=>bh,isServerErrorCode:()=>cR,isValidDefaultRoute:()=>yh,isValidErrorCode:()=>R6,isValidLeadingWildcardRoute:()=>pR,isValidRoute:()=>lR,isValidTrailingWildcardRoute:()=>bR,isValidWildcardRoute:()=>wh,isWsUrl:()=>Eh,parseConnectionError:()=>Mp,payloadId:()=>Zi,validateJsonRpcError:()=>uR});var I6="PARSE_ERROR",A6="INVALID_REQUEST",M6="METHOD_NOT_FOUND",O6="INVALID_PARAMS",lh="INTERNAL_ERROR",Lf="SERVER_ERROR",Ap=[-32700,-32600,-32601,-32602,-32603],ph=[-32e3,-32099],os={[I6]:{code:-32700,message:"Parse error"},[A6]:{code:-32600,message:"Invalid Request"},[M6]:{code:-32601,message:"Method not found"},[O6]:{code:-32602,message:"Invalid params"},[lh]:{code:-32603,message:"Internal error"},[Lf]:{code:-32e3,message:"Server error"}},Ff=Lf;function cR(t){return t<=ph[0]&&t>=ph[1]}function bh(t){return Ap.includes(t)}function R6(t){return typeof t=="number"}function gh(t){return Object.keys(os).includes(t)?os[t]:os[Ff]}function vh(t){let e=Object.values(os).find(r=>r.code===t);return e||os[Ff]}function uR(t){if(typeof t.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof t.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!R6(t.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${t.error.code}`};if(bh(t.error.code)){let e=vh(t.error.code);if(e.message!==os[Ff].message&&t.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${t.error.code}`}}return{valid:!0}}function Mp(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var pr={};hr(pr,{isNodeJs:()=>B6});var F6=Pe(Rp());Br(pr,Pe(Rp()));var B6=F6.isNode;Br(Ct,pr);function Zi(t=3){let e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Mi(t=6){return BigInt(Zi(t))}function kr(t,e,r){return{id:r||Zi(),jsonrpc:"2.0",method:t,params:e}}function cs(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Nn(t,e,r){return{id:t,jsonrpc:"2.0",error:U6(e,r)}}function U6(t,e){return typeof t>"u"?gh(lh):(typeof t=="string"&&(t=Object.assign(Object.assign({},gh(Lf)),{message:t})),typeof e<"u"&&(t.data=e),bh(t.code)&&(t=vh(t.code)),t)}function lR(t){return t.includes("*")?wh(t):!/\W/g.test(t)}function yh(t){return t==="*"}function wh(t){return yh(t)?!0:!(!t.includes("*")||t.split("*").length!==2||t.split("*").filter(e=>e.trim()==="").length!==1)}function pR(t){return!yh(t)&&wh(t)&&!t.split("*")[0].trim()}function bR(t){return!yh(t)&&wh(t)&&!t.split("*")[1].trim()}var Bf=class{},Np=class extends Bf{constructor(e){super()}},xh=class extends Bf{constructor(){super()}},Uf=class extends xh{constructor(e){super()}};var gR="^https?:",vR="^wss?:";function mR(t){let e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function q6(t,e){let r=mR(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function yR(t){return q6(t,gR)}function Eh(t){return q6(t,vR)}function Pp(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Tp(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function us(t){return Tp(t)&&"method"in t}function Qi(t){return Tp(t)&&(br(t)||_t(t))}function br(t){return"result"in t}function _t(t){return"error"in t}function wR(t){return"error"in t&&t.valid===!1}var _h=class extends Uf{constructor(e){super(e),this.events=new z6.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(kr(e.method,e.params||[],e.id||Mi().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{_t(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qi(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};var V6=Pe(ln());var xR=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:j6(),ER=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$6=t=>t.split("?")[0],K6=10,_R=xR(),Sh=class{constructor(e){if(this.url=e,this.events=new V6.EventEmitter,this.registering=!1,!Eh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Wt(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Eh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{let n=new URLSearchParams(e).get("origin"),s=(0,Ct.isReactNative)()?{headers:{origin:n}}:{rejectUnauthorized:!Pp(e)},o=new _R(e,[],s);ER()?o.onerror=a=>{let h=a;i(this.emitError(h.error))}:o.on("error",a=>{i(this.emitError(a))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let r=typeof e.data=="string"?Gr(e.data):e.data;this.events.emit("payload",r)}onError(e,r){let i=this.parseError(r),n=i.message||i.toString(),s=Nn(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return Mp(e,$6(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>K6&&this.events.setMaxListeners(K6)}emitError(e){let r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${$6(this.url)}`));return this.events.emit("register_error",r),r}};var J5=Pe(A5()),W5=Pe(Ho()),Y5="wc",X5=2,b1="core",sn=`${Y5}@2:${b1}:`,eP={name:b1,logger:"error"},tP={database:":memory:"},rP="crypto",M5="client_ed25519_seed",iP=Ce.ONE_DAY,nP="keychain",sP="0.3",oP="messages",aP="0.3",fP=Ce.SIX_HOURS,cP="publisher",g1="irn",uP="error",Z5="wss://relay.walletconnect.org",hP="relayer",St={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},dP="_subscription",ri={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},lP=.1;var Hp="2.17.1";var Ze={link_mode:"link_mode",relay:"relay"},pP="0.3",bP="WALLETCONNECT_CLIENT_ID",O5="WALLETCONNECT_LINK_MODE_APPS",tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"};var gP="subscription",vP="0.3",mP=Ce.FIVE_SECONDS*1e3,yP="pairing",wP="0.3";var Kf={wc_pairingDelete:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ce.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ce.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ce.ONE_DAY,prompt:!1,tag:0}}},nn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Oi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},xP="history",EP="0.3",_P="expirer",jr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},SP="0.3";var IP="verify-api",AP="https://verify.walletconnect.com",Q5="https://verify.walletconnect.org",va=Q5,MP=`${va}/v3`,OP=[AP,Q5],RP="echo",NP="https://echo.walletconnect.com";var Ri={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},rn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ii={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ls={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},ps={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},ma={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},PP=.1,TP="event-client",DP=86400,CP="https://pulse.walletconnect.org/batch";function LP(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,h=t.charAt(0),d=Math.log(a)/Math.log(256),g=Math.log(256)/Math.log(a);function y(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,P=0,T=0,U=I.length;T!==U&&I[T]===0;)T++,O++;for(var D=(U-T)*g+1>>>0,F=new Uint8Array(D);T!==U;){for(var j=I[T],V=0,B=D-1;(j!==0||V<P)&&B!==-1;B--,V++)j+=256*F[B]>>>0,F[B]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");P=V,T++}for(var C=D-P;C!==D&&F[C]===0;)C++;for(var K=h.repeat(O);C<D;++C)K+=t.charAt(F[C]);return K}function _(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var P=0,T=0;I[O]===h;)P++,O++;for(var U=(I.length-O)*d+1>>>0,D=new Uint8Array(U);I[O];){var F=r[I.charCodeAt(O)];if(F===255)return;for(var j=0,V=U-1;(F!==0||j<T)&&V!==-1;V--,j++)F+=a*D[V]>>>0,D[V]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");T=j,O++}if(I[O]!==" "){for(var B=U-T;B!==U&&D[B]===0;)B++;for(var C=new Uint8Array(P+(U-B)),K=P;B!==U;)C[K++]=D[B++];return C}}}function S(I){var O=_(I);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:_,decode:S}}var FP=LP,BP=FP,e4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},UP=t=>new TextEncoder().encode(t),qP=t=>new TextDecoder().decode(t),Gp=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Jp=class{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return t4(this,e)}},Wp=class{constructor(e){this.decoders=e}or(e){return t4(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},t4=(t,e)=>new Wp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Yp=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Gp(e,r,i),this.decoder=new Jp(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Fh=({name:t,prefix:e,encode:r,decode:i})=>new Yp(t,e,r,i),Gf=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=BP(r,e);return Fh({prefix:t,name:e,encode:i,decode:s=>e4(n(s))})},zP=(t,e,r,i)=>{let n={};for(let g=0;g<e.length;++g)n[e[g]]=g;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,d=0;for(let g=0;g<s;++g){let y=n[t[g]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|y,a+=r,a>=8&&(a-=8,o[d++]=255&h>>a)}if(a>=r||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o},kP=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let h=0;h<t.length;++h)for(a=a<<8|t[h],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Lt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Fh({prefix:e,name:t,encode(n){return kP(n,i,r)},decode(n){return zP(n,i,r,t)}}),jP=Fh({prefix:"\0",name:"identity",encode:t=>qP(t),decode:t=>UP(t)}),$P=Object.freeze({__proto__:null,identity:jP}),KP=Lt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),VP=Object.freeze({__proto__:null,base2:KP}),HP=Lt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),GP=Object.freeze({__proto__:null,base8:HP}),JP=Gf({prefix:"9",name:"base10",alphabet:"0123456789"}),WP=Object.freeze({__proto__:null,base10:JP}),YP=Lt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),XP=Lt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ZP=Object.freeze({__proto__:null,base16:YP,base16upper:XP}),QP=Lt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eT=Lt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tT=Lt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rT=Lt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iT=Lt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nT=Lt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sT=Lt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),oT=Lt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aT=Lt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),fT=Object.freeze({__proto__:null,base32:QP,base32upper:eT,base32pad:tT,base32padupper:rT,base32hex:iT,base32hexupper:nT,base32hexpad:sT,base32hexpadupper:oT,base32z:aT}),cT=Gf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uT=Gf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),hT=Object.freeze({__proto__:null,base36:cT,base36upper:uT}),dT=Gf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lT=Gf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),pT=Object.freeze({__proto__:null,base58btc:dT,base58flickr:lT}),bT=Lt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gT=Lt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vT=Lt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mT=Lt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yT=Object.freeze({__proto__:null,base64:bT,base64pad:gT,base64url:vT,base64urlpad:mT}),r4=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),wT=r4.reduce((t,e,r)=>(t[r]=e,t),[]),xT=r4.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ET(t){return t.reduce((e,r)=>(e+=wT[r],e),"")}function _T(t){let e=[];for(let r of t){let i=xT[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}var ST=Fh({prefix:"\u{1F680}",name:"base256emoji",encode:ET,decode:_T}),IT=Object.freeze({__proto__:null,base256emoji:ST}),AT=i4,R5=128,MT=127,OT=~MT,RT=Math.pow(2,31);function i4(t,e,r){e=e||[],r=r||0;for(var i=r;t>=RT;)e[r++]=t&255|R5,t/=128;for(;t&OT;)e[r++]=t&255|R5,t>>>=7;return e[r]=t|0,i4.bytes=r-i+1,e}var NT=Xp,PT=128,N5=127;function Xp(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Xp.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&N5)<<n:(o&N5)*Math.pow(2,n),n+=7}while(o>=PT);return Xp.bytes=s-i,r}var TT=Math.pow(2,7),DT=Math.pow(2,14),CT=Math.pow(2,21),LT=Math.pow(2,28),FT=Math.pow(2,35),BT=Math.pow(2,42),UT=Math.pow(2,49),qT=Math.pow(2,56),zT=Math.pow(2,63),kT=function(t){return t<TT?1:t<DT?2:t<CT?3:t<LT?4:t<FT?5:t<BT?6:t<UT?7:t<qT?8:t<zT?9:10},jT={encode:AT,decode:NT,encodingLength:kT},n4=jT,P5=(t,e,r=0)=>(n4.encode(t,e,r),e),T5=t=>n4.encodingLength(t),Zp=(t,e)=>{let r=e.byteLength,i=T5(t),n=i+T5(r),s=new Uint8Array(n+r);return P5(t,s,0),P5(r,s,i),s.set(e,n),new Qp(t,r,e,s)},Qp=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}},s4=({name:t,code:e,encode:r})=>new e1(t,e,r),e1=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Zp(this.code,r):r.then(i=>Zp(this.code,i))}else throw Error("Unknown type, must be binary type")}},o4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$T=s4({name:"sha2-256",code:18,encode:o4("SHA-256")}),KT=s4({name:"sha2-512",code:19,encode:o4("SHA-512")}),VT=Object.freeze({__proto__:null,sha256:$T,sha512:KT}),a4=0,HT="identity",f4=e4,GT=t=>Zp(a4,f4(t)),JT={code:a4,name:HT,encode:f4,digest:GT},WT=Object.freeze({__proto__:null,identity:JT});new TextEncoder,new TextDecoder;var D5={...$P,...VP,...GP,...WP,...ZP,...fT,...hT,...pT,...yT,...IT};({...VT,...WT});function YT(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function c4(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var C5=c4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Kp=c4("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=YT(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),XT={utf8:C5,"utf-8":C5,hex:D5.base16,latin1:Kp,ascii:Kp,binary:Kp,...D5};function ZT(t,e="utf8"){let r=XT[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var t1=class{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=nP,this.version=sP,this.initialized=!1,this.storagePrefix=sn,this.init=async()=>{if(!this.initialized){let i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();let n=this.keychain.get(i);if(typeof n>"u"){let{message:s}=Ve("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=lr(r,this.name)}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,lp(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pp(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},r1=class{constructor(e,r,i){this.core=e,this.logger=r,this.name=rP,this.randomSessionIdentifier=ch(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();let n=await this.getClientSeed(),s=c0(n);return yu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let n=c6();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();let s=await this.getClientSeed(),o=c0(s),a=this.randomSessionIdentifier;return await t2(a,n,iP,o)},this.generateSharedKey=(n,s,o)=>{this.isInitialized();let a=this.getPrivateKey(n),h=u6(a,s);return this.setSymKey(h,o)},this.setSymKey=async(n,s)=>{this.isInitialized();let o=s||h6(n);return await this.keychain.set(o,n),o},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,o)=>{this.isInitialized();let a=yp(o),h=Wt(s);if(xp(a))return p6(h,o?.encoding);if(wp(a)){let _=a.senderPublicKey,S=a.receiverPublicKey;n=await this.generateSharedKey(_,S)}let d=this.getSymKey(n),{type:g,senderPublicKey:y}=a;return l6({type:g,symKey:d,message:h,senderPublicKey:y,encoding:o?.encoding})},this.decode=async(n,s,o)=>{this.isInitialized();let a=m6(s,o);if(xp(a)){let h=g6(s,o?.encoding);return Gr(h)}if(wp(a)){let h=a.receiverPublicKey,d=a.senderPublicKey;n=await this.generateSharedKey(h,d)}try{let h=this.getSymKey(n),d=b6({symKey:h,encoded:s,encoding:o?.encoding});return Gr(d)}catch(h){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}},this.getPayloadType=(n,s=Tf)=>{let o=ha({encoded:n,encoding:s});return ns(o.type)},this.getPayloadSenderPublicKey=(n,s=Tf)=>{let o=ha({encoded:n,encoding:s});return o.senderPublicKey?nt(o.senderPublicKey,er):void 0},this.core=e,this.logger=lr(r,this.name),this.keychain=i||new t1(this.core,this.logger)}get context(){return mr(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(M5)}catch{e=ch(),await this.keychain.set(M5,e)}return ZT(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},i1=class extends Qc{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=oP,this.version=aP,this.initialized=!1,this.storagePrefix=sn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();let s=uh(n),o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=n,this.messages.set(i,o),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();let s=this.get(i),o=uh(n);return typeof s[o]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=lr(e,this.name),this.core=r}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,lp(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pp(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},n1=class extends eu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Dn.EventEmitter,this.name=cP,this.queue=new Map,this.publishTimeout=(0,Ce.toMiliseconds)(Ce.ONE_MINUTE),this.failedPublishTimeout=(0,Ce.toMiliseconds)(Ce.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});let a=s?.ttl||fP,h=hh(s),d=s?.prompt||!1,g=s?.tag||0,y=s?.id||Mi().toString(),_={topic:i,message:n,opts:{ttl:a,relay:h,prompt:d,tag:g,id:y,attestation:s?.attestation}},S=`Failed to publish payload, please try again. id:${y} tag:${g}`,I=Date.now(),O,P=1;try{for(;O===void 0;){if(Date.now()-I>this.publishTimeout)throw new Error(S);this.logger.trace({id:y,attempts:P},`publisher.publish - attempt ${P}`),O=await await so(this.rpcPublish(i,n,a,h,d,g,y,s?.attestation).catch(T=>this.logger.warn(T)),this.publishTimeout,S),P++,O||await new Promise(T=>setTimeout(T,this.failedPublishTimeout))}this.relayer.events.emit(St.publish,_),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:y,topic:i,message:n,opts:s}})}catch(T){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(T),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw T;this.queue.set(y,_)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=lr(r,this.name),this.registerEventListeners()}get context(){return mr(this.logger)}rpcPublish(e,r,i,n,s,o,a,h){var d,g,y,_;let S={method:da(n.protocol).publish,params:{topic:e,message:r,ttl:i,prompt:s,tag:o,attestation:h},id:a};return Cf((d=S.params)==null?void 0:d.prompt)&&((g=S.params)==null||delete g.prompt),Cf((y=S.params)==null?void 0:y.tag)&&((_=S.params)==null||delete _.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:r,message:i,opts:n}=e;await this.publish(r,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(zs.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(St.connection_stalled);return}this.checkQueue()}),this.relayer.on(St.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}},s1=class{constructor(){this.map=new Map,this.set=(e,r)=>{let i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,r))return;let n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}},QT=Object.defineProperty,eD=Object.defineProperties,tD=Object.getOwnPropertyDescriptors,L5=Object.getOwnPropertySymbols,rD=Object.prototype.hasOwnProperty,iD=Object.prototype.propertyIsEnumerable,F5=(t,e,r)=>e in t?QT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vf=(t,e)=>{for(var r in e||(e={}))rD.call(e,r)&&F5(t,r,e[r]);if(L5)for(var r of L5(e))iD.call(e,r)&&F5(t,r,e[r]);return t},Vp=(t,e)=>eD(t,tD(e)),o1=class extends iu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new s1,this.events=new Dn.EventEmitter,this.name=gP,this.version=vP,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=sn,this.subscribeTimeout=(0,Ce.toMiliseconds)(Ce.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{let s=hh(n),o={topic:i,relay:s,transportType:n?.transportType};this.pending.set(i,o);let a=await this.rpcSubscribe(i,s,n);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;let n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((s,o)=>{let a=new Ce.Watch;a.start(n);let h=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(h),a.stop(n),s(!0)),a.elapsed(n)>=mP&&(clearInterval(h),a.stop(n),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=lr(r,this.name),this.clientId=""}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){let i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{let n=hh(i);await this.rpcUnsubscribe(e,r,n);let s=la("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r,i){var n;i?.transportType===Ze.relay&&await this.restartToComplete();let s={method:da(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});let o=(n=i?.internal)==null?void 0:n.throwOnFailedPublish;try{let a=uh(e+this.clientId);if(i?.transportType===Ze.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(d=>this.logger.warn(d))},(0,Ce.toMiliseconds)(Ce.ONE_SECOND)),a;let h=await so(this.relayer.request(s).catch(d=>this.logger.warn(d)),this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return h?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(St.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;let r=e[0].relay,i={method:da(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await so(this.relayer.request(i).catch(n=>this.logger.warn(n)),this.subscribeTimeout)}catch{this.relayer.events.emit(St.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;let r=e[0].relay,i={method:da(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await so(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(St.connection_stalled)}return n}rpcUnsubscribe(e,r,i){let n={method:da(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,Vp(Vf({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Vf({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Vf({},r)),this.topicMap.set(r.topic,e),this.events.emit(tn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let r=this.subscriptions.get(e);if(!r){let{message:i}=Ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(tn.deleted,Vp(Vf({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(tn.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){let i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(tn.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:r}=Ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let r=await this.rpcBatchSubscribe(e);w6(r)&&this.onBatchSubscribe(r.map((i,n)=>Vp(Vf({},e[n]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(zs.pulse,async()=>{await this.checkPending()}),this.events.on(tn.created,async e=>{let r=tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(tn.deleted,async e=>{let r=tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}},nD=Object.defineProperty,B5=Object.getOwnPropertySymbols,sD=Object.prototype.hasOwnProperty,oD=Object.prototype.propertyIsEnumerable,U5=(t,e,r)=>e in t?nD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,q5=(t,e)=>{for(var r in e||(e={}))sD.call(e,r)&&U5(t,r,e[r]);if(B5)for(var r of B5(e))oD.call(e,r)&&U5(t,r,e[r]);return t},a1=class extends tu{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Dn.EventEmitter,this.name=hP,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,Ce.toMiliseconds)(Ce.THIRTY_SECONDS+Ce.ONE_SECOND),this.request=async r=>{var i,n;this.logger.debug("Publishing Request Payload");let s=r.id||Mi().toString();await this.toEstablishConnection();try{let o=this.provider.request(r);this.requestsInFlight.set(s,{promise:o,request:r}),this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");let a=await new Promise(async(h,d)=>{let g=()=>{d(new Error(`relayer.request - publish interrupted, id: ${s}`))};this.provider.on(ri.disconnect,g);let y=await o;this.provider.off(ri.disconnect,g),h(y)});return this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - published"),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}finally{this.requestsInFlight.delete(s)}},this.resetPingTimeout=()=>{if(Rf())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n;(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(St.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(St.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(ri.payload,this.onPayloadHandler),this.provider.on(ri.connect,this.onConnectHandler),this.provider.on(ri.disconnect,this.onDisconnectHandler),this.provider.on(ri.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?lr(e.logger,this.name):(0,ml.default)(wl({level:e.logger||uP})),this.messages=new i1(this.logger,e.core),this.subscriber=new o1(this,this.logger),this.publisher=new n1(this,this.logger),this.relayUrl=e?.relayUrl||Z5,this.projectId=e.projectId,this.bundleId=Z3(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return mr(this.logger)}get connected(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Ze.relay})}async subscribe(e,r){var i,n,s;this.isInitialized(),r?.transportType==="relay"&&await this.toEstablishConnection();let o=typeof((i=r?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(n=r?.internal)==null?void 0:n.throwOnFailedPublish,a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",h,d=g=>{g.topic===e&&(this.subscriber.off(tn.created,d),h())};return await Promise.all([new Promise(g=>{h=g,this.subscriber.on(tn.created,d)}),new Promise(async(g,y)=>{a=await this.subscriber.subscribe(e,q5({internal:{throwOnFailedPublish:o}},r)).catch(_=>{o&&y(_)})||a,g()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await so(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(r,i)=>{let n=()=>{this.provider.off(ri.disconnect,n),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(ri.disconnect,n),await so(this.provider.connect(),(0,Ce.toMiliseconds)(Ce.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{i(s)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(s=>{this.logger.error(s),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){this.logger.error(r);let i=r;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw r}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ip())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let r=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.trace(`Batch of ${r.length} message events sorted`);for(let i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){let{topic:i}=e;if(!r.sessionExists){let n=ua(Ce.FIVE_MINUTES),s={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,s)}this.events.emit(St.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,r,i,n,s;if(Rf())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o)}}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _h(new Sh(e6({sdkVersion:Hp,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){let{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;let n=this.messages.has(r,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),us(e)){if(!e.method.endsWith(dP))return;let r=e.params,{topic:i,message:n,publishedAt:s,attestation:o}=r.data,a={topic:i,message:n,publishedAt:s,transportType:Ze.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(q5({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Qi(e)&&this.events.emit(St.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(St.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let r=cs(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(ri.payload,this.onPayloadHandler),this.provider.off(ri.connect,this.onConnectHandler),this.provider.off(ri.disconnect,this.onDisconnectHandler),this.provider.off(ri.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Ip();S6(async r=>{e!==r&&(e=r,r?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(St.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},(0,Ce.toMiliseconds)(lP))))}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{let r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}},aD=Object.defineProperty,z5=Object.getOwnPropertySymbols,fD=Object.prototype.hasOwnProperty,cD=Object.prototype.propertyIsEnumerable,k5=(t,e,r)=>e in t?aD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,j5=(t,e)=>{for(var r in e||(e={}))fD.call(e,r)&&k5(t,r,e[r]);if(z5)for(var r of z5(e))cD.call(e,r)&&k5(t,r,e[r]);return t},Er=class extends ru{constructor(e,r,i,n=sn,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=pP,this.cached=[],this.initialized=!1,this.storagePrefix=sn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Cf(o)?this.map.set(this.getKey(o),o):E6(o)?this.map.set(o.id,o):_6(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(h=>(0,J5.default)(a[h],o[h]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});let h=j5(j5({},this.getData(o)),a);this.map.set(o,h),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=lr(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){let{message:n}=Ve("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}let{message:i}=Ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:r}=Ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},f1=class{constructor(e,r){this.core=e,this.logger=r,this.name=yP,this.version=wP,this.events=new Dn.default,this.initialized=!1,this.storagePrefix=sn,this.ignoredPayloadTypes=[oo],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();let n=ch(),s=await this.core.crypto.setSymKey(n),o=ua(Ce.FIVE_MINUTES),a={protocol:g1},h={topic:s,expiry:o,relay:a,active:!1,methods:i?.methods},d=_p({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a,expiryTimestamp:o,methods:i?.methods});return this.events.emit(nn.create,h),this.core.expirer.set(s,o),await this.pairings.set(s,h),await this.core.relayer.subscribe(s,{transportType:i?.transportType}),{topic:s,uri:d}},this.pair=async i=>{this.isInitialized();let n=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[Ri.pairing_started]}});this.isValidPair(i,n);let{topic:s,symKey:o,relay:a,expiryTimestamp:h,methods:d}=Ep(i.uri);n.props.properties.topic=s,n.addTrace(Ri.pairing_uri_validation_success),n.addTrace(Ri.pairing_uri_not_expired);let g;if(this.pairings.keys.includes(s)){if(g=this.pairings.get(s),n.addTrace(Ri.existing_pairing),g.active)throw n.setError(rn.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);n.addTrace(Ri.pairing_not_expired)}let y=h||ua(Ce.FIVE_MINUTES),_={topic:s,relay:a,expiry:y,active:!1,methods:d};this.core.expirer.set(s,y),await this.pairings.set(s,_),n.addTrace(Ri.store_new_pairing),i.activatePairing&&await this.activate({topic:s}),this.events.emit(nn.create,_),n.addTrace(Ri.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),n.addTrace(Ri.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(rn.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(S){throw n.setError(rn.subscribe_pairing_topic_failure),S}return n.addTrace(Ri.subscribe_pairing_topic_success),_},this.activate=async({topic:i})=>{this.isInitialized();let n=ua(Ce.THIRTY_DAYS);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);let{topic:n}=i;if(this.pairings.keys.includes(n)){let s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:h}=t6();this.events.once(ah("pairing_ping",s),({error:d})=>{d?h(d):a()}),await o()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);let{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",la("USER_DISCONNECTED")),await this.deletePairing(n))},this.formatUriFromPairing=i=>{this.isInitialized();let{topic:n,relay:s,expiry:o,methods:a}=i,h=this.core.crypto.keychain.get(n);return _p({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:h,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(i,n,s)=>{let o=kr(n,s),a=await this.core.crypto.encode(i,o),h=Kf[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,h),o.id},this.sendResult=async(i,n,s)=>{let o=cs(i,s),a=await this.core.crypto.encode(n,o),h=await this.core.history.get(n,i),d=Kf[h.request.method].res;await this.core.relayer.publish(n,a,d),await this.core.history.resolve(o)},this.sendError=async(i,n,s)=>{let o=Nn(i,s),a=await this.core.crypto.encode(n,o),h=await this.core.history.get(n,i),d=Kf[h.request.method]?Kf[h.request.method].res:Kf.unregistered_method.res;await this.core.relayer.publish(n,a,d),await this.core.history.resolve(o)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,la("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{let i=this.pairings.getAll().filter(n=>bp(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{let{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{let{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(i,n)=>{let{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit(nn.ping,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,n)=>{let{id:s}=n;setTimeout(()=>{br(n)?this.events.emit(ah("pairing_ping",s),{}):_t(n)&&this.events.emit(ah("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{let{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(nn.delete,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,n)=>{let{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;let a=la("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(la("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var s;if(!dh(i)){let{message:a}=Ve("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(rn.malformed_pairing_uri),new Error(a)}if(!x6(i.uri)){let{message:a}=Ve("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(rn.malformed_pairing_uri),new Error(a)}let o=Ep(i?.uri);if(!((s=o?.relay)!=null&&s.protocol)){let{message:a}=Ve("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(rn.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){let{message:a}=Ve("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(rn.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&(0,Ce.toMiliseconds)(o?.expiryTimestamp)<Date.now()){n.setError(rn.pairing_expired);let{message:a}=Ve("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async i=>{if(!dh(i)){let{message:s}=Ve("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}let{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!dh(i)){let{message:s}=Ve("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}let{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!Sp(i,!1)){let{message:n}=Ve("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){let{message:n}=Ve("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(bp(this.pairings.get(i).expiry)){await this.deletePairing(i);let{message:n}=Ve("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=lr(r,this.name),this.pairings=new Er(this.core,this.logger,this.name,this.storagePrefix)}get context(){return mr(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(St.message,async e=>{let{topic:r,message:i,transportType:n}=e;if(!this.pairings.keys.includes(r)||n===Ze.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let s=await this.core.crypto.decode(r,i);try{us(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):Qi(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(jr.expired,async e=>{let{topic:r}=s6(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(nn.expire,{topic:r}))})}},c1=class extends Zc{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Dn.EventEmitter,this.name=xP,this.version=EP,this.cached=[],this.initialized=!1,this.storagePrefix=sn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;let o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:ua(Ce.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Oi.created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;let n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=_t(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(Oi.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(Oi.deleted,s)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=lr(r,this.name)}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;let i={topic:r.topic,request:kr(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let r=this.records.get(e);if(!r){let{message:i}=Ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Oi.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:r}=Ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Oi.created,e=>{let r=Oi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Oi.updated,e=>{let r=Oi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Oi.deleted,e=>{let r=Oi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(zs.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{(0,Ce.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Oi.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},u1=class extends nu{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Dn.EventEmitter,this.name=_P,this.version=SP,this.cached=[],this.initialized=!1,this.storagePrefix=sn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{let n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();let s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(jr.created,{target:s,expiration:o})},this.get=i=>{this.isInitialized();let n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){let n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(jr.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=lr(r,this.name)}get context(){return mr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return i6(e);if(typeof e=="number")return n6(e);let{message:r}=Ve("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(jr.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:r}=Ve("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let r=this.expirations.get(e);if(!r){let{message:i}=Ve("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(e,r){let{expiry:i}=r;(0,Ce.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(jr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(zs.pulse,()=>this.checkExpirations()),this.events.on(jr.created,e=>{let r=jr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(jr.expired,e=>{let r=jr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(jr.deleted,e=>{let r=jr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=Ve("NOT_INITIALIZED",this.name);throw new Error(e)}}},h1=class extends su{constructor(e,r,i){super(e,r,i),this.core=e,this.logger=r,this.store=i,this.name=IP,this.verifyUrlV3=MP,this.storagePrefix=sn,this.version=X5,this.init=async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,Ce.toMiliseconds)((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async n=>{if(!Pf()||this.isDevEnv)return;let s=window.location.origin,{id:o,decryptedId:a}=n,h=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{let d=(0,W5.getDocument)(),g=this.startAbortTimer(Ce.ONE_SECOND*5),y=await new Promise((_,S)=>{let I=()=>{window.removeEventListener("message",P),d.body.removeChild(O),S("attestation aborted")};this.abortController.signal.addEventListener("abort",I);let O=d.createElement("iframe");O.src=h,O.style.display="none",O.addEventListener("error",I,{signal:this.abortController.signal});let P=T=>{if(T.data&&typeof T.data=="string")try{let U=JSON.parse(T.data);if(U.type==="verify_attestation"){if(Ko(U.attestation).payload.id!==o)return;clearInterval(g),d.body.removeChild(O),this.abortController.signal.removeEventListener("abort",I),window.removeEventListener("message",P),_(U.attestation===null?"":U.attestation)}}catch(U){this.logger.warn(U)}};d.body.appendChild(O),window.addEventListener("message",P,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",y),y}catch(d){this.logger.warn(d)}return""},this.resolve=async n=>{if(this.isDevEnv)return"";let{attestationId:s,hash:o,encryptedId:a}=n;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Ko(s).payload.id!==a)return;let d=await this.isValidJwtAttestation(s);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!o)return;let h=this.getVerifyUrl(n?.verifyUrl);return this.fetchAttestation(o,h)},this.fetchAttestation=async(n,s)=>{this.logger.debug(`resolving attestation: ${n} from url: ${s}`);let o=this.startAbortTimer(Ce.ONE_SECOND*5),a=await fetch(`${s}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=n=>{let s=n||va;return OP.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${va}`),s=va),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let n=this.startAbortTimer(Ce.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await s.json()}catch(n){this.logger.warn(n)}},this.persistPublicKey=async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async n=>{let s=await this.getPublicKey();try{if(s)return this.validateAttestation(n,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}let o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(n,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{let o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});let n=await this.fetchPromise;return this.fetchPromise=void 0,n},this.validateAttestation=(n,s)=>{let o=y6(n,s.publicKey),a={hasExpired:(0,Ce.toMiliseconds)(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=lr(r,this.name),this.abortController=new AbortController,this.isDevEnv=vp(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return mr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,Ce.toMiliseconds)(e))}},d1=class extends ou{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=RP,this.registerDeviceToken=async i=>{let{clientId:n,token:s,notificationType:o,enableEncrypted:a=!1}=i,h=`${NP}/${this.projectId}/clients`;await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:o,token:s,always_raw:a})})},this.logger=lr(r,this.context)}},uD=Object.defineProperty,$5=Object.getOwnPropertySymbols,hD=Object.prototype.hasOwnProperty,dD=Object.prototype.propertyIsEnumerable,K5=(t,e,r)=>e in t?uD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hf=(t,e)=>{for(var r in e||(e={}))hD.call(e,r)&&K5(t,r,e[r]);if($5)for(var r of $5(e))dD.call(e,r)&&K5(t,r,e[r]);return t},l1=class extends au{constructor(e,r,i=!0){super(e,r,i),this.core=e,this.logger=r,this.context=TP,this.storagePrefix=sn,this.storageVersion=PP,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!vp())try{let n={eventId:gp(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:dp(this.core.relayer.protocol,this.core.relayer.version,Hp)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}},this.createEvent=n=>{let{event:s="ERROR",type:o="",properties:{topic:a,trace:h}}=n,d=gp(),g=this.core.projectId||"",y=Date.now(),_=Hf({eventId:d,timestamp:y,props:{event:s,type:o,properties:{topic:a,trace:h}},bundleId:g,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,_),this.shouldPersist=!0),_},this.getEvent=n=>{let{eventId:s,topic:o}=n;if(s)return this.events.get(s);let a=Array.from(this.events.values()).find(h=>h.props.properties.topic===o);if(a)return Hf(Hf({},a),this.setMethods(a.eventId))},this.deleteEvent=n=>{let{eventId:s}=n;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(zs.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{(0,Ce.fromMiliseconds)(Date.now())-(0,Ce.fromMiliseconds)(n.timestamp)>DP&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})},this.setMethods=n=>({addTrace:s=>this.addTrace(n,s),setError:s=>this.setError(n,s)}),this.addTrace=(n,s)=>{let o=this.events.get(n);o&&(o.props.properties.trace.push(s),this.events.set(n,o),this.shouldPersist=!0)},this.setError=(n,s)=>{let o=this.events.get(n);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(n,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{let n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(s=>{this.events.set(s.eventId,Hf(Hf({},s),this.setMethods(s.eventId)))})}catch(n){this.logger.warn(n)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;let n=[];for(let[s,o]of this.events)o.props.type&&n.push(o);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(let s of n)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async n=>{let s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${CP}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Hp}${s}`,{method:"POST",body:JSON.stringify(n)})},this.getAppDomain=()=>Q3().url,this.logger=lr(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}},lD=Object.defineProperty,V5=Object.getOwnPropertySymbols,pD=Object.prototype.hasOwnProperty,bD=Object.prototype.propertyIsEnumerable,H5=(t,e,r)=>e in t?lD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G5=(t,e)=>{for(var r in e||(e={}))pD.call(e,r)&&H5(t,r,e[r]);if(V5)for(var r of V5(e))bD.call(e,r)&&H5(t,r,e[r]);return t},p1=class t extends Xc{constructor(e){var r;super(e),this.protocol=Y5,this.version=X5,this.name=b1,this.events=new Dn.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:h})=>{if(!o||!a)return;let d={topic:o,message:a,publishedAt:Date.now(),transportType:Ze.link_mode};this.relayer.onLinkMessageEvent(d,{sessionExists:h})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Z5,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let i=wl({level:typeof e?.logger=="string"&&e.logger?e.logger:eP.logger}),{logger:n,chunkLoggerController:s}=Hv({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=lr(n,this.name),this.heartbeat=new zc,this.crypto=new r1(this,this.logger,e?.keychain),this.history=new c1(this,this.logger),this.expirer=new u1(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new $c(G5(G5({},tP),e?.storageOptions)),this.relayer=new a1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new f1(this,this.logger),this.verify=new h1(this,this.logger,this.storage),this.echoClient=new d1(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new l1(this,this.logger,e?.telemetryEnabled)}static async init(e){let r=new t(e);await r.initialize();let i=await r.crypto.getClientId();return await r.storage.setItem(bP,i),r}get context(){return mr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(O5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(O5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}},Cn=p1;var w1=Pe(y1()),v4=Pe(y1());var AD={level:"info"},Yf="custom_context",KG=1e3*1024;var MD=Object.defineProperty,OD=Object.defineProperties,RD=Object.getOwnPropertyDescriptors,p4=Object.getOwnPropertySymbols,ND=Object.prototype.hasOwnProperty,PD=Object.prototype.propertyIsEnumerable,b4=(t,e,r)=>e in t?MD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,TD=(t,e)=>{for(var r in e||(e={}))ND.call(e,r)&&b4(t,r,e[r]);if(p4)for(var r of p4(e))PD.call(e,r)&&b4(t,r,e[r]);return t},DD=(t,e)=>OD(t,RD(e));function m4(t){return DD(TD({},t),{level:t?.level||AD.level})}function CD(t,e=Yf){return t[e]||""}function LD(t,e,r=Yf){return t[r]=e,t}function x1(t,e=Yf){let r="";return typeof t.bindings>"u"?r=CD(t,e):r=t.bindings().context||"",r}function FD(t,e,r=Yf){let i=x1(t,r);return i.trim()?`${i}/${e}`:e}function y4(t,e,r=Yf){let i=FD(t,e,r),n=t.child({context:i});return LD(n,i,r)}var g4,w4=(g4=w1.default)!=null?g4:w1;var a9=Pe(ln());var Db=Pe(yi(),1),cc=Pe(Ho(),1),jF=Pe(xu(),1);function BD(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){let g=t.charAt(d),y=g.charCodeAt(0);if(e[y]!==255)throw new TypeError(g+" is ambiguous");e[y]=d}let r=t.length,i=t.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let g=0,y=0,_=0,S=d.length;for(;_!==S&&d[_]===0;)_++,g++;let I=(S-_)*s+1>>>0,O=new Uint8Array(I);for(;_!==S;){let U=d[_],D=0;for(let F=I-1;(U!==0||D<y)&&F!==-1;F--,D++)U+=256*O[F]>>>0,O[F]=U%r>>>0,U=U/r>>>0;if(U!==0)throw new Error("Non-zero carry");y=D,_++}let P=I-y;for(;P!==I&&O[P]===0;)P++;let T=i.repeat(g);for(;P<I;++P)T+=t.charAt(O[P]);return T}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let g=0,y=0,_=0;for(;d[g]===i;)y++,g++;let S=(d.length-g)*n+1>>>0,I=new Uint8Array(S);for(;g<d.length;){let U=d.charCodeAt(g);if(U>255)return;let D=e[U];if(D===255)return;let F=0;for(let j=S-1;(D!==0||F<_)&&j!==-1;j--,F++)D+=r*I[j]>>>0,I[j]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");_=F,g++}let O=S-_;for(;O!==S&&I[O]===0;)O++;let P=new Uint8Array(y+(S-O)),T=y;for(;O!==S;)P[T++]=I[O++];return P}function h(d){let g=a(d);if(g)return g;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:h}}var x4=BD;var UD="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",qD=x4(UD);var zD=Pe(yi());function kD(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function U4(t,...e){if(!kD(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function E4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jD(t,e){U4(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}var xa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var E1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function $D(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function q4(t){return typeof t=="string"&&(t=$D(t)),U4(t),t}var N1=class{clone(){return this._cloneInto()}};function KD(t){let e=i=>t().update(q4(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function VD(t=32){if(xa&&typeof xa.getRandomValues=="function")return xa.getRandomValues(new Uint8Array(t));if(xa&&typeof xa.randomBytes=="function")return xa.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function HD(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),h=i?4:0,d=i?0:4;t.setUint32(e+h,o,i),t.setUint32(e+d,a,i)}var P1=class extends N1{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=E1(this.buffer)}update(e){E4(this);let{view:r,buffer:i,blockLen:n}=this;e=q4(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let h=E1(e);for(;n<=s-o;o+=n)this.process(h,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){E4(this),jD(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:n,isLE:s}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let y=o;y<n;y++)r[y]=0;HD(i,n-8,BigInt(this.length*8),s),this.process(i,0);let a=E1(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let d=h/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)a.setUint32(4*y,g[y],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}},qh=BigInt(2**32-1),T1=BigInt(32);function z4(t,e=!1){return e?{h:Number(t&qh),l:Number(t>>T1&qh)}:{h:Number(t>>T1&qh)|0,l:Number(t&qh)|0}}function GD(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){let{h:s,l:o}=z4(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}var JD=(t,e)=>BigInt(t>>>0)<<T1|BigInt(e>>>0),WD=(t,e,r)=>t>>>r,YD=(t,e,r)=>t<<32-r|e>>>r,XD=(t,e,r)=>t>>>r|e<<32-r,ZD=(t,e,r)=>t<<32-r|e>>>r,QD=(t,e,r)=>t<<64-r|e>>>r-32,eC=(t,e,r)=>t>>>r-32|e<<64-r,tC=(t,e)=>e,rC=(t,e)=>t,iC=(t,e,r)=>t<<r|e>>>32-r,nC=(t,e,r)=>e<<r|t>>>32-r,sC=(t,e,r)=>e<<r-32|t>>>64-r,oC=(t,e,r)=>t<<r-32|e>>>64-r;function aC(t,e,r,i){let n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var fC=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),cC=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,uC=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),hC=(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,dC=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0),lC=(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,Be={fromBig:z4,split:GD,toBig:JD,shrSH:WD,shrSL:YD,rotrSH:XD,rotrSL:ZD,rotrBH:QD,rotrBL:eC,rotr32H:tC,rotr32L:rC,rotlSH:iC,rotlSL:nC,rotlBH:sC,rotlBL:oC,add:aC,add3L:fC,add3H:cC,add4L:uC,add4H:hC,add5H:lC,add5L:dC},[pC,bC]=Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),bs=new Uint32Array(80),gs=new Uint32Array(80),D1=class extends P1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:h,Eh:d,El:g,Fh:y,Fl:_,Gh:S,Gl:I,Hh:O,Hl:P}=this;return[e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P]}set(e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=h|0,this.Eh=d|0,this.El=g|0,this.Fh=y|0,this.Fl=_|0,this.Gh=S|0,this.Gl=I|0,this.Hh=O|0,this.Hl=P|0}process(e,r){for(let D=0;D<16;D++,r+=4)bs[D]=e.getUint32(r),gs[D]=e.getUint32(r+=4);for(let D=16;D<80;D++){let F=bs[D-15]|0,j=gs[D-15]|0,V=Be.rotrSH(F,j,1)^Be.rotrSH(F,j,8)^Be.shrSH(F,j,7),B=Be.rotrSL(F,j,1)^Be.rotrSL(F,j,8)^Be.shrSL(F,j,7),C=bs[D-2]|0,K=gs[D-2]|0,M=Be.rotrSH(C,K,19)^Be.rotrBH(C,K,61)^Be.shrSH(C,K,6),u=Be.rotrSL(C,K,19)^Be.rotrBL(C,K,61)^Be.shrSL(C,K,6),b=Be.add4L(B,u,gs[D-7],gs[D-16]),p=Be.add4H(b,V,M,bs[D-7],bs[D-16]);bs[D]=p|0,gs[D]=b|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:h,Dh:d,Dl:g,Eh:y,El:_,Fh:S,Fl:I,Gh:O,Gl:P,Hh:T,Hl:U}=this;for(let D=0;D<80;D++){let F=Be.rotrSH(y,_,14)^Be.rotrSH(y,_,18)^Be.rotrBH(y,_,41),j=Be.rotrSL(y,_,14)^Be.rotrSL(y,_,18)^Be.rotrBL(y,_,41),V=y&S^~y&O,B=_&I^~_&P,C=Be.add5L(U,j,B,bC[D],gs[D]),K=Be.add5H(C,T,F,V,pC[D],bs[D]),M=C|0,u=Be.rotrSH(i,n,28)^Be.rotrBH(i,n,34)^Be.rotrBH(i,n,39),b=Be.rotrSL(i,n,28)^Be.rotrBL(i,n,34)^Be.rotrBL(i,n,39),p=i&s^i&a^s&a,f=n&o^n&h^o&h;T=O|0,U=P|0,O=S|0,P=I|0,S=y|0,I=_|0,{h:y,l:_}=Be.add(d|0,g|0,K|0,M|0),d=a|0,g=h|0,a=s|0,h=o|0,s=i|0,o=n|0;let l=Be.add3L(M,b,f);i=Be.add3H(l,K,u,p),n=l|0}({h:i,l:n}=Be.add(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=Be.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:h}=Be.add(this.Ch|0,this.Cl|0,a|0,h|0),{h:d,l:g}=Be.add(this.Dh|0,this.Dl|0,d|0,g|0),{h:y,l:_}=Be.add(this.Eh|0,this.El|0,y|0,_|0),{h:S,l:I}=Be.add(this.Fh|0,this.Fl|0,S|0,I|0),{h:O,l:P}=Be.add(this.Gh|0,this.Gl|0,O|0,P|0),{h:T,l:U}=Be.add(this.Hh|0,this.Hl|0,T|0,U|0),this.set(i,n,s,o,a,h,d,g,y,_,S,I,O,P,T,U)}roundClean(){bs.fill(0),gs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},gC=KD(()=>new D1);var K1=BigInt(0),k4=BigInt(1),vC=BigInt(2);function V1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function H1(t){if(!V1(t))throw new Error("Uint8Array expected")}function _1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}var mC=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function G1(t){H1(t);let e="";for(let r=0;r<t.length;r++)e+=mC[t[r]];return e}function j4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?K1:BigInt("0x"+t)}var Ln={_0:48,_9:57,A:65,F:70,a:97,f:102};function _4(t){if(t>=Ln._0&&t<=Ln._9)return t-Ln._0;if(t>=Ln.A&&t<=Ln.F)return t-(Ln.A-10);if(t>=Ln.a&&t<=Ln.f)return t-(Ln.a-10)}function $4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){let o=_4(t.charCodeAt(s)),a=_4(t.charCodeAt(s+1));if(o===void 0||a===void 0){let h=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+s)}i[n]=o*16+a}return i}function yC(t){return j4(G1(t))}function jh(t){return H1(t),j4(G1(Uint8Array.from(t).reverse()))}function K4(t,e){return $4(t.toString(16).padStart(e*2,"0"))}function C1(t,e){return K4(t,e).reverse()}function Fn(t,e,r){let i;if(typeof e=="string")try{i=$4(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(V1(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}function S4(...t){let e=0;for(let i=0;i<t.length;i++){let n=t[i];H1(n),e+=n.length}let r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var S1=t=>typeof t=="bigint"&&K1<=t;function wC(t,e,r){return S1(t)&&S1(e)&&S1(r)&&e<=t&&t<r}function Xf(t,e,r,i){if(!wC(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function xC(t){let e;for(e=0;t>K1;t>>=k4,e+=1);return e}var EC=t=>(vC<<BigInt(t-1))-k4,_C={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||V1(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function J1(t,e,r={}){let i=(n,s,o)=>{let a=_C[s];if(typeof a!="function")throw new Error("invalid validator function");let h=t[n];if(!(o&&h===void 0)&&!a(h,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+h)};for(let[n,s]of Object.entries(e))i(n,s,!1);for(let[n,s]of Object.entries(r))i(n,s,!0);return t}function I4(t){let e=new WeakMap;return(r,...i)=>{let n=e.get(r);if(n!==void 0)return n;let s=t(r,...i);return e.set(r,s),s}}var It=BigInt(0),lt=BigInt(1),ho=BigInt(2),SC=BigInt(3),L1=BigInt(4),A4=BigInt(5),M4=BigInt(8);function vt(t,e){let r=t%e;return r>=It?r:e+r}function IC(t,e,r){if(e<It)throw new Error("invalid exponent, negatives unsupported");if(r<=It)throw new Error("invalid modulus");if(r===lt)return It;let i=lt;for(;e>It;)e&lt&&(i=i*t%r),t=t*t%r,e>>=lt;return i}function an(t,e,r){let i=t;for(;e-- >It;)i*=i,i%=r;return i}function O4(t,e){if(t===It)throw new Error("invert: expected non-zero number");if(e<=It)throw new Error("invert: expected positive modulus, got "+e);let r=vt(t,e),i=e,n=It,s=lt;for(;r!==It;){let o=i/r,a=i%r,h=n-s*o;i=r,r=a,n=s,s=h}if(i!==lt)throw new Error("invert: does not exist");return vt(n,e)}function AC(t){let e=(t-lt)/ho,r,i,n;for(r=t-lt,i=0;r%ho===It;r/=ho,i++);for(n=ho;n<t&&IC(n,e,t)!==t-lt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){let o=(t+lt)/L1;return function(a,h){let d=a.pow(h,o);if(!a.eql(a.sqr(d),h))throw new Error("Cannot find square root");return d}}let s=(r+lt)/ho;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let h=i,d=o.pow(o.mul(o.ONE,n),r),g=o.pow(a,s),y=o.pow(a,r);for(;!o.eql(y,o.ONE);){if(o.eql(y,o.ZERO))return o.ZERO;let _=1;for(let I=o.sqr(y);_<h&&!o.eql(I,o.ONE);_++)I=o.sqr(I);let S=o.pow(d,lt<<BigInt(h-_-1));d=o.sqr(S),g=o.mul(g,S),y=o.mul(y,d),h=_}return g}}function MC(t){if(t%L1===SC){let e=(t+lt)/L1;return function(r,i){let n=r.pow(i,e);if(!r.eql(r.sqr(n),i))throw new Error("Cannot find square root");return n}}if(t%M4===A4){let e=(t-A4)/M4;return function(r,i){let n=r.mul(i,ho),s=r.pow(n,e),o=r.mul(i,s),a=r.mul(r.mul(o,ho),s),h=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(h),i))throw new Error("Cannot find square root");return h}}return AC(t)}var OC=(t,e)=>(vt(t,e)&lt)===lt,RC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NC(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=RC.reduce((i,n)=>(i[n]="function",i),e);return J1(t,r)}function PC(t,e,r){if(r<It)throw new Error("invalid exponent, negatives unsupported");if(r===It)return t.ONE;if(r===lt)return e;let i=t.ONE,n=e;for(;r>It;)r&lt&&(i=t.mul(i,n)),n=t.sqr(n),r>>=lt;return i}function TC(t,e){let r=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),n=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),n),r}function V4(t,e){let r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function H4(t,e,r=!1,i={}){if(t<=It)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:n,nByteLength:s}=V4(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,a=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:EC(n),ZERO:It,ONE:lt,create:h=>vt(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return It<=h&&h<t},is0:h=>h===It,isOdd:h=>(h&lt)===lt,neg:h=>vt(-h,t),eql:(h,d)=>h===d,sqr:h=>vt(h*h,t),add:(h,d)=>vt(h+d,t),sub:(h,d)=>vt(h-d,t),mul:(h,d)=>vt(h*d,t),pow:(h,d)=>PC(a,h,d),div:(h,d)=>vt(h*O4(d,t),t),sqrN:h=>h*h,addN:(h,d)=>h+d,subN:(h,d)=>h-d,mulN:(h,d)=>h*d,inv:h=>O4(h,t),sqrt:i.sqrt||(h=>(o||(o=MC(t)),o(a,h))),invertBatch:h=>TC(a,h),cmov:(h,d,g)=>g?d:h,toBytes:h=>r?C1(h,s):K4(h,s),fromBytes:h=>{if(h.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+h.length);return r?jh(h):yC(h)}});return Object.freeze(a)}var R4=BigInt(0),zh=BigInt(1);function I1(t,e){let r=e.negate();return t?r:e}function G4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function A1(t,e){G4(t,e);let r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function DC(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function CC(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}var M1=new WeakMap,J4=new WeakMap;function O1(t){return J4.get(t)||1}function LC(t,e){return{constTimeNegate:I1,hasPrecomputes(r){return O1(r)!==1},unsafeLadder(r,i,n=t.ZERO){let s=r;for(;i>R4;)i&zh&&(n=n.add(s)),s=s.double(),i>>=zh;return n},precomputeWindow(r,i){let{windows:n,windowSize:s}=A1(i,e),o=[],a=r,h=a;for(let d=0;d<n;d++){h=a,o.push(h);for(let g=1;g<s;g++)h=h.add(a),o.push(h);a=h.double()}return o},wNAF(r,i,n){let{windows:s,windowSize:o}=A1(r,e),a=t.ZERO,h=t.BASE,d=BigInt(2**r-1),g=2**r,y=BigInt(r);for(let _=0;_<s;_++){let S=_*o,I=Number(n&d);n>>=y,I>o&&(I-=g,n+=zh);let O=S,P=S+Math.abs(I)-1,T=_%2!==0,U=I<0;I===0?h=h.add(I1(T,i[O])):a=a.add(I1(U,i[P]))}return{p:a,f:h}},wNAFUnsafe(r,i,n,s=t.ZERO){let{windows:o,windowSize:a}=A1(r,e),h=BigInt(2**r-1),d=2**r,g=BigInt(r);for(let y=0;y<o;y++){let _=y*a;if(n===R4)break;let S=Number(n&h);if(n>>=g,S>a&&(S-=d,n+=zh),S===0)continue;let I=i[_+Math.abs(S)-1];S<0&&(I=I.negate()),s=s.add(I)}return s},getPrecomputes(r,i,n){let s=M1.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&M1.set(i,n(s))),s},wNAFCached(r,i,n){let s=O1(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){let o=O1(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){G4(i,e),J4.set(r,i),M1.delete(r)}}}function FC(t,e,r,i){if(DC(r,t),CC(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");let n=t.ZERO,s=xC(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,h=new Array(a+1).fill(n),d=Math.floor((e.BITS-1)/o)*o,g=n;for(let y=d;y>=0;y-=o){h.fill(n);for(let S=0;S<i.length;S++){let I=i[S],O=Number(I>>BigInt(y)&BigInt(a));h[O]=h[O].add(r[S])}let _=n;for(let S=h.length-1,I=n;S>0;S--)I=I.add(h[S]),_=_.add(I);if(g=g.add(_),y!==0)for(let S=0;S<o;S++)g=g.double()}return g}function BC(t){return NC(t.Fp),J1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...V4(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}var Ni=BigInt(0),_r=BigInt(1),kh=BigInt(2),UC=BigInt(8),qC={zip215:!0};function zC(t){let e=BC(t);return J1(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kC(t){let e=zC(t),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h}=e,d=kh<<BigInt(a*8)-_r,g=r.create,y=H4(e.n,e.nBitLength),_=e.uvRatio||((l,m)=>{try{return{isValid:!0,value:r.sqrt(l*r.inv(m))}}catch{return{isValid:!1,value:Ni}}}),S=e.adjustScalarBytes||(l=>l),I=e.domain||((l,m,x)=>{if(_1("phflag",x),m.length||x)throw new Error("Contexts/pre-hash are not supported");return l});function O(l,m){Xf("coordinate "+l,m,Ni,d)}function P(l){if(!(l instanceof D))throw new Error("ExtendedPoint expected")}let T=I4((l,m)=>{let{ex:x,ey:v,ez:c}=l,w=l.is0();m==null&&(m=w?UC:r.inv(c));let R=g(x*m),E=g(v*m),N=g(c*m);if(w)return{x:Ni,y:_r};if(N!==_r)throw new Error("invZ was invalid");return{x:R,y:E}}),U=I4(l=>{let{a:m,d:x}=e;if(l.is0())throw new Error("bad point: ZERO");let{ex:v,ey:c,ez:w,et:R}=l,E=g(v*v),N=g(c*c),q=g(w*w),A=g(q*q),L=g(E*m),z=g(q*g(L+N)),k=g(A+g(x*g(E*N)));if(z!==k)throw new Error("bad point: equation left != right (1)");let $=g(v*c),W=g(w*R);if($!==W)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(m,x,v,c){this.ex=m,this.ey=x,this.ez=v,this.et=c,O("x",m),O("y",x),O("z",v),O("t",c),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof D)throw new Error("extended point not allowed");let{x,y:v}=m||{};return O("x",x),O("y",v),new D(x,v,_r,g(x*v))}static normalizeZ(m){let x=r.invertBatch(m.map(v=>v.ez));return m.map((v,c)=>v.toAffine(x[c])).map(D.fromAffine)}static msm(m,x){return FC(D,y,m,x)}_setWindowSize(m){V.setWindowSize(this,m)}assertValidity(){U(this)}equals(m){P(m);let{ex:x,ey:v,ez:c}=this,{ex:w,ey:R,ez:E}=m,N=g(x*E),q=g(w*c),A=g(v*E),L=g(R*c);return N===q&&A===L}is0(){return this.equals(D.ZERO)}negate(){return new D(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){let{a:m}=e,{ex:x,ey:v,ez:c}=this,w=g(x*x),R=g(v*v),E=g(kh*g(c*c)),N=g(m*w),q=x+v,A=g(g(q*q)-w-R),L=N+R,z=L-E,k=N-R,$=g(A*z),W=g(L*k),H=g(A*k),G=g(z*L);return new D($,W,G,H)}add(m){P(m);let{a:x,d:v}=e,{ex:c,ey:w,ez:R,et:E}=this,{ex:N,ey:q,ez:A,et:L}=m;if(x===BigInt(-1)){let kt=g((w-c)*(q+N)),re=g((w+c)*(q-N)),te=g(re-kt);if(te===Ni)return this.double();let jt=g(R*kh*L),ie=g(E*kh*A),ne=ie+jt,$t=re+kt,se=ie-jt,fe=g(ne*te),cr=g($t*se),ce=g(ne*se),ue=g(te*$t);return new D(fe,cr,ue,ce)}let z=g(c*N),k=g(w*q),$=g(E*v*L),W=g(R*A),H=g((c+w)*(N+q)-z-k),G=W-$,Z=W+$,J=g(k-x*z),Y=g(H*G),fr=g(Z*J),oe=g(H*J),ae=g(G*Z);return new D(Y,fr,ae,oe)}subtract(m){return this.add(m.negate())}wNAF(m){return V.wNAFCached(this,m,D.normalizeZ)}multiply(m){let x=m;Xf("scalar",x,_r,i);let{p:v,f:c}=this.wNAF(x);return D.normalizeZ([v,c])[0]}multiplyUnsafe(m,x=D.ZERO){let v=m;return Xf("scalar",v,Ni,i),v===Ni?j:this.is0()||v===_r?this:V.wNAFCachedUnsafe(this,v,D.normalizeZ,x)}isSmallOrder(){return this.multiplyUnsafe(h).is0()}isTorsionFree(){return V.unsafeLadder(this,i).is0()}toAffine(m){return T(this,m)}clearCofactor(){let{h:m}=e;return m===_r?this:this.multiplyUnsafe(m)}static fromHex(m,x=!1){let{d:v,a:c}=e,w=r.BYTES;m=Fn("pointHex",m,w),_1("zip215",x);let R=m.slice(),E=m[w-1];R[w-1]=E&-129;let N=jh(R),q=x?d:r.ORDER;Xf("pointHex.y",N,Ni,q);let A=g(N*N),L=g(A-_r),z=g(v*A-c),{isValid:k,value:$}=_(L,z);if(!k)throw new Error("Point.fromHex: invalid y coordinate");let W=($&_r)===_r,H=(E&128)!==0;if(!x&&$===Ni&&H)throw new Error("Point.fromHex: x=0 and x_0=1");return H!==W&&($=g(-$)),D.fromAffine({x:$,y:N})}static fromPrivateKey(m){return K(m).point}toRawBytes(){let{x:m,y:x}=this.toAffine(),v=C1(x,r.BYTES);return v[v.length-1]|=m&_r?128:0,v}toHex(){return G1(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,_r,g(e.Gx*e.Gy)),D.ZERO=new D(Ni,_r,_r,Ni);let{BASE:F,ZERO:j}=D,V=LC(D,a*8);function B(l){return vt(l,i)}function C(l){return B(jh(l))}function K(l){let m=r.BYTES;l=Fn("private key",l,m);let x=Fn("hashed private key",s(l),2*m),v=S(x.slice(0,m)),c=x.slice(m,2*m),w=C(v),R=F.multiply(w),E=R.toRawBytes();return{head:v,prefix:c,scalar:w,point:R,pointBytes:E}}function M(l){return K(l).pointBytes}function u(l=new Uint8Array,...m){let x=S4(...m);return C(s(I(x,Fn("context",l),!!n)))}function b(l,m,x={}){l=Fn("message",l),n&&(l=n(l));let{prefix:v,scalar:c,pointBytes:w}=K(m),R=u(x.context,v,l),E=F.multiply(R).toRawBytes(),N=u(x.context,E,w,l),q=B(R+N*c);Xf("signature.s",q,Ni,i);let A=S4(E,C1(q,r.BYTES));return Fn("result",A,r.BYTES*2)}let p=qC;function f(l,m,x,v=p){let{context:c,zip215:w}=v,R=r.BYTES;l=Fn("signature",l,2*R),m=Fn("message",m),x=Fn("publicKey",x,R),w!==void 0&&_1("zip215",w),n&&(m=n(m));let E=jh(l.slice(R,2*R)),N,q,A;try{N=D.fromHex(x,w),q=D.fromHex(l.slice(0,R),w),A=F.multiplyUnsafe(E)}catch{return!1}if(!w&&N.isSmallOrder())return!1;let L=u(c,q.toRawBytes(),N.toRawBytes(),m);return q.add(N.multiplyUnsafe(L)).subtract(A).clearCofactor().equals(D.ZERO)}return F._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:b,verify:f,ExtendedPoint:D,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>o(r.BYTES),precompute(l=8,m=D.BASE){return m._setWindowSize(l),m.multiply(BigInt(3)),m}}}}BigInt(0),BigInt(1);var W1=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),N4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);var jC=BigInt(1),P4=BigInt(2);BigInt(3);var $C=BigInt(5),KC=BigInt(8);function VC(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=W1,o=t*t%s*t%s,a=an(o,P4,s)*o%s,h=an(a,jC,s)*t%s,d=an(h,$C,s)*h%s,g=an(d,e,s)*d%s,y=an(g,r,s)*g%s,_=an(y,i,s)*y%s,S=an(_,n,s)*_%s,I=an(S,n,s)*_%s,O=an(I,e,s)*d%s;return{pow_p_5_8:an(O,P4,s)*t%s,b2:o}}function HC(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function GC(t,e){let r=W1,i=vt(e*e*e,r),n=vt(i*i*e,r),s=VC(t*n).pow_p_5_8,o=vt(t*i*s,r),a=vt(e*o*o,r),h=o,d=vt(o*N4,r),g=a===t,y=a===vt(-t,r),_=a===vt(-t*N4,r);return g&&(o=h),(y||_)&&(o=d),OC(o,r)&&(o=vt(-o,r)),{isValid:g||y,value:o}}var JC=H4(W1,void 0,!0),WC={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:JC,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:KC,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:gC,randomBytes:VD,adjustScalarBytes:HC,uvRatio:GC},YG=kC(WC);function YC(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function XC(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?YC(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ZC(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,h=t.charAt(0),d=Math.log(a)/Math.log(256),g=Math.log(256)/Math.log(a);function y(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,P=0,T=0,U=I.length;T!==U&&I[T]===0;)T++,O++;for(var D=(U-T)*g+1>>>0,F=new Uint8Array(D);T!==U;){for(var j=I[T],V=0,B=D-1;(j!==0||V<P)&&B!==-1;B--,V++)j+=256*F[B]>>>0,F[B]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");P=V,T++}for(var C=D-P;C!==D&&F[C]===0;)C++;for(var K=h.repeat(O);C<D;++C)K+=t.charAt(F[C]);return K}function _(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var P=0,T=0;I[O]===h;)P++,O++;for(var U=(I.length-O)*d+1>>>0,D=new Uint8Array(U);I[O];){var F=r[I.charCodeAt(O)];if(F===255)return;for(var j=0,V=U-1;(F!==0||j<T)&&V!==-1;V--,j++)F+=a*D[V]>>>0,D[V]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");T=j,O++}if(I[O]!==" "){for(var B=U-T;B!==U&&D[B]===0;)B++;for(var C=new Uint8Array(P+(U-B)),K=P;B!==U;)C[K++]=D[B++];return C}}}function S(I){var O=_(I);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:_,decode:S}}var QC=ZC,eL=QC,W4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},tL=t=>new TextEncoder().encode(t),rL=t=>new TextDecoder().decode(t),F1=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},B1=class{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Y4(this,e)}},U1=class{constructor(e){this.decoders=e}or(e){return Y4(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Y4=(t,e)=>new U1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),q1=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new F1(e,r,i),this.decoder=new B1(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},$h=({name:t,prefix:e,encode:r,decode:i})=>new q1(t,e,r,i),Zf=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=eL(r,e);return $h({prefix:t,name:e,encode:i,decode:s=>W4(n(s))})},iL=(t,e,r,i)=>{let n={};for(let g=0;g<e.length;++g)n[e[g]]=g;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,d=0;for(let g=0;g<s;++g){let y=n[t[g]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|y,a+=r,a>=8&&(a-=8,o[d++]=255&h>>a)}if(a>=r||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o},nL=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let h=0;h<t.length;++h)for(a=a<<8|t[h],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Ft=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>$h({prefix:e,name:t,encode(n){return nL(n,i,r)},decode(n){return iL(n,i,r,t)}}),sL=$h({prefix:"\0",name:"identity",encode:t=>rL(t),decode:t=>tL(t)}),oL=Object.freeze({__proto__:null,identity:sL}),aL=Ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),fL=Object.freeze({__proto__:null,base2:aL}),cL=Ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),uL=Object.freeze({__proto__:null,base8:cL}),hL=Zf({prefix:"9",name:"base10",alphabet:"0123456789"}),dL=Object.freeze({__proto__:null,base10:hL}),lL=Ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pL=Ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),bL=Object.freeze({__proto__:null,base16:lL,base16upper:pL}),gL=Ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vL=Ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mL=Ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yL=Ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wL=Ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xL=Ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),EL=Ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),_L=Ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),SL=Ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),IL=Object.freeze({__proto__:null,base32:gL,base32upper:vL,base32pad:mL,base32padupper:yL,base32hex:wL,base32hexupper:xL,base32hexpad:EL,base32hexpadupper:_L,base32z:SL}),AL=Zf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ML=Zf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),OL=Object.freeze({__proto__:null,base36:AL,base36upper:ML}),RL=Zf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),NL=Zf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),PL=Object.freeze({__proto__:null,base58btc:RL,base58flickr:NL}),TL=Ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),DL=Ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CL=Ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LL=Ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),FL=Object.freeze({__proto__:null,base64:TL,base64pad:DL,base64url:CL,base64urlpad:LL}),X4=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),BL=X4.reduce((t,e,r)=>(t[r]=e,t),[]),UL=X4.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function qL(t){return t.reduce((e,r)=>(e+=BL[r],e),"")}function zL(t){let e=[];for(let r of t){let i=UL[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}var kL=$h({prefix:"\u{1F680}",name:"base256emoji",encode:qL,decode:zL}),jL=Object.freeze({__proto__:null,base256emoji:kL}),$L=Z4,T4=128,KL=127,VL=~KL,HL=Math.pow(2,31);function Z4(t,e,r){e=e||[],r=r||0;for(var i=r;t>=HL;)e[r++]=t&255|T4,t/=128;for(;t&VL;)e[r++]=t&255|T4,t>>>=7;return e[r]=t|0,Z4.bytes=r-i+1,e}var GL=z1,JL=128,D4=127;function z1(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw z1.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&D4)<<n:(o&D4)*Math.pow(2,n),n+=7}while(o>=JL);return z1.bytes=s-i,r}var WL=Math.pow(2,7),YL=Math.pow(2,14),XL=Math.pow(2,21),ZL=Math.pow(2,28),QL=Math.pow(2,35),eF=Math.pow(2,42),tF=Math.pow(2,49),rF=Math.pow(2,56),iF=Math.pow(2,63),nF=function(t){return t<WL?1:t<YL?2:t<XL?3:t<ZL?4:t<QL?5:t<eF?6:t<tF?7:t<rF?8:t<iF?9:10},sF={encode:$L,decode:GL,encodingLength:nF},Q4=sF,C4=(t,e,r=0)=>(Q4.encode(t,e,r),e),L4=t=>Q4.encodingLength(t),k1=(t,e)=>{let r=e.byteLength,i=L4(t),n=i+L4(r),s=new Uint8Array(n+r);return C4(t,s,0),C4(r,s,i),s.set(e,n),new j1(t,r,e,s)},j1=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}},ew=({name:t,code:e,encode:r})=>new $1(t,e,r),$1=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?k1(this.code,r):r.then(i=>k1(this.code,i))}else throw Error("Unknown type, must be binary type")}},tw=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),oF=ew({name:"sha2-256",code:18,encode:tw("SHA-256")}),aF=ew({name:"sha2-512",code:19,encode:tw("SHA-512")}),fF=Object.freeze({__proto__:null,sha256:oF,sha512:aF}),rw=0,cF="identity",iw=W4,uF=t=>k1(rw,iw(t)),hF={code:rw,name:cF,encode:iw,digest:uF},dF=Object.freeze({__proto__:null,identity:hF});new TextEncoder,new TextDecoder;var F4={...oL,...fL,...uL,...dL,...bL,...IL,...OL,...PL,...FL,...jL};({...fF,...dF});function nw(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var B4=nw("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),R1=nw("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=XC(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),XG={utf8:B4,"utf-8":B4,hex:F4.base16,latin1:R1,ascii:R1,binary:R1,...F4};function Ea(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Kh(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ea(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ow(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var sw=ow("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Y1=ow("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Kh(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),lF={utf8:sw,"utf-8":sw,hex:vn.base16,latin1:Y1,ascii:Y1,binary:Y1,...vn},Vh=lF;function X1(t,e="utf8"){let r=Vh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ea(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Z1(t,e="utf8"){let r=Vh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var $F=Pe(Aw(),1);var sb={exports:{}};function SF(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var IF=AF;function AF(t,e,r){var i=r&&r.stringify||SF,n=1;if(typeof t=="object"&&t!==null){var s=e.length+n;if(s===1)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++)o[a]=i(e[a]);return o.join(" ")}if(typeof t!="string")return t;var h=e.length;if(h===0)return t;for(var d="",g=1-n,y=-1,_=t&&t.length||0,S=0;S<_;){if(t.charCodeAt(S)===37&&S+1<_){switch(y=y>-1?y:0,t.charCodeAt(S+1)){case 100:case 102:if(g>=h||e[g]==null)break;y<S&&(d+=t.slice(y,S)),d+=Number(e[g]),y=S+2,S++;break;case 105:if(g>=h||e[g]==null)break;y<S&&(d+=t.slice(y,S)),d+=Math.floor(Number(e[g])),y=S+2,S++;break;case 79:case 111:case 106:if(g>=h||e[g]===void 0)break;y<S&&(d+=t.slice(y,S));var I=typeof e[g];if(I==="string"){d+="'"+e[g]+"'",y=S+2,S++;break}if(I==="function"){d+=e[g].name||"<anonymous>",y=S+2,S++;break}d+=i(e[g]),y=S+2,S++;break;case 115:if(g>=h)break;y<S&&(d+=t.slice(y,S)),d+=String(e[g]),y=S+2,S++;break;case 37:y<S&&(d+=t.slice(y,S)),d+="%",y=S+2,S++,g--;break}++g}++S}return y===-1?t:(y<_&&(d+=t.slice(y)),d)}var Mw=IF;sb.exports=Bn;var rc=kF().console||{},MF={mapHttpRequest:Yh,mapHttpResponse:Yh,wrapRequestSerializer:rb,wrapResponseSerializer:rb,wrapErrorSerializer:rb,req:Yh,res:Yh,err:Rw,errWithCause:Rw};function ws(t,e){return t==="silent"?1/0:e.levels.values[t]}var ob=Symbol("pino.logFuncs"),ib=Symbol("pino.hierarchy"),OF={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ow(t,e){let r={logger:e,parent:t[ib]};e[ib]=r}function RF(t,e,r){let i={};e.forEach(n=>{i[n]=r[n]?r[n]:rc[n]||rc[OF[n]||"log"]||_a}),t[ob]=i}function NF(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Bn(t){t=t||{},t.browser=t.browser||{};let e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let r=t.browser.write||rc;t.browser.write&&(t.browser.asObject=!0);let i=t.serializers||{},n=NF(t.browser.serialize,i),s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof r=="function"&&a.forEach(function(O){r[O]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");let h=t.level||"info",d=Object.create(r);d.log||(d.log=_a),RF(d,a,r),Ow({},d),Object.defineProperty(d,"levelVal",{get:y}),Object.defineProperty(d,"level",{get:_,set:S});let g={transmit:e,serialize:n,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:UF(t),messageKey:t.messageKey||"msg",onChild:t.onChild||_a};d.levels=PF(t),d.level=h,d.isLevelEnabled=function(O){return this.levels.values[O]?this.levels.values[O]>=this.levels.values[this.level]:!1},d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=_a,d.serializers=i,d._serialize=n,d._stdErrSerialize=s,d.child=function(...O){return I.call(this,g,...O)},e&&(d._logEvent=nb());function y(){return ws(this.level,this)}function _(){return this._level}function S(O){if(O!=="silent"&&!this.levels.values[O])throw Error("unknown level "+O);this._level=O,lo(this,g,d,"error"),lo(this,g,d,"fatal"),lo(this,g,d,"warn"),lo(this,g,d,"info"),lo(this,g,d,"debug"),lo(this,g,d,"trace"),o.forEach(P=>{lo(this,g,d,P)})}function I(O,P,T){if(!P)throw new Error("missing bindings for child Pino");T=T||{},n&&P.serializers&&(T.serializers=P.serializers);let U=T.serializers;if(n&&U){var D=Object.assign({},i,U),F=t.browser.serialize===!0?Object.keys(D):n;delete P.serializers,ab([P],F,D,this._stdErrSerialize)}function j(B){this._childLevel=(B._childLevel|0)+1,this.bindings=P,D&&(this.serializers=D,this._serialize=F),e&&(this._logEvent=nb([].concat(B._logEvent.bindings,P)))}j.prototype=this;let V=new j(this);return Ow(this,V),V.child=function(...B){return I.call(this,O,...B)},V.level=T.level||this.level,O.onChild(V),V}return d}function PF(t){let e=t.customLevels||{},r=Object.assign({},Bn.levels.values,e),i=Object.assign({},Bn.levels.labels,TF(e));return{values:r,labels:i}}function TF(t){let e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}Bn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Bn.stdSerializers=MF,Bn.stdTimeFunctions=Object.assign({},{nullTime:Nw,epochTime:Pw,unixTime:qF,isoTime:zF});function DF(t){let e=[];t.bindings&&e.push(t.bindings);let r=t[ib];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function lo(t,e,r,i){if(Object.defineProperty(t,i,{value:ws(t.level,r)>ws(i,r)?_a:r[ob][i],writable:!0,enumerable:!0,configurable:!0}),t[i]===_a){if(!e.transmit)return;let s=e.transmit.level||t.level,o=ws(s,r);if(ws(i,r)<o)return}t[i]=LF(t,e,r,i);let n=DF(t);n.length!==0&&(t[i]=CF(n,t[i]))}function CF(t,e){return function(){return e.apply(this,[...t,...arguments])}}function LF(t,e,r,i){return function(n){return function(){let s=e.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===rc?rc:this;for(var h=0;h<o.length;h++)o[h]=arguments[h];var d=!1;if(e.serialize&&(ab(o,this._serialize,this.serializers,this._stdErrSerialize),d=!0),e.asObject||e.formatters?n.call(a,...FF(this,i,o,s,e)):n.apply(a,o),e.transmit){let g=e.transmit.level||t._level,y=ws(g,r),_=ws(i,r);if(_<y)return;BF(this,{ts:s,methodLevel:i,methodValue:_,transmitLevel:g,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:ws(t._level,r)},o,d)}}}(t[ob][i])}function FF(t,e,r,i,n){let{level:s,log:o=y=>y}=n.formatters||{},a=r.slice(),h=a[0],d={},g=(t._childLevel|0)+1;if(g<1&&(g=1),i&&(d.time=i),s){let y=s(e,t.levels.values[e]);Object.assign(d,y)}else d.level=t.levels.values[e];if(n.asObjectBindingsOnly){if(h!==null&&typeof h=="object")for(;g--&&typeof a[0]=="object";)Object.assign(d,a.shift());return[o(d),...a]}else{if(h!==null&&typeof h=="object"){for(;g--&&typeof a[0]=="object";)Object.assign(d,a.shift());h=a.length?Mw(a.shift(),a):void 0}else typeof h=="string"&&(h=Mw(a.shift(),a));return h!==void 0&&(d[n.messageKey]=h),[o(d)]}}function ab(t,e,r,i){for(let n in t)if(i&&t[n]instanceof Error)t[n]=Bn.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n])&&e)for(let s in t[n])e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function BF(t,e,r,i=!1){let n=e.send,s=e.ts,o=e.methodLevel,a=e.methodValue,h=e.val,d=t._logEvent.bindings;i||ab(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=r.filter(function(g){return d.indexOf(g)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,n(o,t._logEvent,h),t._logEvent=nb(d)}function nb(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Rw(t){let e={type:t.constructor.name,msg:t.message,stack:t.stack};for(let r in t)e[r]===void 0&&(e[r]=t[r]);return e}function UF(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Nw:Pw}function Yh(){return{}}function rb(t){return t}function _a(){}function Nw(){return!1}function Pw(){return Date.now()}function qF(){return Math.round(Date.now()/1e3)}function zF(){return new Date(Date.now()).toISOString()}function kF(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}sb.exports.default=Bn;var TJ=sb.exports.pino=Bn;var DJ=1e3*1024;function KF(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Qw(){return!KF()&&!!(0,cc.getNavigator)()&&!!(0,cc.getDocument)()}function VF(t){return Buffer.from(t,"base64").toString("utf-8")}var Xh=BigInt(2**32-1),Tw=BigInt(32);function e8(t,e=!1){return e?{h:Number(t&Xh),l:Number(t>>Tw&Xh)}:{h:Number(t>>Tw&Xh)|0,l:Number(t&Xh)|0}}function t8(t,e=!1){let r=t.length,i=new Uint32Array(r),n=new Uint32Array(r);for(let s=0;s<r;s++){let{h:o,l:a}=e8(t[s],e);[i[s],n[s]]=[o,a]}return[i,n]}var Dw=(t,e,r)=>t>>>r,Cw=(t,e,r)=>t<<32-r|e>>>r,Ms=(t,e,r)=>t>>>r|e<<32-r,Os=(t,e,r)=>t<<32-r|e>>>r,sc=(t,e,r)=>t<<64-r|e>>>r-32,oc=(t,e,r)=>t>>>r-32|e<<64-r,HF=(t,e)=>e,GF=(t,e)=>t,JF=(t,e,r)=>t<<r|e>>>32-r,WF=(t,e,r)=>e<<r|t>>>32-r,YF=(t,e,r)=>e<<r-32|t>>>64-r,XF=(t,e,r)=>t<<r-32|e>>>64-r;function Ti(t,e,r,i){let n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}var Cb=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Lb=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,ZF=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),QF=(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,eB=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0),tB=(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,Sa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function fd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ts(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Di(t,...e){if(!fd(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function r8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ts(t.outputLen),Ts(t.blockLen)}function Ds(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fb(t,e){Di(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ac(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ci(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function fb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function fn(t,e){return t<<32-e|t>>>e}var i8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function n8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}var qn=i8?t=>t:t=>n8(t);function rB(t){for(let e=0;e<t.length;e++)t[e]=n8(t[e]);return t}var Rs=i8?t=>t:rB,s8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",iB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ma(t){if(Di(t),s8)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=iB[t[r]];return e}var Un={_0:48,_9:57,A:65,F:70,a:97,f:102};function Lw(t){if(t>=Un._0&&t<=Un._9)return t-Un._0;if(t>=Un.A&&t<=Un.F)return t-(Un.A-10);if(t>=Un.a&&t<=Un.f)return t-(Un.a-10)}function rd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(s8)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){let o=Lw(t.charCodeAt(s)),a=Lw(t.charCodeAt(s+1));if(o===void 0||a===void 0){let h=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+s)}i[n]=o*16+a}return i}function o8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function jn(t){return typeof t=="string"&&(t=o8(t)),Di(t),t}function Ns(...t){let e=0;for(let i=0;i<t.length;i++){let n=t[i];Di(n),e+=n.length}let r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let s=t[i];r.set(s,n),n+=s.length}return r}var Ra=class{};function uc(t){let e=i=>t().update(jn(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function nB(t){let e=(i,n)=>t(n).update(jn(i)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}function Bb(t=32){if(Sa&&typeof Sa.getRandomValues=="function")return Sa.getRandomValues(new Uint8Array(t));if(Sa&&typeof Sa.randomBytes=="function")return Uint8Array.from(Sa.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}var sB=BigInt(0),ic=BigInt(1),oB=BigInt(2),aB=BigInt(7),fB=BigInt(256),cB=BigInt(113),a8=[],f8=[],c8=[];for(let t=0,e=ic,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],a8.push(2*(5*i+r)),f8.push((t+1)*(t+2)/2%64);let n=sB;for(let s=0;s<7;s++)e=(e<<ic^(e>>aB)*cB)%fB,e&oB&&(n^=ic<<(ic<<BigInt(s))-ic);c8.push(n)}var u8=t8(c8,!0),uB=u8[0],hB=u8[1],Fw=(t,e,r)=>r>32?YF(t,e,r):JF(t,e,r),Bw=(t,e,r)=>r>32?XF(t,e,r):WF(t,e,r);function dB(t,e=24){let r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,h=(o+2)%10,d=r[h],g=r[h+1],y=Fw(d,g,1)^r[a],_=Bw(d,g,1)^r[a+1];for(let S=0;S<50;S+=10)t[o+S]^=y,t[o+S+1]^=_}let n=t[2],s=t[3];for(let o=0;o<24;o++){let a=f8[o],h=Fw(n,s,a),d=Bw(n,s,a),g=a8[o];n=t[g],s=t[g+1],t[g]=h,t[g+1]=d}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=uB[i],t[1]^=hB[i]}Ci(r)}var gb=class t extends Ra{constructor(e,r,i,n=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,Ts(i),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ac(this.state)}clone(){return this._cloneInto()}keccak(){Rs(this.state32),dB(this.state32,this.rounds),Rs(this.state32),this.posOut=0,this.pos=0}update(e){Ds(this),e=jn(e),Di(e);let{blockLen:r,state:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:i,blockLen:n}=this;e[i]^=r,r&128&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Ds(this,!1),Di(e),this.finish();let r=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();let o=Math.min(i-this.posOut,s-n);e.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ts(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Fb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ci(this.state)}_cloneInto(e){let{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new t(r,i,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}},lB=(t,e,r)=>uc(()=>new gb(e,t,r)),jJ=lB(1,136,256/8);function pB(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),h=i?4:0,d=i?0:4;t.setUint32(e+h,o,i),t.setUint32(e+d,a,i)}function bB(t,e,r){return t&e^~t&r}function gB(t,e,r){return t&e^t&r^e&r}var id=class extends Ra{constructor(e,r,i,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(e),this.view=fb(this.buffer)}update(e){Ds(this),e=jn(e),Di(e);let{view:r,buffer:i,blockLen:n}=this,s=e.length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let h=fb(e);for(;n<=s-o;o+=n)this.process(h,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ds(this),Fb(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:n,isLE:s}=this,{pos:o}=this;r[o++]=128,Ci(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(i,0),o=0);for(let y=o;y<n;y++)r[y]=0;pB(i,n-8,BigInt(this.length*8),s),this.process(i,0);let a=fb(e),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let d=h/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)a.setUint32(4*y,g[y],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=n,e.pos=a,n%r&&e.buffer.set(i),e}clone(){return this._cloneInto()}},xs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),nr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),vB=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Es=new Uint32Array(64),vb=class extends id{constructor(e=32){super(64,e,8,!1),this.A=xs[0]|0,this.B=xs[1]|0,this.C=xs[2]|0,this.D=xs[3]|0,this.E=xs[4]|0,this.F=xs[5]|0,this.G=xs[6]|0,this.H=xs[7]|0}get(){let{A:e,B:r,C:i,D:n,E:s,F:o,G:a,H:h}=this;return[e,r,i,n,s,o,a,h]}set(e,r,i,n,s,o,a,h){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=h|0}process(e,r){for(let y=0;y<16;y++,r+=4)Es[y]=e.getUint32(r,!1);for(let y=16;y<64;y++){let _=Es[y-15],S=Es[y-2],I=fn(_,7)^fn(_,18)^_>>>3,O=fn(S,17)^fn(S,19)^S>>>10;Es[y]=O+Es[y-7]+I+Es[y-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:h,G:d,H:g}=this;for(let y=0;y<64;y++){let _=fn(a,6)^fn(a,11)^fn(a,25),S=g+_+bB(a,h,d)+vB[y]+Es[y]|0,I=(fn(i,2)^fn(i,13)^fn(i,22))+gB(i,n,s)|0;g=d,d=h,h=a,a=o+S|0,o=s,s=n,n=i,i=S+I|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,h=h+this.F|0,d=d+this.G|0,g=g+this.H|0,this.set(i,n,s,o,a,h,d,g)}roundClean(){Ci(Es)}destroy(){this.set(0,0,0,0,0,0,0,0),Ci(this.buffer)}},h8=t8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),mB=h8[0],yB=h8[1],_s=new Uint32Array(80),Ss=new Uint32Array(80),fc=class extends id{constructor(e=64){super(128,e,16,!1),this.Ah=nr[0]|0,this.Al=nr[1]|0,this.Bh=nr[2]|0,this.Bl=nr[3]|0,this.Ch=nr[4]|0,this.Cl=nr[5]|0,this.Dh=nr[6]|0,this.Dl=nr[7]|0,this.Eh=nr[8]|0,this.El=nr[9]|0,this.Fh=nr[10]|0,this.Fl=nr[11]|0,this.Gh=nr[12]|0,this.Gl=nr[13]|0,this.Hh=nr[14]|0,this.Hl=nr[15]|0}get(){let{Ah:e,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:h,Eh:d,El:g,Fh:y,Fl:_,Gh:S,Gl:I,Hh:O,Hl:P}=this;return[e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P]}set(e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=h|0,this.Eh=d|0,this.El=g|0,this.Fh=y|0,this.Fl=_|0,this.Gh=S|0,this.Gl=I|0,this.Hh=O|0,this.Hl=P|0}process(e,r){for(let D=0;D<16;D++,r+=4)_s[D]=e.getUint32(r),Ss[D]=e.getUint32(r+=4);for(let D=16;D<80;D++){let F=_s[D-15]|0,j=Ss[D-15]|0,V=Ms(F,j,1)^Ms(F,j,8)^Dw(F,j,7),B=Os(F,j,1)^Os(F,j,8)^Cw(F,j,7),C=_s[D-2]|0,K=Ss[D-2]|0,M=Ms(C,K,19)^sc(C,K,61)^Dw(C,K,6),u=Os(C,K,19)^oc(C,K,61)^Cw(C,K,6),b=ZF(B,u,Ss[D-7],Ss[D-16]),p=QF(b,V,M,_s[D-7],_s[D-16]);_s[D]=p|0,Ss[D]=b|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:h,Dh:d,Dl:g,Eh:y,El:_,Fh:S,Fl:I,Gh:O,Gl:P,Hh:T,Hl:U}=this;for(let D=0;D<80;D++){let F=Ms(y,_,14)^Ms(y,_,18)^sc(y,_,41),j=Os(y,_,14)^Os(y,_,18)^oc(y,_,41),V=y&S^~y&O,B=_&I^~_&P,C=eB(U,j,B,yB[D],Ss[D]),K=tB(C,T,F,V,mB[D],_s[D]),M=C|0,u=Ms(i,n,28)^sc(i,n,34)^sc(i,n,39),b=Os(i,n,28)^oc(i,n,34)^oc(i,n,39),p=i&s^i&a^s&a,f=n&o^n&h^o&h;T=O|0,U=P|0,O=S|0,P=I|0,S=y|0,I=_|0,{h:y,l:_}=Ti(d|0,g|0,K|0,M|0),d=a|0,g=h|0,a=s|0,h=o|0,s=i|0,o=n|0;let l=Cb(M,b,f);i=Lb(l,K,u,p),n=l|0}({h:i,l:n}=Ti(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=Ti(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:h}=Ti(this.Ch|0,this.Cl|0,a|0,h|0),{h:d,l:g}=Ti(this.Dh|0,this.Dl|0,d|0,g|0),{h:y,l:_}=Ti(this.Eh|0,this.El|0,y|0,_|0),{h:S,l:I}=Ti(this.Fh|0,this.Fl|0,S|0,I|0),{h:O,l:P}=Ti(this.Gh|0,this.Gl|0,O|0,P|0),{h:T,l:U}=Ti(this.Hh|0,this.Hl|0,T|0,U|0),this.set(i,n,s,o,a,h,d,g,y,_,S,I,O,P,T,U)}roundClean(){Ci(_s,Ss)}destroy(){Ci(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},mb=class extends fc{constructor(){super(48),this.Ah=ir[0]|0,this.Al=ir[1]|0,this.Bh=ir[2]|0,this.Bl=ir[3]|0,this.Ch=ir[4]|0,this.Cl=ir[5]|0,this.Dh=ir[6]|0,this.Dl=ir[7]|0,this.Eh=ir[8]|0,this.El=ir[9]|0,this.Fh=ir[10]|0,this.Fl=ir[11]|0,this.Gh=ir[12]|0,this.Gl=ir[13]|0,this.Hh=ir[14]|0,this.Hl=ir[15]|0}},sr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]),yb=class extends fc{constructor(){super(32),this.Ah=sr[0]|0,this.Al=sr[1]|0,this.Bh=sr[2]|0,this.Bl=sr[3]|0,this.Ch=sr[4]|0,this.Cl=sr[5]|0,this.Dh=sr[6]|0,this.Dl=sr[7]|0,this.Eh=sr[8]|0,this.El=sr[9]|0,this.Fh=sr[10]|0,this.Fl=sr[11]|0,this.Gh=sr[12]|0,this.Gl=sr[13]|0,this.Hh=sr[14]|0,this.Hl=sr[15]|0}},d8=uc(()=>new vb),wB=uc(()=>new fc),xB=uc(()=>new mb),$J=uc(()=>new yb),EB=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),mt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Q=new Uint32Array(32);function Is(t,e,r,i,n,s){let o=n[s],a=n[s+1],h=Q[2*t],d=Q[2*t+1],g=Q[2*e],y=Q[2*e+1],_=Q[2*r],S=Q[2*r+1],I=Q[2*i],O=Q[2*i+1],P=Cb(h,g,o);d=Lb(P,d,y,a),h=P|0,{Dh:O,Dl:I}={Dh:O^d,Dl:I^h},{Dh:O,Dl:I}={Dh:HF(O,I),Dl:GF(O)},{h:S,l:_}=Ti(S,_,O,I),{Bh:y,Bl:g}={Bh:y^S,Bl:g^_},{Bh:y,Bl:g}={Bh:Ms(y,g,24),Bl:Os(y,g,24)},Q[2*t]=h,Q[2*t+1]=d,Q[2*e]=g,Q[2*e+1]=y,Q[2*r]=_,Q[2*r+1]=S,Q[2*i]=I,Q[2*i+1]=O}function As(t,e,r,i,n,s){let o=n[s],a=n[s+1],h=Q[2*t],d=Q[2*t+1],g=Q[2*e],y=Q[2*e+1],_=Q[2*r],S=Q[2*r+1],I=Q[2*i],O=Q[2*i+1],P=Cb(h,g,o);d=Lb(P,d,y,a),h=P|0,{Dh:O,Dl:I}={Dh:O^d,Dl:I^h},{Dh:O,Dl:I}={Dh:Ms(O,I,16),Dl:Os(O,I,16)},{h:S,l:_}=Ti(S,_,O,I),{Bh:y,Bl:g}={Bh:y^S,Bl:g^_},{Bh:y,Bl:g}={Bh:sc(y,g,63),Bl:oc(y,g,63)},Q[2*t]=h,Q[2*t+1]=d,Q[2*e]=g,Q[2*e+1]=y,Q[2*r]=_,Q[2*r+1]=S,Q[2*i]=I,Q[2*i+1]=O}function _B(t,e={},r,i,n){if(Ts(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");let{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==i)throw new Error("salt must be undefined or "+i);if(a!==void 0&&a.length!==n)throw new Error("personalization must be undefined or "+n)}var wb=class extends Ra{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ts(e),Ts(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=ac(this.buffer)}update(e){Ds(this),e=jn(e),Di(e);let{blockLen:r,buffer:i,buffer32:n}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let h=0;h<s;){this.pos===r&&(Rs(n),this.compress(n,0,!1),Rs(n),this.pos=0);let d=Math.min(r-this.pos,s-h),g=o+h;if(d===r&&!(g%4)&&h+d<s){let y=new Uint32Array(a,g,Math.floor((s-h)/4));Rs(y);for(let _=0;h+r<s;_+=n.length,h+=r)this.length+=r,this.compress(y,_,!1);Rs(y);continue}i.set(e.subarray(h,h+d),this.pos),this.pos+=d,this.length+=d,h+=d}return this}digestInto(e){Ds(this),Fb(e,this);let{pos:r,buffer32:i}=this;this.finished=!0,Ci(this.buffer.subarray(r)),Rs(i),this.compress(i,0,!0),Rs(i);let n=ac(e);this.get().forEach((s,o)=>n[o]=qn(s))}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){let{buffer:r,length:i,finished:n,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=n,e.length=i,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}},xb=class extends wb{constructor(e={}){let r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=mt[0]|0,this.v0h=mt[1]|0,this.v1l=mt[2]|0,this.v1h=mt[3]|0,this.v2l=mt[4]|0,this.v2h=mt[5]|0,this.v3l=mt[6]|0,this.v3h=mt[7]|0,this.v4l=mt[8]|0,this.v4h=mt[9]|0,this.v5l=mt[10]|0,this.v5h=mt[11]|0,this.v6l=mt[12]|0,this.v6h=mt[13]|0,this.v7l=mt[14]|0,this.v7h=mt[15]|0,_B(r,e,64,16,16);let{key:i,personalization:n,salt:s}=e,o=0;if(i!==void 0&&(i=jn(i),o=i.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=jn(s);let a=ac(s);this.v4l^=qn(a[0]),this.v4h^=qn(a[1]),this.v5l^=qn(a[2]),this.v5h^=qn(a[3])}if(n!==void 0){n=jn(n);let a=ac(n);this.v6l^=qn(a[0]),this.v6h^=qn(a[1]),this.v7l^=qn(a[2]),this.v7h^=qn(a[3])}if(i!==void 0){let a=new Uint8Array(this.blockLen);a.set(i),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:i,v1h:n,v2l:s,v2h:o,v3l:a,v3h:h,v4l:d,v4h:g,v5l:y,v5h:_,v6l:S,v6h:I,v7l:O,v7h:P}=this;return[e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P]}set(e,r,i,n,s,o,a,h,d,g,y,_,S,I,O,P){this.v0l=e|0,this.v0h=r|0,this.v1l=i|0,this.v1h=n|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=h|0,this.v4l=d|0,this.v4h=g|0,this.v5l=y|0,this.v5h=_|0,this.v6l=S|0,this.v6h=I|0,this.v7l=O|0,this.v7h=P|0}compress(e,r,i){this.get().forEach((h,d)=>Q[d]=h),Q.set(mt,16);let{h:n,l:s}=e8(BigInt(this.length));Q[24]=mt[8]^s,Q[25]=mt[9]^n,i&&(Q[28]=~Q[28],Q[29]=~Q[29]);let o=0,a=EB;for(let h=0;h<12;h++)Is(0,4,8,12,e,r+2*a[o++]),As(0,4,8,12,e,r+2*a[o++]),Is(1,5,9,13,e,r+2*a[o++]),As(1,5,9,13,e,r+2*a[o++]),Is(2,6,10,14,e,r+2*a[o++]),As(2,6,10,14,e,r+2*a[o++]),Is(3,7,11,15,e,r+2*a[o++]),As(3,7,11,15,e,r+2*a[o++]),Is(0,5,10,15,e,r+2*a[o++]),As(0,5,10,15,e,r+2*a[o++]),Is(1,6,11,12,e,r+2*a[o++]),As(1,6,11,12,e,r+2*a[o++]),Is(2,7,8,13,e,r+2*a[o++]),As(2,7,8,13,e,r+2*a[o++]),Is(3,4,9,14,e,r+2*a[o++]),As(3,4,9,14,e,r+2*a[o++]);this.v0l^=Q[0]^Q[16],this.v0h^=Q[1]^Q[17],this.v1l^=Q[2]^Q[18],this.v1h^=Q[3]^Q[19],this.v2l^=Q[4]^Q[20],this.v2h^=Q[5]^Q[21],this.v3l^=Q[6]^Q[22],this.v3h^=Q[7]^Q[23],this.v4l^=Q[8]^Q[24],this.v4h^=Q[9]^Q[25],this.v5l^=Q[10]^Q[26],this.v5h^=Q[11]^Q[27],this.v6l^=Q[12]^Q[28],this.v6h^=Q[13]^Q[29],this.v7l^=Q[14]^Q[30],this.v7h^=Q[15]^Q[31],Ci(Q)}destroy(){this.destroyed=!0,Ci(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},KJ=nB(t=>new xb(t));function l8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Eb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function cb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Sr(t,...e){if(!l8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Uw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function SB(t,e){Sr(t);let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Ps(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Na(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function IB(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}var AB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function MB(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function _b(t){if(typeof t=="string")t=MB(t);else if(l8(t))t=Sb(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function OB(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function RB(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}var NB=(t,e)=>{function r(i,...n){if(Sr(i),!AB)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){let d=n[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?Sr(d):Sr(d,t.nonceLength)}let s=t.tagLength;s&&n[1]!==void 0&&Sr(n[1]);let o=e(i,...n),a=(d,g)=>{if(g!==void 0){if(d!==2)throw new Error("cipher output not supported");Sr(g)}},h=!1;return{encrypt(d,g){if(h)throw new Error("cannot encrypt() twice with same key + nonce");return h=!0,Sr(d),a(o.encrypt.length,g),o.encrypt(d,g)},decrypt(d,g){if(Sr(d),s&&d.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,g),o.decrypt(d,g)}}}return Object.assign(r,t),r};function qw(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!TB(e))throw new Error("invalid output, must be aligned");return e}function zw(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),h=i?4:0,d=i?0:4;t.setUint32(e+h,o,i),t.setUint32(e+d,a,i)}function PB(t,e,r){Eb(r);let i=new Uint8Array(16),n=IB(i);return zw(n,0,BigInt(e),r),zw(n,8,BigInt(t),r),i}function TB(t){return t.byteOffset%4===0}function Sb(t){return Uint8Array.from(t)}var p8=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),DB=p8("expand 16-byte k"),CB=p8("expand 32-byte k"),LB=Ps(DB),FB=Ps(CB);function Ke(t,e){return t<<e|t>>>32-e}function Ib(t){return t.byteOffset%4===0}var Zh=64,BB=16,b8=2**32-1,kw=new Uint32Array;function UB(t,e,r,i,n,s,o,a){let h=n.length,d=new Uint8Array(Zh),g=Ps(d),y=Ib(n)&&Ib(s),_=y?Ps(n):kw,S=y?Ps(s):kw;for(let I=0;I<h;o++){if(t(e,r,i,g,o,a),o>=b8)throw new Error("arx: counter overflow");let O=Math.min(Zh,h-I);if(y&&O===Zh){let P=I/4;if(I%4!==0)throw new Error("arx: invalid block position");for(let T=0,U;T<BB;T++)U=P+T,S[U]=_[U]^g[T];I+=Zh;continue}for(let P=0,T;P<O;P++)T=I+P,s[T]=n[T]^d[P];I+=O}}function qB(t,e){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=OB({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return cb(n),cb(o),Eb(s),Eb(r),(a,h,d,g,y=0)=>{Sr(a),Sr(h),Sr(d);let _=d.length;if(g===void 0&&(g=new Uint8Array(_)),Sr(g),cb(y),y<0||y>=b8)throw new Error("arx: counter overflow");if(g.length<_)throw new Error(`arx: output (${g.length}) is shorter than data (${_})`);let S=[],I=a.length,O,P;if(I===32)S.push(O=Sb(a)),P=FB;else if(I===16&&r)O=new Uint8Array(32),O.set(a),O.set(a,16),P=LB,S.push(O);else throw new Error(`arx: invalid 32-byte key, got length=${I}`);Ib(h)||S.push(h=Sb(h));let T=Ps(O);if(i){if(h.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(P,T,Ps(h.subarray(0,16)),T),h=h.subarray(16)}let U=16-n;if(U!==h.length)throw new Error(`arx: nonce must be ${U} or 16 bytes`);if(U!==12){let F=new Uint8Array(12);F.set(h,s?0:12-h.length),h=F,S.push(h)}let D=Ps(h);return UB(t,P,T,D,d,g,y,o),Na(...S),g}}var Ut=(t,e)=>t[e++]&255|(t[e++]&255)<<8,Ab=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=_b(e),Sr(e,32);let r=Ut(e,0),i=Ut(e,2),n=Ut(e,4),s=Ut(e,6),o=Ut(e,8),a=Ut(e,10),h=Ut(e,12),d=Ut(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|h<<5)&8065,this.r[8]=(h>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let g=0;g<8;g++)this.pad[g]=Ut(e,16+2*g)}process(e,r,i=!1){let n=i?0:2048,{h:s,r:o}=this,a=o[0],h=o[1],d=o[2],g=o[3],y=o[4],_=o[5],S=o[6],I=o[7],O=o[8],P=o[9],T=Ut(e,r+0),U=Ut(e,r+2),D=Ut(e,r+4),F=Ut(e,r+6),j=Ut(e,r+8),V=Ut(e,r+10),B=Ut(e,r+12),C=Ut(e,r+14),K=s[0]+(T&8191),M=s[1]+((T>>>13|U<<3)&8191),u=s[2]+((U>>>10|D<<6)&8191),b=s[3]+((D>>>7|F<<9)&8191),p=s[4]+((F>>>4|j<<12)&8191),f=s[5]+(j>>>1&8191),l=s[6]+((j>>>14|V<<2)&8191),m=s[7]+((V>>>11|B<<5)&8191),x=s[8]+((B>>>8|C<<8)&8191),v=s[9]+(C>>>5|n),c=0,w=c+K*a+M*(5*P)+u*(5*O)+b*(5*I)+p*(5*S);c=w>>>13,w&=8191,w+=f*(5*_)+l*(5*y)+m*(5*g)+x*(5*d)+v*(5*h),c+=w>>>13,w&=8191;let R=c+K*h+M*a+u*(5*P)+b*(5*O)+p*(5*I);c=R>>>13,R&=8191,R+=f*(5*S)+l*(5*_)+m*(5*y)+x*(5*g)+v*(5*d),c+=R>>>13,R&=8191;let E=c+K*d+M*h+u*a+b*(5*P)+p*(5*O);c=E>>>13,E&=8191,E+=f*(5*I)+l*(5*S)+m*(5*_)+x*(5*y)+v*(5*g),c+=E>>>13,E&=8191;let N=c+K*g+M*d+u*h+b*a+p*(5*P);c=N>>>13,N&=8191,N+=f*(5*O)+l*(5*I)+m*(5*S)+x*(5*_)+v*(5*y),c+=N>>>13,N&=8191;let q=c+K*y+M*g+u*d+b*h+p*a;c=q>>>13,q&=8191,q+=f*(5*P)+l*(5*O)+m*(5*I)+x*(5*S)+v*(5*_),c+=q>>>13,q&=8191;let A=c+K*_+M*y+u*g+b*d+p*h;c=A>>>13,A&=8191,A+=f*a+l*(5*P)+m*(5*O)+x*(5*I)+v*(5*S),c+=A>>>13,A&=8191;let L=c+K*S+M*_+u*y+b*g+p*d;c=L>>>13,L&=8191,L+=f*h+l*a+m*(5*P)+x*(5*O)+v*(5*I),c+=L>>>13,L&=8191;let z=c+K*I+M*S+u*_+b*y+p*g;c=z>>>13,z&=8191,z+=f*d+l*h+m*a+x*(5*P)+v*(5*O),c+=z>>>13,z&=8191;let k=c+K*O+M*I+u*S+b*_+p*y;c=k>>>13,k&=8191,k+=f*g+l*d+m*h+x*a+v*(5*P),c+=k>>>13,k&=8191;let $=c+K*P+M*O+u*I+b*S+p*_;c=$>>>13,$&=8191,$+=f*y+l*g+m*d+x*h+v*a,c+=$>>>13,$&=8191,c=(c<<2)+c|0,c=c+w|0,w=c&8191,c=c>>>13,R+=c,s[0]=w,s[1]=R,s[2]=E,s[3]=N,s[4]=q,s[5]=A,s[6]=L,s[7]=z,s[8]=k,s[9]=$}finalize(){let{h:e,pad:r}=this,i=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let s=(n^1)-1;for(let a=0;a<10;a++)i[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Na(i)}update(e){Uw(this),e=_b(e),Sr(e);let{buffer:r,blockLen:i}=this,n=e.length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Na(this.h,this.r,this.buffer,this.pad)}digestInto(e){Uw(this),SB(e,this),this.finished=!0;let{buffer:r,h:i}=this,{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=i[o]>>>0,e[s++]=i[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}};function zB(t){let e=(i,n)=>t(n).update(_b(i)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}var kB=zB(t=>new Ab(t));function jB(t,e,r,i,n,s=20){let o=t[0],a=t[1],h=t[2],d=t[3],g=e[0],y=e[1],_=e[2],S=e[3],I=e[4],O=e[5],P=e[6],T=e[7],U=n,D=r[0],F=r[1],j=r[2],V=o,B=a,C=h,K=d,M=g,u=y,b=_,p=S,f=I,l=O,m=P,x=T,v=U,c=D,w=F,R=j;for(let N=0;N<s;N+=2)V=V+M|0,v=Ke(v^V,16),f=f+v|0,M=Ke(M^f,12),V=V+M|0,v=Ke(v^V,8),f=f+v|0,M=Ke(M^f,7),B=B+u|0,c=Ke(c^B,16),l=l+c|0,u=Ke(u^l,12),B=B+u|0,c=Ke(c^B,8),l=l+c|0,u=Ke(u^l,7),C=C+b|0,w=Ke(w^C,16),m=m+w|0,b=Ke(b^m,12),C=C+b|0,w=Ke(w^C,8),m=m+w|0,b=Ke(b^m,7),K=K+p|0,R=Ke(R^K,16),x=x+R|0,p=Ke(p^x,12),K=K+p|0,R=Ke(R^K,8),x=x+R|0,p=Ke(p^x,7),V=V+u|0,R=Ke(R^V,16),m=m+R|0,u=Ke(u^m,12),V=V+u|0,R=Ke(R^V,8),m=m+R|0,u=Ke(u^m,7),B=B+b|0,v=Ke(v^B,16),x=x+v|0,b=Ke(b^x,12),B=B+b|0,v=Ke(v^B,8),x=x+v|0,b=Ke(b^x,7),C=C+p|0,c=Ke(c^C,16),f=f+c|0,p=Ke(p^f,12),C=C+p|0,c=Ke(c^C,8),f=f+c|0,p=Ke(p^f,7),K=K+M|0,w=Ke(w^K,16),l=l+w|0,M=Ke(M^l,12),K=K+M|0,w=Ke(w^K,8),l=l+w|0,M=Ke(M^l,7);let E=0;i[E++]=o+V|0,i[E++]=a+B|0,i[E++]=h+C|0,i[E++]=d+K|0,i[E++]=g+M|0,i[E++]=y+u|0,i[E++]=_+b|0,i[E++]=S+p|0,i[E++]=I+f|0,i[E++]=O+l|0,i[E++]=P+m|0,i[E++]=T+x|0,i[E++]=U+v|0,i[E++]=D+c|0,i[E++]=F+w|0,i[E++]=j+R|0}var $B=qB(jB,{counterRight:!1,counterLength:4,allowShortKeys:!1}),KB=new Uint8Array(16),jw=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(KB.subarray(r))},VB=new Uint8Array(32);function $w(t,e,r,i,n){let s=t(e,r,VB),o=kB.create(s);n&&jw(o,n),jw(o,i);let a=PB(i.length,n?n.length:0,!0);o.update(a);let h=o.digest();return Na(s,a),h}var HB=t=>(e,r,i)=>({encrypt(n,s){let o=n.length;s=qw(o+16,s,!1),s.set(n);let a=s.subarray(0,-16);t(e,r,a,a,1);let h=$w(t,e,r,a,i);return s.set(h,o),Na(h),s},decrypt(n,s){s=qw(n.length-16,s,!1);let o=n.subarray(0,-16),a=n.subarray(-16),h=$w(t,e,r,o,i);if(!RB(a,h))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),Na(h),s}}),VJ=NB({blockSize:64,nonceLength:12,tagLength:16},HB($B)),nd=class extends Ra{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,r8(e);let i=jn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Ci(s)}update(e){return Ds(this),this.iHash.update(e),this}digestInto(e){Ds(this),Di(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},g8=(t,e,r)=>new nd(t,e).update(r).digest();g8.create=(t,e)=>new nd(t,e);var HJ=Uint8Array.from([0]),GJ=Uint8Array.of();var GB=d8,Ub=BigInt(0),Mb=BigInt(1);function sd(t,e=""){if(typeof t!="boolean"){let r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function po(t,e,r=""){let i=fd(t),n=t?.length,s=e!==void 0;if(!i||s&&n!==e){let o=r&&`"${r}" `,a=s?` of length ${e}`:"",h=i?`length=${n}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+h)}return t}function Qh(t){let e=t.toString(16);return e.length&1?"0"+e:e}function v8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ub:BigInt("0x"+t)}function cd(t){return v8(Ma(t))}function od(t){return Di(t),v8(Ma(Uint8Array.from(t).reverse()))}function qb(t,e){return rd(t.toString(16).padStart(e*2,"0"))}function zb(t,e){return qb(t,e).reverse()}function or(t,e,r){let i;if(typeof e=="string")try{i=rd(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(fd(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");let n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}var ub=t=>typeof t=="bigint"&&Ub<=t;function JB(t,e,r){return ub(t)&&ub(e)&&ub(r)&&e<=t&&t<r}function Ob(t,e,r,i){if(!JB(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function m8(t){let e;for(e=0;t>Ub;t>>=Mb,e+=1);return e}var hc=t=>(Mb<<BigInt(t))-Mb;function WB(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let i=_=>new Uint8Array(_),n=_=>Uint8Array.of(_),s=i(t),o=i(t),a=0,h=()=>{s.fill(1),o.fill(0),a=0},d=(..._)=>r(o,s,..._),g=(_=i(0))=>{o=d(n(0),_),s=d(),_.length!==0&&(o=d(n(1),_),s=d())},y=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let _=0,S=[];for(;_<e;){s=d();let I=s.slice();S.push(I),_+=s.length}return Ns(...S)};return(_,S)=>{h(),g(_);let I;for(;!(I=S(y()));)g();return h(),I}}function ud(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function i(n,s,o){let a=t[n];if(o&&a===void 0)return;let h=typeof a;if(h!==s||a===null)throw new Error(`param "${n}" is invalid: expected ${s}, got ${h}`)}Object.entries(e).forEach(([n,s])=>i(n,s,!1)),Object.entries(r).forEach(([n,s])=>i(n,s,!0))}function Kw(t){let e=new WeakMap;return(r,...i)=>{let n=e.get(r);if(n!==void 0)return n;let s=t(r,...i);return e.set(r,s),s}}var Ir=BigInt(0),gr=BigInt(1),bo=BigInt(2),y8=BigInt(3),w8=BigInt(4),x8=BigInt(5),YB=BigInt(7),E8=BigInt(8),XB=BigInt(9),_8=BigInt(16);function $r(t,e){let r=t%e;return r>=Ir?r:e+r}function Pi(t,e,r){let i=t;for(;e-- >Ir;)i*=i,i%=r;return i}function Vw(t,e){if(t===Ir)throw new Error("invert: expected non-zero number");if(e<=Ir)throw new Error("invert: expected positive modulus, got "+e);let r=$r(t,e),i=e,n=Ir,s=gr;for(;r!==Ir;){let o=i/r,a=i%r,h=n-s*o;i=r,r=a,n=s,s=h}if(i!==gr)throw new Error("invert: does not exist");return $r(n,e)}function kb(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function S8(t,e){let r=(t.ORDER+gr)/w8,i=t.pow(e,r);return kb(t,i,e),i}function ZB(t,e){let r=(t.ORDER-x8)/E8,i=t.mul(e,bo),n=t.pow(i,r),s=t.mul(e,n),o=t.mul(t.mul(s,bo),n),a=t.mul(s,t.sub(o,t.ONE));return kb(t,a,e),a}function QB(t){let e=Cs(t),r=I8(t),i=r(e,e.neg(e.ONE)),n=r(e,i),s=r(e,e.neg(i)),o=(t+YB)/_8;return(a,h)=>{let d=a.pow(h,o),g=a.mul(d,i),y=a.mul(d,n),_=a.mul(d,s),S=a.eql(a.sqr(g),h),I=a.eql(a.sqr(y),h);d=a.cmov(d,g,S),g=a.cmov(_,y,I);let O=a.eql(a.sqr(g),h),P=a.cmov(d,g,O);return kb(a,P,h),P}}function I8(t){if(t<y8)throw new Error("sqrt is not defined for small field");let e=t-gr,r=0;for(;e%bo===Ir;)e/=bo,r++;let i=bo,n=Cs(t);for(;Hw(n,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return S8;let s=n.pow(i,e),o=(e+gr)/bo;return function(a,h){if(a.is0(h))return h;if(Hw(a,h)!==1)throw new Error("Cannot find square root");let d=r,g=a.mul(a.ONE,s),y=a.pow(h,e),_=a.pow(h,o);for(;!a.eql(y,a.ONE);){if(a.is0(y))return a.ZERO;let S=1,I=a.sqr(y);for(;!a.eql(I,a.ONE);)if(S++,I=a.sqr(I),S===d)throw new Error("Cannot find square root");let O=gr<<BigInt(d-S-1),P=a.pow(g,O);d=S,g=a.sqr(P),y=a.mul(y,g),_=a.mul(_,P)}return _}}function eU(t){return t%w8===y8?S8:t%E8===x8?ZB:t%_8===XB?QB(t):I8(t)}var tU=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rU(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=tU.reduce((i,n)=>(i[n]="function",i),e);return ud(t,r),t}function iU(t,e,r){if(r<Ir)throw new Error("invalid exponent, negatives unsupported");if(r===Ir)return t.ONE;if(r===gr)return e;let i=t.ONE,n=e;for(;r>Ir;)r&gr&&(i=t.mul(i,n)),n=t.sqr(n),r>>=gr;return i}function A8(t,e,r=!1){let i=new Array(e.length).fill(r?t.ZERO:void 0),n=e.reduce((o,a,h)=>t.is0(a)?o:(i[h]=o,t.mul(o,a)),t.ONE),s=t.inv(n);return e.reduceRight((o,a,h)=>t.is0(a)?o:(i[h]=t.mul(o,i[h]),t.mul(o,a)),s),i}function Hw(t,e){let r=(t.ORDER-gr)/bo,i=t.pow(e,r),n=t.eql(i,t.ONE),s=t.eql(i,t.ZERO),o=t.eql(i,t.neg(t.ONE));if(!n&&!s&&!o)throw new Error("invalid Legendre symbol result");return n?1:s?0:-1}function M8(t,e){e!==void 0&&Ts(e);let r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Cs(t,e,r=!1,i={}){if(t<=Ir)throw new Error("invalid field: expected ORDER > 0, got "+t);let n,s,o=!1,a;if(typeof e=="object"&&e!=null){if(i.sqrt||r)throw new Error("cannot specify opts in two arguments");let _=e;_.BITS&&(n=_.BITS),_.sqrt&&(s=_.sqrt),typeof _.isLE=="boolean"&&(r=_.isLE),typeof _.modFromBytes=="boolean"&&(o=_.modFromBytes),a=_.allowedLengths}else typeof e=="number"&&(n=e),i.sqrt&&(s=i.sqrt);let{nBitLength:h,nByteLength:d}=M8(t,n);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let g,y=Object.freeze({ORDER:t,isLE:r,BITS:h,BYTES:d,MASK:hc(h),ZERO:Ir,ONE:gr,allowedLengths:a,create:_=>$r(_,t),isValid:_=>{if(typeof _!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof _);return Ir<=_&&_<t},is0:_=>_===Ir,isValidNot0:_=>!y.is0(_)&&y.isValid(_),isOdd:_=>(_&gr)===gr,neg:_=>$r(-_,t),eql:(_,S)=>_===S,sqr:_=>$r(_*_,t),add:(_,S)=>$r(_+S,t),sub:(_,S)=>$r(_-S,t),mul:(_,S)=>$r(_*S,t),pow:(_,S)=>iU(y,_,S),div:(_,S)=>$r(_*Vw(S,t),t),sqrN:_=>_*_,addN:(_,S)=>_+S,subN:(_,S)=>_-S,mulN:(_,S)=>_*S,inv:_=>Vw(_,t),sqrt:s||(_=>(g||(g=eU(t)),g(y,_))),toBytes:_=>r?zb(_,d):qb(_,d),fromBytes:(_,S=!0)=>{if(a){if(!a.includes(_.length)||_.length>d)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+_.length);let O=new Uint8Array(d);O.set(_,r?0:O.length-_.length),_=O}if(_.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+_.length);let I=r?od(_):cd(_);if(o&&(I=$r(I,t)),!S&&!y.isValid(I))throw new Error("invalid field element: outside of range 0..ORDER");return I},invertBatch:_=>A8(y,_),cmov:(_,S,I)=>I?S:_});return Object.freeze(y)}function O8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function R8(t){let e=O8(t);return e+Math.ceil(e/2)}function nU(t,e,r=!1){let i=t.length,n=O8(e),s=R8(e);if(i<16||i<s||i>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+i);let o=r?od(t):cd(t),a=$r(o,e-gr)+gr;return r?zb(a,n):qb(a,n)}var Pa=BigInt(0),go=BigInt(1);function ad(t,e){let r=e.negate();return t?r:e}function hb(t,e){let r=A8(t.Fp,e.map(i=>i.Z));return e.map((i,n)=>t.fromAffine(i.toAffine(r[n])))}function N8(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function db(t,e){N8(t,e);let r=Math.ceil(e/t)+1,i=2**(t-1),n=2**t,s=hc(t),o=BigInt(t);return{windows:r,windowSize:i,mask:s,maxNumber:n,shiftBy:o}}function Gw(t,e,r){let{windowSize:i,mask:n,maxNumber:s,shiftBy:o}=r,a=Number(t&n),h=t>>o;a>i&&(a-=s,h+=go);let d=e*i,g=d+Math.abs(a)-1,y=a===0,_=a<0,S=e%2!==0;return{nextN:h,offset:g,isZero:y,isNeg:_,isNegF:S,offsetF:d}}function sU(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function oU(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}var lb=new WeakMap,P8=new WeakMap;function pb(t){return P8.get(t)||1}function Jw(t){if(t!==Pa)throw new Error("invalid wNAF")}var Rb=class{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,i=this.ZERO){let n=e;for(;r>Pa;)r&go&&(i=i.add(n)),n=n.double(),r>>=go;return i}precomputeWindow(e,r){let{windows:i,windowSize:n}=db(r,this.bits),s=[],o=e,a=o;for(let h=0;h<i;h++){a=o,s.push(a);for(let d=1;d<n;d++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let n=this.ZERO,s=this.BASE,o=db(e,this.bits);for(let a=0;a<o.windows;a++){let{nextN:h,offset:d,isZero:g,isNeg:y,isNegF:_,offsetF:S}=Gw(i,a,o);i=h,g?s=s.add(ad(_,r[S])):n=n.add(ad(y,r[d]))}return Jw(i),{p:n,f:s}}wNAFUnsafe(e,r,i,n=this.ZERO){let s=db(e,this.bits);for(let o=0;o<s.windows&&i!==Pa;o++){let{nextN:a,offset:h,isZero:d,isNeg:g}=Gw(i,o,s);if(i=a,!d){let y=r[h];n=n.add(g?y.negate():y)}}return Jw(i),n}getPrecomputes(e,r,i){let n=lb.get(r);return n||(n=this.precomputeWindow(r,e),e!==1&&(typeof i=="function"&&(n=i(n)),lb.set(r,n))),n}cached(e,r,i){let n=pb(e);return this.wNAF(n,this.getPrecomputes(n,e,i),r)}unsafe(e,r,i,n){let s=pb(e);return s===1?this._unsafeLadder(e,r,n):this.wNAFUnsafe(s,this.getPrecomputes(s,e,i),r,n)}createCache(e,r){N8(r,this.bits),P8.set(e,r),lb.delete(e)}hasCache(e){return pb(e)!==1}};function aU(t,e,r,i){let n=e,s=t.ZERO,o=t.ZERO;for(;r>Pa||i>Pa;)r&go&&(s=s.add(n)),i&go&&(o=o.add(n)),n=n.double(),r>>=go,i>>=go;return{p1:s,p2:o}}function fU(t,e,r,i){sU(r,t),oU(i,e);let n=r.length,s=i.length;if(n!==s)throw new Error("arrays of points and scalars must have equal length");let o=t.ZERO,a=m8(BigInt(n)),h=1;a>12?h=a-3:a>4?h=a-2:a>0&&(h=2);let d=hc(h),g=new Array(Number(d)+1).fill(o),y=Math.floor((e.BITS-1)/h)*h,_=o;for(let S=y;S>=0;S-=h){g.fill(o);for(let O=0;O<s;O++){let P=i[O],T=Number(P>>BigInt(S)&d);g[T]=g[T].add(r[O])}let I=o;for(let O=g.length-1,P=o;O>0;O--)P=P.add(g[O]),I=I.add(P);if(_=_.add(I),S!==0)for(let O=0;O<h;O++)_=_.double()}return _}function Ww(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return rU(e),e}else return Cs(t,{isLE:r})}function cU(t,e,r={},i){if(i===void 0&&(i=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(let a of["p","n","h"]){let h=e[a];if(!(typeof h=="bigint"&&h>Pa))throw new Error(`CURVE.${a} must be positive bigint`)}let n=Ww(e.p,r.Fp,i),s=Ww(e.n,r.Fn,i),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(let a of o)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:n,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),o8("HashToScalar-");var nc=BigInt(0),Ia=BigInt(1),ed=BigInt(2);function uU(t){return ud(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function hU(t){let e=uU(t),{P:r,type:i,adjustScalarBytes:n,powPminus2:s,randomBytes:o}=e,a=i==="x25519";if(!a&&i!=="x448")throw new Error("invalid type");let h=o||Bb,d=a?255:448,g=a?32:56,y=BigInt(a?9:5),_=BigInt(a?121665:39081),S=a?ed**BigInt(254):ed**BigInt(447),I=a?BigInt(8)*ed**BigInt(251)-Ia:BigInt(4)*ed**BigInt(445)-Ia,O=S+I+Ia,P=b=>$r(b,r),T=U(y);function U(b){return zb(P(b),g)}function D(b){let p=or("u coordinate",b,g);return a&&(p[31]&=127),P(od(p))}function F(b){return od(n(or("scalar",b,g)))}function j(b,p){let f=C(D(p),F(b));if(f===nc)throw new Error("invalid private or public key received");return U(f)}function V(b){return j(b,T)}function B(b,p,f){let l=P(b*(p-f));return p=P(p-l),f=P(f+l),{x_2:p,x_3:f}}function C(b,p){Ob("u",b,nc,r),Ob("scalar",p,S,O);let f=p,l=b,m=Ia,x=nc,v=b,c=Ia,w=nc;for(let E=BigInt(d-1);E>=nc;E--){let N=f>>E&Ia;w^=N,{x_2:m,x_3:v}=B(w,m,v),{x_2:x,x_3:c}=B(w,x,c),w=N;let q=m+x,A=P(q*q),L=m-x,z=P(L*L),k=A-z,$=v+c,W=v-c,H=P(W*q),G=P($*L),Z=H+G,J=H-G;v=P(Z*Z),c=P(l*P(J*J)),m=P(A*z),x=P(k*(A+P(_*k)))}({x_2:m,x_3:v}=B(w,m,v)),{x_2:x,x_3:c}=B(w,x,c);let R=s(x);return P(m*R)}let K={secretKey:g,publicKey:g,seed:g},M=(b=h(g))=>(Di(b,K.seed),b);function u(b){let p=M(b);return{secretKey:p,publicKey:V(p)}}return{keygen:u,getSharedSecret:(b,p)=>j(b,p),getPublicKey:b=>V(b),scalarMult:j,scalarMultBase:V,utils:{randomSecretKey:M,randomPrivateKey:M},GuBytes:T.slice(),lengths:K}}var dU=BigInt(1),Yw=BigInt(2),lU=BigInt(3),pU=BigInt(5),bU=BigInt(8),T8=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),gU={p:T8,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:bU,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function vU(t){let e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=T8,o=t*t%s*t%s,a=Pi(o,Yw,s)*o%s,h=Pi(a,dU,s)*t%s,d=Pi(h,pU,s)*h%s,g=Pi(d,e,s)*d%s,y=Pi(g,r,s)*g%s,_=Pi(y,i,s)*y%s,S=Pi(_,n,s)*_%s,I=Pi(S,n,s)*_%s,O=Pi(I,e,s)*d%s;return{pow_p_5_8:Pi(O,Yw,s)*t%s,b2:o}}function mU(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}var yU=Cs(gU.p,{isLE:!0}),JJ=(()=>{let t=yU.ORDER;return hU({P:t,type:"x25519",powPminus2:e=>{let{pow_p_5_8:r,b2:i}=vU(e);return $r(Pi(r,lU,t)*i,t)},adjustScalarBytes:mU})})(),Xw=(t,e)=>(t+(t>=0?e:-e)/D8)/e;function wU(t,e,r){let[[i,n],[s,o]]=e,a=Xw(o*t,r),h=Xw(-n*t,r),d=t-a*i-h*s,g=-a*n-h*o,y=d<kn,_=g<kn;y&&(d=-d),_&&(g=-g);let S=hc(Math.ceil(m8(r)/2))+Oa;if(d<kn||d>=S||g<kn||g>=S)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:y,k1:d,k2neg:_,k2:g}}function Nb(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function bb(t,e){let r={};for(let i of Object.keys(e))r[i]=t[i]===void 0?e[i]:t[i];return sd(r.lowS,"lowS"),sd(r.prehash,"prehash"),r.format!==void 0&&Nb(r.format),r}var Pb=class extends Error{constructor(e=""){super(e)}},zn={Err:Pb,_tlv:{encode:(t,e)=>{let{Err:r}=zn;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");let i=e.length/2,n=Qh(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?Qh(n.length/2|128):"";return Qh(t)+s+n+e},decode(t,e){let{Err:r}=zn,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[i++]!==t)throw new r("tlv.decode: wrong tlv");let n=e[i++],s=!!(n&128),o=0;if(!s)o=n;else{let h=n&127;if(!h)throw new r("tlv.decode(long): indefinite length not supported");if(h>4)throw new r("tlv.decode(long): byte length is too big");let d=e.subarray(i,i+h);if(d.length!==h)throw new r("tlv.decode: length bytes not complete");if(d[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let g of d)o=o<<8|g;if(i+=h,o<128)throw new r("tlv.decode(long): not minimal encoding")}let a=e.subarray(i,i+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(i+o)}}},_int:{encode(t){let{Err:e}=zn;if(t<kn)throw new e("integer: negative integers are not allowed");let r=Qh(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){let{Err:e}=zn;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return cd(t)}},toSig(t){let{Err:e,_int:r,_tlv:i}=zn,n=or("signature",t),{v:s,l:o}=i.decode(48,n);if(o.length)throw new e("invalid signature: left bytes after parsing");let{v:a,l:h}=i.decode(2,s),{v:d,l:g}=i.decode(2,h);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(d)}},hexFromSig(t){let{_tlv:e,_int:r}=zn,i=e.encode(2,r.encode(t.r)),n=e.encode(2,r.encode(t.s)),s=i+n;return e.encode(48,s)}},kn=BigInt(0),Oa=BigInt(1),D8=BigInt(2),td=BigInt(3),xU=BigInt(4);function Aa(t,e){let{BYTES:r}=t,i;if(typeof e=="bigint")i=e;else{let n=or("private key",e);try{i=t.fromBytes(n)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function EU(t,e={}){let r=cU("weierstrass",t,e),{Fp:i,Fn:n}=r,s=r.CURVE,{h:o,n:a}=s;ud(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:h}=e;if(h&&(!i.is0(s.a)||typeof h.beta!="bigint"||!Array.isArray(h.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let d=L8(i,n);function g(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function y(b,p,f){let{x:l,y:m}=p.toAffine(),x=i.toBytes(l);if(sd(f,"isCompressed"),f){g();let v=!i.isOdd(m);return Ns(C8(v),x)}else return Ns(Uint8Array.of(4),x,i.toBytes(m))}function _(b){po(b,void 0,"Point");let{publicKey:p,publicKeyUncompressed:f}=d,l=b.length,m=b[0],x=b.subarray(1);if(l===p&&(m===2||m===3)){let v=i.fromBytes(x);if(!i.isValid(v))throw new Error("bad point: is not on curve, wrong x");let c=O(v),w;try{w=i.sqrt(c)}catch(E){let N=E instanceof Error?": "+E.message:"";throw new Error("bad point: is not on curve, sqrt error"+N)}g();let R=i.isOdd(w);return(m&1)===1!==R&&(w=i.neg(w)),{x:v,y:w}}else if(l===f&&m===4){let v=i.BYTES,c=i.fromBytes(x.subarray(0,v)),w=i.fromBytes(x.subarray(v,v*2));if(!P(c,w))throw new Error("bad point: is not on curve");return{x:c,y:w}}else throw new Error(`bad point: got length ${l}, expected compressed=${p} or uncompressed=${f}`)}let S=e.toBytes||y,I=e.fromBytes||_;function O(b){let p=i.sqr(b),f=i.mul(p,b);return i.add(i.add(f,i.mul(b,s.a)),s.b)}function P(b,p){let f=i.sqr(p),l=O(b);return i.eql(f,l)}if(!P(s.Gx,s.Gy))throw new Error("bad curve params: generator point");let T=i.mul(i.pow(s.a,td),xU),U=i.mul(i.sqr(s.b),BigInt(27));if(i.is0(i.add(T,U)))throw new Error("bad curve params: a or b");function D(b,p,f=!1){if(!i.isValid(p)||f&&i.is0(p))throw new Error(`bad point coordinate ${b}`);return p}function F(b){if(!(b instanceof K))throw new Error("ProjectivePoint expected")}function j(b){if(!h||!h.basises)throw new Error("no endo");return wU(b,h.basises,n.ORDER)}let V=Kw((b,p)=>{let{X:f,Y:l,Z:m}=b;if(i.eql(m,i.ONE))return{x:f,y:l};let x=b.is0();p==null&&(p=x?i.ONE:i.inv(m));let v=i.mul(f,p),c=i.mul(l,p),w=i.mul(m,p);if(x)return{x:i.ZERO,y:i.ZERO};if(!i.eql(w,i.ONE))throw new Error("invZ was invalid");return{x:v,y:c}}),B=Kw(b=>{if(b.is0()){if(e.allowInfinityPoint&&!i.is0(b.Y))return;throw new Error("bad point: ZERO")}let{x:p,y:f}=b.toAffine();if(!i.isValid(p)||!i.isValid(f))throw new Error("bad point: x or y not field elements");if(!P(p,f))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function C(b,p,f,l,m){return f=new K(i.mul(f.X,b),f.Y,f.Z),p=ad(l,p),f=ad(m,f),p.add(f)}class K{constructor(p,f,l){this.X=D("x",p),this.Y=D("y",f,!0),this.Z=D("z",l),Object.freeze(this)}static CURVE(){return s}static fromAffine(p){let{x:f,y:l}=p||{};if(!p||!i.isValid(f)||!i.isValid(l))throw new Error("invalid affine point");if(p instanceof K)throw new Error("projective point not allowed");return i.is0(f)&&i.is0(l)?K.ZERO:new K(f,l,i.ONE)}static fromBytes(p){let f=K.fromAffine(I(po(p,void 0,"point")));return f.assertValidity(),f}static fromHex(p){return K.fromBytes(or("pointHex",p))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,f=!0){return u.createCache(this,p),f||this.multiply(td),this}assertValidity(){B(this)}hasEvenY(){let{y:p}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(p)}equals(p){F(p);let{X:f,Y:l,Z:m}=this,{X:x,Y:v,Z:c}=p,w=i.eql(i.mul(f,c),i.mul(x,m)),R=i.eql(i.mul(l,c),i.mul(v,m));return w&&R}negate(){return new K(this.X,i.neg(this.Y),this.Z)}double(){let{a:p,b:f}=s,l=i.mul(f,td),{X:m,Y:x,Z:v}=this,c=i.ZERO,w=i.ZERO,R=i.ZERO,E=i.mul(m,m),N=i.mul(x,x),q=i.mul(v,v),A=i.mul(m,x);return A=i.add(A,A),R=i.mul(m,v),R=i.add(R,R),c=i.mul(p,R),w=i.mul(l,q),w=i.add(c,w),c=i.sub(N,w),w=i.add(N,w),w=i.mul(c,w),c=i.mul(A,c),R=i.mul(l,R),q=i.mul(p,q),A=i.sub(E,q),A=i.mul(p,A),A=i.add(A,R),R=i.add(E,E),E=i.add(R,E),E=i.add(E,q),E=i.mul(E,A),w=i.add(w,E),q=i.mul(x,v),q=i.add(q,q),E=i.mul(q,A),c=i.sub(c,E),R=i.mul(q,N),R=i.add(R,R),R=i.add(R,R),new K(c,w,R)}add(p){F(p);let{X:f,Y:l,Z:m}=this,{X:x,Y:v,Z:c}=p,w=i.ZERO,R=i.ZERO,E=i.ZERO,N=s.a,q=i.mul(s.b,td),A=i.mul(f,x),L=i.mul(l,v),z=i.mul(m,c),k=i.add(f,l),$=i.add(x,v);k=i.mul(k,$),$=i.add(A,L),k=i.sub(k,$),$=i.add(f,m);let W=i.add(x,c);return $=i.mul($,W),W=i.add(A,z),$=i.sub($,W),W=i.add(l,m),w=i.add(v,c),W=i.mul(W,w),w=i.add(L,z),W=i.sub(W,w),E=i.mul(N,$),w=i.mul(q,z),E=i.add(w,E),w=i.sub(L,E),E=i.add(L,E),R=i.mul(w,E),L=i.add(A,A),L=i.add(L,A),z=i.mul(N,z),$=i.mul(q,$),L=i.add(L,z),z=i.sub(A,z),z=i.mul(N,z),$=i.add($,z),A=i.mul(L,$),R=i.add(R,A),A=i.mul(W,$),w=i.mul(k,w),w=i.sub(w,A),A=i.mul(k,L),E=i.mul(W,E),E=i.add(E,A),new K(w,R,E)}subtract(p){return this.add(p.negate())}is0(){return this.equals(K.ZERO)}multiply(p){let{endo:f}=e;if(!n.isValidNot0(p))throw new Error("invalid scalar: out of range");let l,m,x=v=>u.cached(this,v,c=>hb(K,c));if(f){let{k1neg:v,k1:c,k2neg:w,k2:R}=j(p),{p:E,f:N}=x(c),{p:q,f:A}=x(R);m=N.add(A),l=C(f.beta,E,q,v,w)}else{let{p:v,f:c}=x(p);l=v,m=c}return hb(K,[l,m])[0]}multiplyUnsafe(p){let{endo:f}=e,l=this;if(!n.isValid(p))throw new Error("invalid scalar: out of range");if(p===kn||l.is0())return K.ZERO;if(p===Oa)return l;if(u.hasCache(this))return this.multiply(p);if(f){let{k1neg:m,k1:x,k2neg:v,k2:c}=j(p),{p1:w,p2:R}=aU(K,l,x,c);return C(f.beta,w,R,m,v)}else return u.unsafe(l,p)}multiplyAndAddUnsafe(p,f,l){let m=this.multiplyUnsafe(f).add(p.multiplyUnsafe(l));return m.is0()?void 0:m}toAffine(p){return V(this,p)}isTorsionFree(){let{isTorsionFree:p}=e;return o===Oa?!0:p?p(K,this):u.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:p}=e;return o===Oa?this:p?p(K,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(p=!0){return sd(p,"isCompressed"),this.assertValidity(),S(K,this,p)}toHex(p=!0){return Ma(this.toBytes(p))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(p=!0){return this.toBytes(p)}_setWindowSize(p){this.precompute(p)}static normalizeZ(p){return hb(K,p)}static msm(p,f){return fU(K,n,p,f)}static fromPrivateKey(p){return K.BASE.multiply(Aa(n,p))}}K.BASE=new K(s.Gx,s.Gy,i.ONE),K.ZERO=new K(i.ZERO,i.ONE,i.ZERO),K.Fp=i,K.Fn=n;let M=n.BITS,u=new Rb(K,e.endo?Math.ceil(M/2):M);return K.BASE.precompute(8),K}function C8(t){return Uint8Array.of(t?2:3)}function L8(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function _U(t,e={}){let{Fn:r}=t,i=e.randomBytes||Bb,n=Object.assign(L8(t.Fp,r),{seed:R8(r.ORDER)});function s(_){try{return!!Aa(r,_)}catch{return!1}}function o(_,S){let{publicKey:I,publicKeyUncompressed:O}=n;try{let P=_.length;return S===!0&&P!==I||S===!1&&P!==O?!1:!!t.fromBytes(_)}catch{return!1}}function a(_=i(n.seed)){return nU(po(_,n.seed,"seed"),r.ORDER)}function h(_,S=!0){return t.BASE.multiply(Aa(r,_)).toBytes(S)}function d(_){let S=a(_);return{secretKey:S,publicKey:h(S)}}function g(_){if(typeof _=="bigint")return!1;if(_ instanceof t)return!0;let{secretKey:S,publicKey:I,publicKeyUncompressed:O}=n;if(r.allowedLengths||S===I)return;let P=or("key",_).length;return P===I||P===O}function y(_,S,I=!0){if(g(_)===!0)throw new Error("first arg must be private key");if(g(S)===!1)throw new Error("second arg must be public key");let O=Aa(r,_);return t.fromHex(S).multiply(O).toBytes(I)}return Object.freeze({getPublicKey:h,getSharedSecret:y,keygen:d,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:_=>Aa(r,_),precompute(_=8,S=t.BASE){return S.precompute(_,!1)}},lengths:n})}function SU(t,e,r={}){r8(e),ud(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let i=r.randomBytes||Bb,n=r.hmac||((f,...l)=>g8(e,f,Ns(...l))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:h}=o,{keygen:d,getPublicKey:g,getSharedSecret:y,utils:_,lengths:S}=_U(t,r),I={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},O="compact";function P(f){let l=a>>Oa;return f>l}function T(f,l){if(!o.isValidNot0(l))throw new Error(`invalid signature ${f}: out of range 1..Point.Fn.ORDER`);return l}function U(f,l){Nb(l);let m=S.signature,x=l==="compact"?m:l==="recovered"?m+1:void 0;return po(f,x,`${l} signature`)}class D{constructor(l,m,x){this.r=T("r",l),this.s=T("s",m),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(l,m=O){U(l,m);let x;if(m==="der"){let{r:R,s:E}=zn.toSig(po(l));return new D(R,E)}m==="recovered"&&(x=l[0],m="compact",l=l.subarray(1));let v=o.BYTES,c=l.subarray(0,v),w=l.subarray(v,v*2);return new D(o.fromBytes(c),o.fromBytes(w),x)}static fromHex(l,m){return this.fromBytes(rd(l),m)}addRecoveryBit(l){return new D(this.r,this.s,l)}recoverPublicKey(l){let m=s.ORDER,{r:x,s:v,recovery:c}=this;if(c==null||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*D8<m&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");let w=c===2||c===3?x+a:x;if(!s.isValid(w))throw new Error("recovery id 2 or 3 invalid");let R=s.toBytes(w),E=t.fromBytes(Ns(C8((c&1)===0),R)),N=o.inv(w),q=j(or("msgHash",l)),A=o.create(-q*N),L=o.create(v*N),z=t.BASE.multiplyUnsafe(A).add(E.multiplyUnsafe(L));if(z.is0())throw new Error("point at infinify");return z.assertValidity(),z}hasHighS(){return P(this.s)}toBytes(l=O){if(Nb(l),l==="der")return rd(zn.hexFromSig(this));let m=o.toBytes(this.r),x=o.toBytes(this.s);if(l==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ns(Uint8Array.of(this.recovery),m,x)}return Ns(m,x)}toHex(l){return Ma(this.toBytes(l))}assertValidity(){}static fromCompact(l){return D.fromBytes(or("sig",l),"compact")}static fromDER(l){return D.fromBytes(or("sig",l),"der")}normalizeS(){return this.hasHighS()?new D(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ma(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ma(this.toBytes("compact"))}}let F=r.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");let l=cd(f),m=f.length*8-h;return m>0?l>>BigInt(m):l},j=r.bits2int_modN||function(f){return o.create(F(f))},V=hc(h);function B(f){return Ob("num < 2^"+h,f,kn,V),o.toBytes(f)}function C(f,l){return po(f,void 0,"message"),l?po(e(f),void 0,"prehashed message"):f}function K(f,l,m){if(["recovered","canonical"].some(L=>L in m))throw new Error("sign() legacy options not supported");let{lowS:x,prehash:v,extraEntropy:c}=bb(m,I);f=C(f,v);let w=j(f),R=Aa(o,l),E=[B(R),B(w)];if(c!=null&&c!==!1){let L=c===!0?i(S.secretKey):c;E.push(or("extraEntropy",L))}let N=Ns(...E),q=w;function A(L){let z=F(L);if(!o.isValidNot0(z))return;let k=o.inv(z),$=t.BASE.multiply(z).toAffine(),W=o.create($.x);if(W===kn)return;let H=o.create(k*o.create(q+W*R));if(H===kn)return;let G=($.x===W?0:2)|Number($.y&Oa),Z=H;return x&&P(H)&&(Z=o.neg(H),G^=1),new D(W,Z,G)}return{seed:N,k2sig:A}}function M(f,l,m={}){f=or("message",f);let{seed:x,k2sig:v}=K(f,l,m);return WB(e.outputLen,o.BYTES,n)(x,v)}function u(f){let l,m=typeof f=="string"||fd(f),x=!m&&f!==null&&typeof f=="object"&&typeof f.r=="bigint"&&typeof f.s=="bigint";if(!m&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)l=new D(f.r,f.s);else if(m){try{l=D.fromBytes(or("sig",f),"der")}catch(v){if(!(v instanceof zn.Err))throw v}if(!l)try{l=D.fromBytes(or("sig",f),"compact")}catch{return!1}}return l||!1}function b(f,l,m,x={}){let{lowS:v,prehash:c,format:w}=bb(x,I);if(m=or("publicKey",m),l=C(or("message",l),c),"strict"in x)throw new Error("options.strict was renamed to lowS");let R=w===void 0?u(f):D.fromBytes(or("sig",f),w);if(R===!1)return!1;try{let E=t.fromBytes(m);if(v&&R.hasHighS())return!1;let{r:N,s:q}=R,A=j(l),L=o.inv(q),z=o.create(A*L),k=o.create(N*L),$=t.BASE.multiplyUnsafe(z).add(E.multiplyUnsafe(k));return $.is0()?!1:o.create($.x)===N}catch{return!1}}function p(f,l,m={}){let{prehash:x}=bb(m,I);return l=C(l,x),D.fromBytes(f,"recovered").recoverPublicKey(l).toBytes()}return Object.freeze({keygen:d,getPublicKey:g,getSharedSecret:y,utils:_,lengths:S,Point:t,sign:M,verify:b,recoverPublicKey:p,Signature:D,hash:e})}function IU(t){let e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,i=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0,n=Cs(e.n,{BITS:t.nBitLength,allowedLengths:i,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:n,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function AU(t){let{CURVE:e,curveOpts:r}=IU(t),i={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:i}}function MU(t,e){let r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,M8(r.Fn.ORDER,r.Fn.BITS))})}function OU(t){let{CURVE:e,curveOpts:r,hash:i,ecdsaOpts:n}=AU(t),s=EU(e,r),o=SU(s,i,n);return MU(t,o)}function Tb(t,e){let r=i=>OU({...t,hash:i});return{...r(e),create:r}}var F8={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},B8={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},U8={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},RU=Cs(F8.p),NU=Cs(B8.p),PU=Cs(U8.p),WJ=Tb({...F8,Fp:RU,lowS:!1},d8);Tb({...B8,Fp:NU,lowS:!1},xB),Tb({...U8,Fp:PU,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},wB);var Zw="base16";var q8=1;function jb(t){let e=GB(X1(t,Zw));return Z1(e,Zw)}var TU={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $b(t,e){let{message:r,code:i}=TU[t];return{message:e?`${r} ${e}`:r,code:i}}function z8(t){return typeof t>"u"}function DU(t,e){return e&&z8(t)?!0:typeof t=="string"&&!!t.trim().length}function CU(t,e){return e&&z8(t)?!0:typeof t=="number"&&!isNaN(t)}function k8(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(DU(t,!1)){if(e(t))return!0;let r=VF(t);return e(r)}}catch{}return!1}function j8(t,e){return CU(t,!1)&&t<=e.max&&t>=e.min}var vo=Pe(yi());var $8=`Ethereum Signed Message:
`;function hd(t){return typeof t=="string"&&(t=wn(t)),qi(hf([wn($8),wn(String(t.length)),t]))}var K8="transactions/5.8.0";var uW=new pt(K8),V8;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(V8||(V8={}));function FU(t){let e=mf(t);return Iu(Js(qi(Js(e,1)),12))}function H8(t,e){return FU(Cu(Ye(t),e))}var f9=Pe(W8()),BU=Pe(Vn()),c9=Pe(ku()),Jb=class{constructor(e){this.client=e}},Wb=class{constructor(e){this.opts=e}},UU="https://rpc.walletconnect.com/v1",dd={wc_authRequest:{req:{ttl:vo.ONE_DAY,prompt:!0,tag:3e3},res:{ttl:vo.ONE_DAY,prompt:!1,tag:3001}}},Vb={min:vo.FIVE_MINUTES,max:vo.SEVEN_DAYS},u9="wc",qU=1,zU="auth",Y8="authClient",ld=`${u9}@1:${zU}:`,lc=`${ld}:PUB_KEY`;function og(t){return t?.split(":")}function kU(t){let e=t&&og(t);if(e)return e[3]}function jU(t){let e=t&&og(t);if(e)return e[2]+":"+e[3]}function X8(t){let e=t&&og(t);if(e)return e.pop()}async function $U(t,e,r,i,n){switch(r.t){case"eip191":return KU(t,e,r.s);case"eip1271":return await VU(t,e,r.s,i,n);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function KU(t,e,r){return H8(hd(e),r).toLowerCase()===t.toLowerCase()}async function VU(t,e,r,i,n){try{let s="0x1626ba7e",o="0000000000000000000000000000000000000000000000000000000000000040",a="0000000000000000000000000000000000000000000000000000000000000041",h=r.substring(2),d=hd(e).substring(2),g=s+d+o+a+h,y=await(0,f9.default)(`${UU}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:HU(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:g},"latest"]})}),{result:_}=await y.json();return _?_.slice(0,s.length).toLowerCase()===s.toLowerCase():!1}catch(s){return console.error("isValidEip1271Signature: ",s),!1}}function HU(){return Date.now()+Math.floor(Math.random()*1e3)}function h9(t){return t.getAll().filter(e=>"requester"in e)}function d9(t,e){return h9(t).find(r=>r.id===e)}function GU(t){let e=k8(t.aud),r=new RegExp(`${t.domain}`).test(t.aud),i=!!t.nonce,n=t.type?t.type==="eip4361":!0,s=t.expiry;if(s&&!j8(s,Vb)){let{message:o}=$b("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${Vb.min} and ${Vb.max}`);throw new Error(o)}return!!(e&&r&&i&&n)}function JU(t,e){return!!d9(e,t.id)}function WU(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function YU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,h=t.charAt(0),d=Math.log(a)/Math.log(256),g=Math.log(256)/Math.log(a);function y(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var O=0,P=0,T=0,U=I.length;T!==U&&I[T]===0;)T++,O++;for(var D=(U-T)*g+1>>>0,F=new Uint8Array(D);T!==U;){for(var j=I[T],V=0,B=D-1;(j!==0||V<P)&&B!==-1;B--,V++)j+=256*F[B]>>>0,F[B]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");P=V,T++}for(var C=D-P;C!==D&&F[C]===0;)C++;for(var K=h.repeat(O);C<D;++C)K+=t.charAt(F[C]);return K}function _(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var O=0;if(I[O]!==" "){for(var P=0,T=0;I[O]===h;)P++,O++;for(var U=(I.length-O)*d+1>>>0,D=new Uint8Array(U);I[O];){var F=r[I.charCodeAt(O)];if(F===255)return;for(var j=0,V=U-1;(F!==0||j<T)&&V!==-1;V--,j++)F+=a*D[V]>>>0,D[V]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");T=j,O++}if(I[O]!==" "){for(var B=U-T;B!==U&&D[B]===0;)B++;for(var C=new Uint8Array(P+(U-B)),K=P;B!==U;)C[K++]=D[B++];return C}}}function S(I){var O=_(I);if(O)return O;throw new Error(`Non-${e} character`)}return{encode:y,decodeUnsafe:_,decode:S}}var XU=YU,ZU=XU,l9=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},QU=t=>new TextEncoder().encode(t),eq=t=>new TextDecoder().decode(t),Yb=class{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Xb=class{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return p9(this,e)}},Zb=class{constructor(e){this.decoders=e}or(e){return p9(this,e)}decode(e){let r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},p9=(t,e)=>new Zb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Qb=class{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Yb(e,r,i),this.decoder=new Xb(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},pd=({name:t,prefix:e,encode:r,decode:i})=>new Qb(t,e,r,i),pc=({prefix:t,name:e,alphabet:r})=>{let{encode:i,decode:n}=ZU(r,e);return pd({prefix:t,name:e,encode:i,decode:s=>l9(n(s))})},tq=(t,e,r,i)=>{let n={};for(let g=0;g<e.length;++g)n[e[g]]=g;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,h=0,d=0;for(let g=0;g<s;++g){let y=n[t[g]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|y,a+=r,a>=8&&(a-=8,o[d++]=255&h>>a)}if(a>=r||255&h<<8-a)throw new SyntaxError("Unexpected end of data");return o},rq=(t,e,r)=>{let i=e[e.length-1]==="=",n=(1<<r)-1,s="",o=0,a=0;for(let h=0;h<t.length;++h)for(a=a<<8|t[h],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},qt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>pd({prefix:e,name:t,encode(n){return rq(n,i,r)},decode(n){return tq(n,i,r,t)}}),iq=pd({prefix:"\0",name:"identity",encode:t=>eq(t),decode:t=>QU(t)}),nq=Object.freeze({__proto__:null,identity:iq}),sq=qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),oq=Object.freeze({__proto__:null,base2:sq}),aq=qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),fq=Object.freeze({__proto__:null,base8:aq}),cq=pc({prefix:"9",name:"base10",alphabet:"0123456789"}),uq=Object.freeze({__proto__:null,base10:cq}),hq=qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dq=qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),lq=Object.freeze({__proto__:null,base16:hq,base16upper:dq}),pq=qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bq=qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gq=qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vq=qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mq=qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yq=qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wq=qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xq=qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Eq=qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),_q=Object.freeze({__proto__:null,base32:pq,base32upper:bq,base32pad:gq,base32padupper:vq,base32hex:mq,base32hexupper:yq,base32hexpad:wq,base32hexpadupper:xq,base32z:Eq}),Sq=pc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Iq=pc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Aq=Object.freeze({__proto__:null,base36:Sq,base36upper:Iq}),Mq=pc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Oq=pc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Rq=Object.freeze({__proto__:null,base58btc:Mq,base58flickr:Oq}),Nq=qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pq=qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Tq=qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dq=qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Cq=Object.freeze({__proto__:null,base64:Nq,base64pad:Pq,base64url:Tq,base64urlpad:Dq}),b9=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Lq=b9.reduce((t,e,r)=>(t[r]=e,t),[]),Fq=b9.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Bq(t){return t.reduce((e,r)=>(e+=Lq[r],e),"")}function Uq(t){let e=[];for(let r of t){let i=Fq[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}var qq=pd({prefix:"\u{1F680}",name:"base256emoji",encode:Bq,decode:Uq}),zq=Object.freeze({__proto__:null,base256emoji:qq}),kq=g9,Z8=128,jq=127,$q=~jq,Kq=Math.pow(2,31);function g9(t,e,r){e=e||[],r=r||0;for(var i=r;t>=Kq;)e[r++]=t&255|Z8,t/=128;for(;t&$q;)e[r++]=t&255|Z8,t>>>=7;return e[r]=t|0,g9.bytes=r-i+1,e}var Vq=eg,Hq=128,Q8=127;function eg(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw eg.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Q8)<<n:(o&Q8)*Math.pow(2,n),n+=7}while(o>=Hq);return eg.bytes=s-i,r}var Gq=Math.pow(2,7),Jq=Math.pow(2,14),Wq=Math.pow(2,21),Yq=Math.pow(2,28),Xq=Math.pow(2,35),Zq=Math.pow(2,42),Qq=Math.pow(2,49),ez=Math.pow(2,56),tz=Math.pow(2,63),rz=function(t){return t<Gq?1:t<Jq?2:t<Wq?3:t<Yq?4:t<Xq?5:t<Zq?6:t<Qq?7:t<ez?8:t<tz?9:10},iz={encode:kq,decode:Vq,encodingLength:rz},v9=iz,e9=(t,e,r=0)=>(v9.encode(t,e,r),e),t9=t=>v9.encodingLength(t),tg=(t,e)=>{let r=e.byteLength,i=t9(t),n=i+t9(r),s=new Uint8Array(n+r);return e9(t,s,0),e9(r,s,i),s.set(e,n),new rg(t,r,e,s)},rg=class{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}},m9=({name:t,code:e,encode:r})=>new ig(t,e,r),ig=class{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?tg(this.code,r):r.then(i=>tg(this.code,i))}else throw Error("Unknown type, must be binary type")}},y9=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),nz=m9({name:"sha2-256",code:18,encode:y9("SHA-256")}),sz=m9({name:"sha2-512",code:19,encode:y9("SHA-512")}),oz=Object.freeze({__proto__:null,sha256:nz,sha512:sz}),w9=0,az="identity",x9=l9,fz=t=>tg(w9,x9(t)),cz={code:w9,name:az,encode:x9,digest:fz},uz=Object.freeze({__proto__:null,identity:cz});new TextEncoder,new TextDecoder;var r9={...nq,...oq,...fq,...uq,...lq,..._q,...Aq,...Rq,...Cq,...zq};({...oz,...uz});function E9(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var i9=E9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Hb=E9("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=WU(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),_9={utf8:i9,"utf-8":i9,hex:r9.base16,latin1:Hb,ascii:Hb,binary:Hb,...r9};function hz(t,e="utf8"){let r=_9[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function dz(t,e="utf8"){let r=_9[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var lz="base16";var pz="utf8";function n9(t){let e=(0,c9.hash)(hz(t,pz));return dz(e,lz)}var bz=Object.defineProperty,gz=Object.defineProperties,vz=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,mz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,o9=(t,e,r)=>e in t?bz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dc=(t,e)=>{for(var r in e||(e={}))mz.call(e,r)&&o9(t,r,e[r]);if(s9)for(var r of s9(e))yz.call(e,r)&&o9(t,r,e[r]);return t},Gb=(t,e)=>gz(t,vz(e)),ng=class extends Jb{constructor(e){super(e),this.initialized=!1,this.name="authEngine",this.init=()=>{this.initialized||(this.registerRelayerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(dd)}),this.initialized=!0)},this.request=async(r,i)=>{if(this.isInitialized(),!GU(r))throw new Error("Invalid request");if(i!=null&&i.topic)return await this.requestOnKnownPairing(i.topic,r);let{chainId:n,statement:s,aud:o,domain:a,nonce:h,type:d,exp:g,nbf:y}=r,{topic:_,uri:S}=await this.client.core.pairing.create();this.client.logger.info({message:"Generated new pairing",pairing:{topic:_,uri:S}});let I=await this.client.core.crypto.generateKeyPair(),O=jb(I);await this.client.authKeys.set(lc,{responseTopic:O,publicKey:I}),await this.client.pairingTopics.set(O,{topic:O,pairingTopic:_}),await this.client.core.relayer.subscribe(O),this.client.logger.info(`sending request to new pairing topic: ${_}`);let P=await this.sendRequest(_,"wc_authRequest",{payloadParams:{type:d??"eip4361",chainId:n,statement:s,aud:o,domain:a,version:"1",nonce:h,iat:new Date().toISOString(),exp:g,nbf:y},requester:{publicKey:I,metadata:this.client.metadata}},{},r.expiry);return this.client.logger.info(`sent request to new pairing topic: ${_}`),{uri:S,id:P}},this.respond=async(r,i)=>{if(this.isInitialized(),!JU(r,this.client.requests))throw new Error("Invalid response");let n=d9(this.client.requests,r.id);if(!n)throw new Error(`Could not find pending auth request with id ${r.id}`);let s=n.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),a=jb(s),h={type:q8,receiverPublicKey:s,senderPublicKey:o};if("error"in r){await this.sendError(n.id,a,r,h);return}let d={h:{t:"eip4361"},p:Gb(dc({},n.cacaoPayload),{iss:i}),s:r.signature};await this.sendResult(n.id,a,d,h),await this.client.core.pairing.activate({topic:n.pairingTopic}),await this.client.requests.update(n.id,dc({},d))},this.getPendingRequests=()=>h9(this.client.requests),this.formatMessage=(r,i)=>{this.client.logger.debug(`formatMessage, cacao is: ${JSON.stringify(r)}`);let n=`${r.domain} wants you to sign in with your Ethereum account:`,s=X8(i),o=r.statement,a=`URI: ${r.aud}`,h=`Version: ${r.version}`,d=`Chain ID: ${kU(i)}`,g=`Nonce: ${r.nonce}`,y=`Issued At: ${r.iat}`,_=r.exp?`Expiry: ${r.exp}`:void 0,S=r.resources&&r.resources.length>0?`Resources:
${r.resources.map(I=>`- ${I}`).join(`
`)}`:void 0;return[n,s,"",o,"",a,h,d,g,y,_,S].filter(I=>I!=null).join(`
`)},this.setExpiry=async(r,i)=>{this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.updateExpiry({topic:r,expiry:i}),this.client.core.expirer.set(r,i)},this.sendRequest=async(r,i,n,s,o)=>{let a=kr(i,n),h=await this.client.core.crypto.encode(r,a,s),d=dd[i].req;if(o&&(d.ttl=o),this.client.core.history.set(r,a),Qw()){let g=n9(JSON.stringify(a));this.client.core.verify.register({attestationId:g})}return await this.client.core.relayer.publish(r,h,Gb(dc({},d),{internal:{throwOnFailedPublish:!0}})),a.id},this.sendResult=async(r,i,n,s)=>{let o=cs(r,n),a=await this.client.core.crypto.encode(i,o,s),h=await this.client.core.history.get(i,r),d=dd[h.request.method].res;return await this.client.core.relayer.publish(i,a,Gb(dc({},d),{internal:{throwOnFailedPublish:!0}})),await this.client.core.history.resolve(o),o.id},this.sendError=async(r,i,n,s)=>{let o=Nn(r,n.error),a=await this.client.core.crypto.encode(i,o,s),h=await this.client.core.history.get(i,r),d=dd[h.request.method].res;return await this.client.core.relayer.publish(i,a,d),await this.client.core.history.resolve(o),o.id},this.requestOnKnownPairing=async(r,i)=>{let n=this.client.core.pairing.pairings.getAll({active:!0}).find(S=>S.topic===r);if(!n)throw new Error(`Could not find pairing for provided topic ${r}`);let{publicKey:s}=this.client.authKeys.get(lc),{chainId:o,statement:a,aud:h,domain:d,nonce:g,type:y}=i,_=await this.sendRequest(n.topic,"wc_authRequest",{payloadParams:{type:y??"eip4361",chainId:o,statement:a,aud:h,domain:d,version:"1",nonce:g,iat:new Date().toISOString()},requester:{publicKey:s,metadata:this.client.metadata}},{},i.expiry);return this.client.logger.info(`sent request to known pairing topic: ${n.topic}`),{id:_}},this.onPairingCreated=r=>{let i=this.getPendingRequests();if(i){let n=Object.values(i).find(s=>s.pairingTopic===r.topic);n&&this.handleAuthRequest(n)}},this.onRelayEventRequest=r=>{let{topic:i,payload:n}=r,s=n.method;switch(s){case"wc_authRequest":return this.onAuthRequest(i,n);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:n}=r,s=(await this.client.core.history.get(i,n.id)).request.method;switch(s){case"wc_authRequest":return this.onAuthResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onAuthRequest=async(r,i)=>{let{requester:n,payloadParams:s}=i.params;this.client.logger.info({type:"onAuthRequest",topic:r,payload:i});let o=n9(JSON.stringify(i)),a=await this.getVerifyContext(o,this.client.metadata),h={requester:n,pairingTopic:r,id:i.id,cacaoPayload:s,verifyContext:a};await this.client.requests.set(i.id,h),this.handleAuthRequest(h)},this.handleAuthRequest=async r=>{let{id:i,pairingTopic:n,requester:s,cacaoPayload:o,verifyContext:a}=r;try{this.client.emit("auth_request",{id:i,topic:n,params:{requester:s,cacaoPayload:o},verifyContext:a})}catch(h){await this.sendError(r.id,r.pairingTopic,h),this.client.logger.error(h)}},this.onAuthResponse=async(r,i)=>{let{id:n}=i;if(this.client.logger.info({type:"onAuthResponse",topic:r,response:i}),br(i)){let{pairingTopic:s}=this.client.pairingTopics.get(r);await this.client.core.pairing.activate({topic:s});let{s:o,p:a}=i.result;await this.client.requests.set(n,dc({id:n,pairingTopic:s},i.result));let h=this.formatMessage(a,a.iss);this.client.logger.debug(`reconstructed message:
`,JSON.stringify(h)),this.client.logger.debug("payload.iss:",a.iss),this.client.logger.debug("signature:",o);let d=X8(a.iss),g=jU(a.iss);if(!d)throw new Error("Could not derive address from `payload.iss`");if(!g)throw new Error("Could not derive chainId from `payload.iss`");this.client.logger.debug("walletAddress extracted from `payload.iss`:",d),await $U(d,h,o,g,this.client.projectId)?this.client.emit("auth_response",{id:n,topic:r,params:i}):this.client.emit("auth_response",{id:n,topic:r,params:{message:"Invalid signature",code:-1}})}else _t(i)&&this.client.emit("auth_response",{id:n,topic:r,params:i})},this.getVerifyContext=async(r,i)=>{let n={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{let s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});s&&(n.verified.origin=s.origin,n.verified.isScam=s.isScam,n.verified.validation=origin===new URL(i.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n}}isInitialized(){if(!this.initialized){let{message:e}=$b("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(St.message,async e=>{let{topic:r,message:i}=e,{responseTopic:n,publicKey:s}=this.client.authKeys.keys.includes(lc)?this.client.authKeys.get(lc):{responseTopic:void 0,publicKey:void 0};if(n&&r!==n){this.client.logger.debug("[Auth] Ignoring message from unknown topic",r);return}let o=await this.client.core.crypto.decode(r,i,{receiverPublicKey:s});us(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):Qi(o)&&(await this.client.core.history.resolve(o),this.onRelayEventResponse({topic:r,payload:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(nn.create,e=>this.onPairingCreated(e))}},sg=class t extends Wb{constructor(e){super(e),this.protocol=u9,this.version=qU,this.name=Y8,this.events=new a9.EventEmitter,this.emit=(i,n)=>this.events.emit(i,n),this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.request=async(i,n)=>{try{return await this.engine.request(i,n)}catch(s){throw this.logger.error(s.message),s}},this.respond=async(i,n)=>{try{return await this.engine.respond(i,n)}catch(s){throw this.logger.error(s.message),s}},this.getPendingRequests=()=>{try{return this.engine.getPendingRequests()}catch(i){throw this.logger.error(i.message),i}},this.formatMessage=(i,n)=>{try{return this.engine.formatMessage(i,n)}catch(s){throw this.logger.error(s.message),s}};let r=typeof e.logger<"u"&&typeof e.logger!="string"?e.logger:w4(m4({level:e.logger||"error"}));this.name=e?.name||Y8,this.metadata=e.metadata,this.projectId=e.projectId,this.core=e.core||new Cn(e),this.logger=y4(r,this.name),this.authKeys=new Er(this.core,this.logger,"authKeys",ld,()=>lc),this.pairingTopics=new Er(this.core,this.logger,"pairingTopics",ld),this.requests=new Er(this.core,this.logger,"requests",ld,i=>i.id),this.engine=new ng(this)}static async init(e){let r=new t(e);return await r.initialize(),r}get context(){return x1(this.logger)}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.authKeys.init(),await this.requests.init(),await this.pairingTopics.init(),await this.engine.init(),this.logger.info("AuthClient Initialization Success"),this.logger.info({authClient:this})}catch(e){throw this.logger.info("AuthClient Initialization Failure"),this.logger.error(e.message),e}}},S9=sg;var P9=Pe(cg()),ug=Pe(cg());var Nz={level:"info"},vc="custom_context",_W=1e3*1024;var Pz=Object.defineProperty,Tz=Object.defineProperties,Dz=Object.getOwnPropertyDescriptors,R9=Object.getOwnPropertySymbols,Cz=Object.prototype.hasOwnProperty,Lz=Object.prototype.propertyIsEnumerable,N9=(t,e,r)=>e in t?Pz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fz=(t,e)=>{for(var r in e||(e={}))Cz.call(e,r)&&N9(t,r,e[r]);if(R9)for(var r of R9(e))Lz.call(e,r)&&N9(t,r,e[r]);return t},Bz=(t,e)=>Tz(t,Dz(e));function T9(t){return Bz(Fz({},t),{level:t?.level||Nz.level})}function Uz(t,e=vc){return t[e]||""}function qz(t,e,r=vc){return t[r]=e,t}function hg(t,e=vc){let r="";return typeof t.bindings>"u"?r=Uz(t,e):r=t.bindings().context||"",r}function zz(t,e,r=vc){let i=hg(t,r);return i.trim()?`${i}/${e}`:e}function D9(t,e,r=vc){let i=zz(t,e,r),n=t.child({context:i});return qz(n,i,r)}var C9=Pe(ln());var vd=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};var md=class{constructor(e){this.client=e}};var Kn=Pe(yi()),qs=Pe(Ho()),D7=Pe(xu()),C7=Pe(d0());var L9=`Ethereum Signed Message:
`;function yd(t){return typeof t=="string"&&(t=wn(t)),qi(hf([wn(L9),wn(String(t.length)),t]))}var F9="transactions/5.7.0";var zW=new pt(F9),B9;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(B9||(B9={}));function kz(t){let e=mf(t);return Iu(Js(qi(Js(e,1)),12))}function U9(t,e){return kz(Cu(Ye(t),e))}var mk=Pe(k0()),yk=Pe(K0()),wk=Pe(Vn()),Ld=Pe(ku()),L7=Pe(J0());function wd(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function z9(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}var q9=z9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),dg=z9("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=wd(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),jz={utf8:q9,"utf-8":q9,hex:vn.base16,latin1:dg,ascii:dg,binary:dg,...vn},xd=jz;function mc(t,e="utf8"){let r=xd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function yc(t,e="utf8"){let r=xd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var xk=Pe(O7());var Ig=Pe(ql()),gk=Pe(Vn()),vk=Pe(yi());var Ek=":";function Sc(t){let[e,r]=t.split(Ek);return{namespace:e,reference:r}}function F7(t,e){return t.includes(":")?[t]:e.chains||[]}var _k="ReactNative",qa={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function B7(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Og(){return!(0,qs.getDocument)()&&!!(0,qs.getNavigator)()&&navigator.product===_k}function U7(){return!B7()&&!!(0,qs.getNavigator)()&&!!(0,qs.getDocument)()}function Sk(){return Og()?qa.reactNative:B7()?qa.node:U7()?qa.browser:qa.unknown}function q7(){return(0,D7.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function Eo(t,e){return t.filter(r=>e.includes(r)).length===t.length}function So(t=Kn.FIVE_MINUTES,e){let r=(0,Kn.toMiliseconds)(t||Kn.FIVE_MINUTES),i,n,s;return{resolve:o=>{s&&i&&(clearTimeout(s),i(o))},reject:o=>{s&&n&&(clearTimeout(s),n(o))},done:()=>new Promise((o,a)=>{s=setTimeout(()=>{a(new Error(e))},r),i=o,n=a})}}function z7(t){let[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function vr(t,e){return(0,Kn.fromMiliseconds)((e||Date.now())+(0,Kn.toMiliseconds)(t))}function Io(t){return Date.now()>=(0,Kn.toMiliseconds)(t)}function ze(t,e){return`${t}${e?`:${e}`:""}`}function Ik(t=[],e=[]){return[...new Set([...t,...e])]}async function k7({id:t,topic:e,wcDeepLink:r}){var i;try{if(!r)return;let n=typeof r=="string"?JSON.parse(r):r,s=n?.href;if(typeof s!="string")return;let o=Ak(s,t,e),a=Sk();if(a===qa.browser){if(!((i=(0,qs.getDocument)())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}o.startsWith("https://")||o.startsWith("http://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,Mk()?"_blank":"_self","noreferrer noopener")}else a===qa.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(o)}catch(n){console.error(n)}}function Ak(t,e,r){let i=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let n=`${t}`;if(t.startsWith("https://t.me")){let s=t.includes("?")?"&startapp=":"?startapp=";n=`${n}${s}${Ok(i,!0)}`}else n=`${n}/wc?${i}`;return n}async function j7(t,e){let r="";try{if(U7()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(i){console.error(i)}return r}function Rg(t,e){if(!t.includes(e))return null;let r=t.split(/([&,?,=])/),i=r.indexOf(e);return r[i+2]}function $7(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function Mk(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Ok(t,e=!1){let r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}var Rk="https://rpc.walletconnect.org/v1";async function Nk(t,e,r,i,n,s){switch(r.t){case"eip191":return Pk(t,e,r.s);case"eip1271":return await Tk(t,e,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function Pk(t,e,r){return U9(yd(e),r).toLowerCase()===t.toLowerCase()}async function Tk(t,e,r,i,n,s){let o=Sc(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let a="0x1626ba7e",h="0000000000000000000000000000000000000000000000000000000000000040",d="0000000000000000000000000000000000000000000000000000000000000041",g=r.substring(2),y=yd(e).substring(2),_=a+y+h+d+g,S=await fetch(`${s||Rk}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Dk(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:_},"latest"]})}),{result:I}=await S.json();return I?I.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Dk(){return Date.now()+Math.floor(Math.random()*1e3)}var Ck=Object.defineProperty,Lk=Object.defineProperties,Fk=Object.getOwnPropertyDescriptors,R7=Object.getOwnPropertySymbols,Bk=Object.prototype.hasOwnProperty,Uk=Object.prototype.propertyIsEnumerable,N7=(t,e,r)=>e in t?Ck(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qk=(t,e)=>{for(var r in e||(e={}))Bk.call(e,r)&&N7(t,r,e[r]);if(R7)for(var r of R7(e))Uk.call(e,r)&&N7(t,r,e[r]);return t},zk=(t,e)=>Lk(t,Fk(e)),kk="did:pkh:",Ng=t=>t?.split(":"),jk=t=>{let e=t&&Ng(t);if(e)return t.includes(kk)?e[3]:e[1]},Fd=t=>{let e=t&&Ng(t);if(e)return e[2]+":"+e[3]},Ic=t=>{let e=t&&Ng(t);if(e)return e.pop()};async function Pg(t){let{cacao:e,projectId:r}=t,{s:i,p:n}=e,s=Tg(n,n.iss),o=Ic(n.iss);return await Nk(o,s,i,Fd(n.iss),r)}var Tg=(t,e)=>{let r=`${t.domain} wants you to sign in with your Ethereum account:`,i=Ic(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=t.statement||void 0,s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${jk(e)}`,h=`Nonce: ${t.nonce}`,d=`Issued At: ${t.iat}`,g=t.exp?`Expiration Time: ${t.exp}`:void 0,y=t.nbf?`Not Before: ${t.nbf}`:void 0,_=t.requestId?`Request ID: ${t.requestId}`:void 0,S=t.resources?`Resources:${t.resources.map(O=>`
- ${O}`).join("")}`:void 0,I=Ac(t.resources);if(I){let O=_c(I);n=Wk(n,O)}return[r,i,"",n,"",s,o,a,h,d,g,y,_,S].filter(O=>O!=null).join(`
`)};function $k(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Kk(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function _o(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");let e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{let i=t.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{let s=i[n];if(!Array.isArray(s))throw new Error(`Ability limits ${n} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${o}`)})})})}function Vk(t,e,r,i={}){return r?.sort((n,s)=>n.localeCompare(s)),{att:{[t]:Hk(e,r,i)}}}function Hk(t,e,r={}){e=e?.sort((n,s)=>n.localeCompare(s));let i=e.map(n=>({[`${t}/${n}`]:[r]}));return Object.assign({},...i)}function K7(t){return _o(t),`urn:recap:${$k(t).replace(/=/g,"")}`}function _c(t){let e=Kk(t.replace("urn:recap:",""));return _o(e),e}function V7(t,e,r){let i=Vk(t,e,r);return K7(i)}function Gk(t){return t&&t.includes("urn:recap:")}function H7(t,e){let r=_c(t),i=_c(e),n=Jk(r,i);return K7(n)}function Jk(t,e){_o(t),_o(e);let r=Object.keys(t.att).concat(Object.keys(e.att)).sort((n,s)=>n.localeCompare(s)),i={att:{}};return r.forEach(n=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[n])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[n])||{})).sort((a,h)=>a.localeCompare(h)).forEach(a=>{var h,d;i.att[n]=zk(qk({},i.att[n]),{[a]:((h=t.att[n])==null?void 0:h[a])||((d=e.att[n])==null?void 0:d[a])})})}),i}function Wk(t="",e){_o(e);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;let i=[],n=0;Object.keys(e.att).forEach(a=>{let h=Object.keys(e.att[a]).map(y=>({ability:y.split("/")[0],action:y.split("/")[1]}));h.sort((y,_)=>y.action.localeCompare(_.action));let d={};h.forEach(y=>{d[y.ability]||(d[y.ability]=[]),d[y.ability].push(y.action)});let g=Object.keys(d).map(y=>(n++,`(${n}) '${y}': '${d[y].join("', '")}' for '${a}'.`));i.push(g.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function Dg(t){var e;let r=_c(t);_o(r);let i=(e=r.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function Cg(t){let e=_c(t);_o(e);let r=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var s;(s=n?.[0])!=null&&s.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function Ac(t){if(!t)return;let e=t?.[t.length-1];return Gk(e)?e:void 0}var Mg="base16",Mc="base64pad",za="base64url",Yk="utf8";var Bd=1,G7=2;function Ud(t){let e=(0,Ld.hash)(mc(t,Mg));return yc(e,Mg)}function Ao(t){let e=(0,Ld.hash)(mc(t,Yk));return yc(e,Mg)}function Oc(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function ka(t){let e=[];return t.forEach(r=>{let[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function Xk(t){let e=[];return Object.values(t).forEach(r=>{e.push(...ka(r.accounts))}),e}function Zk(t,e){let r=[];return Object.values(t).forEach(i=>{ka(i.accounts).includes(e)&&r.push(...i.methods)}),r}function Qk(t,e){let r=[];return Object.values(t).forEach(i=>{ka(i.accounts).includes(e)&&r.push(...i.events)}),r}function ej(t){let e={};return t?.forEach(r=>{let[i,n]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(r),e[i].chains.push(`${i}:${n}`)}),e}function Lg(t,e){e=e.map(i=>i.replace("did:pkh:",""));let r=ej(e);for(let[i,n]of Object.entries(r))n.methods?n.methods=Ik(n.methods,t):n.methods=t,n.events=["chainChanged","accountsChanged"];return r}var tj={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},rj={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function De(t,e){let{message:r,code:i}=rj[t];return{message:e?`${r} ${e}`:r,code:i}}function ft(t,e){let{message:r,code:i}=tj[t];return{message:e?`${r} ${e}`:r,code:i}}function qd(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Rc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Vr(t){return typeof t>"u"}function bt(t,e){return e&&Vr(t)?!0:typeof t=="string"&&!!t.trim().length}function Fg(t,e){return e&&Vr(t)?!0:typeof t=="number"&&!isNaN(t)}function J7(t,e){let{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r),s=!0;return Eo(n,i)?(i.forEach(o=>{let{accounts:a,methods:h,events:d}=t.namespaces[o],g=ka(a),y=r[o];(!Eo(F7(o,y),g)||!Eo(y.methods,h)||!Eo(y.events,d))&&(s=!1)}),s):!1}function Cd(t){return bt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function ij(t){if(bt(t,!1)&&t.includes(":")){let e=t.split(":");if(e.length===3){let r=e[0]+":"+e[1];return!!e[2]&&Cd(r)}}return!1}function W7(t,e){let r=null;return bt(t?.publicKey,!1)||(r=De("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function P7(t){let e=!0;return qd(t)?t.length&&(e=t.every(r=>bt(r,!1))):e=!1,e}function nj(t,e,r){let i=null;return qd(e)&&e.length?e.forEach(n=>{i||Cd(n)||(i=ft("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Cd(t)||(i=ft("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function sj(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;let o=nj(n,F7(n,s),`${e} ${r}`);o&&(i=o)}),i}function oj(t,e){let r=null;return qd(t)?t.forEach(i=>{r||ij(i)||(r=ft("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=ft("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function aj(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;let n=oj(i?.accounts,`${e} namespace`);n&&(r=n)}),r}function fj(t,e){let r=null;return P7(t?.methods)?P7(t?.events)||(r=ft("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=ft("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Y7(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;let n=fj(i,`${e}, namespace`);n&&(r=n)}),r}function X7(t,e,r){let i=null;if(t&&Rc(t)){let n=Y7(t,e);n&&(i=n);let s=sj(t,e,r);s&&(i=s)}else i=De("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function zd(t,e){let r=null;if(t&&Rc(t)){let i=Y7(t,e);i&&(r=i);let n=aj(t,e);n&&(r=n)}else r=De("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Bg(t){return bt(t.protocol,!0)}function Z7(t,e){let r=!1;return e&&!t?r=!0:t&&qd(t)&&t.length&&t.forEach(i=>{r=Bg(i)}),r}function Q7(t){return typeof t=="number"}function ai(t){return typeof t<"u"&&typeof t!==null}function ex(t){return!(!t||typeof t!="object"||!t.code||!Fg(t.code,!1)||!t.message||!bt(t.message,!1))}function tx(t){return!(Vr(t)||!bt(t.method,!1))}function rx(t){return!(Vr(t)||Vr(t.result)&&Vr(t.error)||!Fg(t.id,!1)||!bt(t.jsonrpc,!1))}function ix(t){return!(Vr(t)||!bt(t.name,!1))}function Ug(t,e){return!(!Cd(e)||!Xk(t).includes(e))}function nx(t,e,r){return bt(r,!1)?Zk(t,e).includes(r):!1}function sx(t,e,r){return bt(r,!1)?Qk(t,e).includes(r):!1}function qg(t,e,r){let i=null,n=cj(t),s=uj(e),o=Object.keys(n),a=Object.keys(s),h=T7(Object.keys(t)),d=T7(Object.keys(e)),g=h.filter(y=>!d.includes(y));return g.length&&(i=De("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(e).toString()}`)),Eo(o,a)||(i=De("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(y=>{if(!y.includes(":")||i)return;let _=ka(e[y].accounts);_.includes(y)||(i=De("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${y}
        Required: ${y}
        Approved: ${_.toString()}`))}),o.forEach(y=>{i||(Eo(n[y].methods,s[y].methods)?Eo(n[y].events,s[y].events)||(i=De("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${y}`)):i=De("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${y}`))}),i}function cj(t){let e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function T7(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function uj(t){let e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:ka(t[r].accounts)?.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}),e}function ox(t,e){return Fg(t,!1)&&t<=e.max&&t>=e.min}var Ag={},Us=class{static get(e){return Ag[e]}static set(e,r){Ag[e]=r}static delete(e){delete Ag[e]}};var $d=Pe(ln()),qe=Pe(yi());var ux="wc",hx=2,dx="client",Yg=`${ux}@${hx}:${dx}:`,zg={name:dx,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"};var ax="WALLETCONNECT_DEEPLINK_CHOICE";var hj="proposal";var dj="Proposal expired",lj="session",ja=qe.SEVEN_DAYS,pj="engine",Rt={wc_sessionPropose:{req:{ttl:qe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:qe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:qe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:qe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:qe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:qe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:qe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:qe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:qe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:qe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:qe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:qe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:qe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:qe.FIVE_MINUTES,prompt:!1,tag:1119}}},kg={min:qe.FIVE_MINUTES,max:qe.SEVEN_DAYS},dn={idle:"IDLE",active:"ACTIVE"},bj="request",gj=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],vj="wc";var mj="auth",yj="authKeys",wj="pairingTopics",xj="requests",Kd=`${vj}@${1.5}:${mj}:`,kd=`${Kd}:PUB_KEY`,Ej=Object.defineProperty,_j=Object.defineProperties,Sj=Object.getOwnPropertyDescriptors,fx=Object.getOwnPropertySymbols,Ij=Object.prototype.hasOwnProperty,Aj=Object.prototype.propertyIsEnumerable,cx=(t,e,r)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ct=(t,e)=>{for(var r in e||(e={}))Ij.call(e,r)&&cx(t,r,e[r]);if(fx)for(var r of fx(e))Aj.call(e,r)&&cx(t,r,e[r]);return t},Fi=(t,e)=>_j(t,Sj(e)),jg=class extends md{constructor(e){super(e),this.name=pj,this.events=new $d.default,this.initialized=!1,this.requestQueue={state:dn.idle,queue:[]},this.sessionRequestQueue={state:dn.idle,queue:[]},this.requestQueueDelay=qe.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Rt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,qe.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let i=Fi(ct({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);let{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:h}=i,d=n,g,y=!1;try{d&&(y=this.client.core.pairing.pairings.get(d).active)}catch(F){throw this.client.logger.error(`connect() -> pairing.get(${d}) failed`),F}if(!d||!y){let{topic:F,uri:j}=await this.client.core.pairing.create();d=F,g=j}if(!d){let{message:F}=De("NO_MATCHING_KEY",`connect() pairing topic: ${d}`);throw new Error(F)}let _=await this.client.core.crypto.generateKeyPair(),S=Rt.wc_sessionPropose.req.ttl||qe.FIVE_MINUTES,I=vr(S),O=ct({requiredNamespaces:s,optionalNamespaces:o,relays:h??[{protocol:g1}],proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:I,pairingTopic:d},a&&{sessionProperties:a}),{reject:P,resolve:T,done:U}=So(S,dj);this.events.once(ze("session_connect"),async({error:F,session:j})=>{if(F)P(F);else if(j){j.self.publicKey=_;let V=Fi(ct({},j),{pairingTopic:O.pairingTopic,requiredNamespaces:O.requiredNamespaces,optionalNamespaces:O.optionalNamespaces,transportType:Ze.relay});await this.client.session.set(j.topic,V),await this.setExpiry(j.topic,j.expiry),d&&await this.client.core.pairing.updateMetadata({topic:d,metadata:j.peer.metadata}),this.cleanupDuplicatePairings(V),T(V)}});let D=await this.sendRequest({topic:d,method:"wc_sessionPropose",params:O,throwOnFailedPublish:!0});return await this.setProposal(D,ct({id:D},O)),{uri:g,approval:U}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async r=>{var i,n,s;let o=this.client.core.eventClient.createEvent({properties:{topic:(i=r?.id)==null?void 0:i.toString(),trace:[ii.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(ls.no_internet_connection),C}try{await this.isValidProposalId(r?.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(ls.proposal_not_found),C}try{await this.isValidApprove(r)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ls.session_approve_namespace_validation_failure),C}let{id:a,relayProtocol:h,namespaces:d,sessionProperties:g,sessionConfig:y}=r,_=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});let{pairingTopic:S,proposer:I,requiredNamespaces:O,optionalNamespaces:P}=_,T=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:S});T||(T=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:ii.session_approve_started,properties:{topic:S,trace:[ii.session_approve_started,ii.session_namespaces_validation_success]}}));let U=await this.client.core.crypto.generateKeyPair(),D=I.publicKey,F=await this.client.core.crypto.generateSharedKey(U,D),j=ct(ct({relay:{protocol:h??"irn"},namespaces:d,controller:{publicKey:U,metadata:this.client.metadata},expiry:vr(ja)},g&&{sessionProperties:g}),y&&{sessionConfig:y}),V=Ze.relay;T.addTrace(ii.subscribing_session_topic);try{await this.client.core.relayer.subscribe(F,{transportType:V})}catch(C){throw T.setError(ls.subscribe_session_topic_failure),C}T.addTrace(ii.subscribe_session_topic_success);let B=Fi(ct({},j),{topic:F,requiredNamespaces:O,optionalNamespaces:P,pairingTopic:S,acknowledged:!1,self:j.controller,peer:{publicKey:I.publicKey,metadata:I.metadata},controller:U,transportType:Ze.relay});await this.client.session.set(F,B),T.addTrace(ii.store_session);try{T.addTrace(ii.publishing_session_settle),await this.sendRequest({topic:F,method:"wc_sessionSettle",params:j,throwOnFailedPublish:!0}).catch(C=>{throw T?.setError(ls.session_settle_publish_failure),C}),T.addTrace(ii.session_settle_publish_success),T.addTrace(ii.publishing_session_approve),await this.sendResult({id:a,topic:S,result:{relay:{protocol:h??"irn"},responderPublicKey:U},throwOnFailedPublish:!0}).catch(C=>{throw T?.setError(ls.session_approve_publish_failure),C}),T.addTrace(ii.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(F,ft("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(F),C}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:S,metadata:I.metadata}),await this.client.proposal.delete(a,ft("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:S}),await this.setExpiry(F,vr(ja)),{topic:F,acknowledged:()=>Promise.resolve(this.client.session.get(F))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}let{id:i,reason:n}=r,s;try{s=this.client.proposal.get(i).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),o}s&&(await this.sendError({id:i,topic:s,error:n,rpcOpts:Rt.wc_sessionPropose.reject}),await this.client.proposal.delete(i,ft("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(y){throw this.client.logger.error("update() -> isValidUpdate() failed"),y}let{topic:i,namespaces:n}=r,{done:s,resolve:o,reject:a}=So(),h=Zi(),d=Mi().toString(),g=this.client.session.get(i).namespaces;return this.events.once(ze("session_update",h),({error:y})=>{y?a(y):o()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:h,relayRpcId:d}).catch(y=>{this.client.logger.error(y),this.client.session.update(i,{namespaces:g}),a(y)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(h){throw this.client.logger.error("extend() -> isValidExtend() failed"),h}let{topic:i}=r,n=Zi(),{done:s,resolve:o,reject:a}=So();return this.events.once(ze("session_extend",n),({error:h})=>{h?a(h):o()}),await this.setExpiry(i,vr(ja)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(h=>{a(h)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(I){throw this.client.logger.error("request() -> isValidRequest() failed"),I}let{chainId:i,request:n,topic:s,expiry:o=Rt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===Ze.relay&&await this.confirmOnlineStateOrThrow();let h=Zi(),d=Mi().toString(),{done:g,resolve:y,reject:_}=So(o,"Request expired. Please try again.");this.events.once(ze("session_request",h),({error:I,result:O})=>{I?_(I):y(O)});let S=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return S?(await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:s,method:"wc_sessionRequest",params:{request:Fi(ct({},n),{expiryTimestamp:vr(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0,appLink:S}).catch(I=>_(I)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:h}),await g()):await Promise.all([new Promise(async I=>{await this.sendRequest({clientRpcId:h,relayRpcId:d,topic:s,method:"wc_sessionRequest",params:{request:Fi(ct({},n),{expiryTimestamp:vr(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0}).catch(O=>_(O)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:h}),I()}),new Promise(async I=>{var O;if(!((O=a.sessionConfig)!=null&&O.disableDeepLink)){let P=await j7(this.client.core.storage,ax);await k7({id:h,topic:s,wcDeepLink:P})}I()}),g()]).then(I=>I[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);let{topic:i,response:n}=r,{id:s}=n,o=this.client.session.get(i);o.transportType===Ze.relay&&await this.confirmOnlineStateOrThrow();let a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);br(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:a}):_t(n)&&await this.sendError({id:s,topic:i,error:n.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}let{topic:i}=r;if(this.client.session.keys.includes(i)){let n=Zi(),s=Mi().toString(),{done:o,resolve:a,reject:h}=So();this.events.once(ze("session_ping",n),({error:d})=>{d?h(d):a()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);let{topic:i,event:n,chainId:s}=r,o=Mi().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s},throwOnFailedPublish:!0,relayRpcId:o})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);let{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:ft("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{let{message:n}=De("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>J7(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(r);let s=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),o=s?Ze.link_mode:Ze.relay;o===Ze.relay&&await this.confirmOnlineStateOrThrow();let{chains:a,statement:h="",uri:d,domain:g,nonce:y,type:_,exp:S,nbf:I,methods:O=[],expiry:P}=r,T=[...r.resources||[]],{topic:U,uri:D}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:U,uri:D}});let F=await this.client.core.crypto.generateKeyPair(),j=Ud(F);if(await Promise.all([this.client.auth.authKeys.set(kd,{responseTopic:j,publicKey:F}),this.client.auth.pairingTopics.set(j,{topic:j,pairingTopic:U})]),await this.client.core.relayer.subscribe(j,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${U}`),O.length>0){let{namespace:v}=Sc(a[0]),c=V7(v,"request",O);Ac(T)&&(c=H7(c,T.pop())),T.push(c)}let V=P&&P>Rt.wc_sessionAuthenticate.req.ttl?P:Rt.wc_sessionAuthenticate.req.ttl,B={authPayload:{type:_??"caip122",chains:a,statement:h,aud:d,domain:g,version:"1",nonce:y,iat:new Date().toISOString(),exp:S,nbf:I,resources:T},requester:{publicKey:F,metadata:this.client.metadata},expiryTimestamp:vr(V)},C={eip155:{chains:a,methods:[...new Set(["personal_sign",...O])],events:["chainChanged","accountsChanged"]}},K={requiredNamespaces:{},optionalNamespaces:C,relays:[{protocol:"irn"}],pairingTopic:U,proposer:{publicKey:F,metadata:this.client.metadata},expiryTimestamp:vr(Rt.wc_sessionPropose.req.ttl)},{done:M,resolve:u,reject:b}=So(V,"Request expired"),p=async({error:v,session:c})=>{if(this.events.off(ze("session_request",l),f),v)b(v);else if(c){c.self.publicKey=F,await this.client.session.set(c.topic,c),await this.setExpiry(c.topic,c.expiry),U&&await this.client.core.pairing.updateMetadata({topic:U,metadata:c.peer.metadata});let w=this.client.session.get(c.topic);await this.deleteProposal(m),u({session:w})}},f=async v=>{var c,w,R;if(await this.deletePendingAuthRequest(l,{message:"fulfilled",code:0}),v.error){let k=ft("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return v.error.code===k.code?void 0:(this.events.off(ze("session_connect"),p),b(v.error.message))}await this.deleteProposal(m),this.events.off(ze("session_connect"),p);let{cacaos:E,responder:N}=v.result,q=[],A=[];for(let k of E){await Pg({cacao:k,projectId:this.client.core.projectId})||(this.client.logger.error(k,"Signature verification failed"),b(ft("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:$}=k,W=Ac($.resources),H=[Fd($.iss)],G=Ic($.iss);if(W){let Z=Dg(W),J=Cg(W);q.push(...Z),H.push(...J)}for(let Z of H)A.push(`${Z}:${G}`)}let L=await this.client.core.crypto.generateSharedKey(F,N.publicKey),z;q.length>0&&(z={topic:L,acknowledged:!0,self:{publicKey:F,metadata:this.client.metadata},peer:N,controller:N.publicKey,expiry:vr(ja),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:U,namespaces:Lg([...new Set(q)],[...new Set(A)]),transportType:o},await this.client.core.relayer.subscribe(L,{transportType:o}),await this.client.session.set(L,z),U&&await this.client.core.pairing.updateMetadata({topic:U,metadata:N.metadata}),z=this.client.session.get(L)),(c=this.client.metadata.redirect)!=null&&c.linkMode&&(w=N.metadata.redirect)!=null&&w.linkMode&&(R=N.metadata.redirect)!=null&&R.universal&&i&&(this.client.core.addLinkModeSupportedApp(N.metadata.redirect.universal),this.client.session.update(L,{transportType:Ze.link_mode})),u({auths:E,session:z})},l=Zi(),m=Zi();this.events.once(ze("session_connect"),p),this.events.once(ze("session_request",l),f);let x;try{if(s){let v=kr("wc_sessionAuthenticate",B,l);this.client.core.history.set(U,v);let c=await this.client.core.crypto.encode("",v,{type:G7,encoding:za});x=Oc(i,U,c)}else await Promise.all([this.sendRequest({topic:U,method:"wc_sessionAuthenticate",params:B,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:l}),this.sendRequest({topic:U,method:"wc_sessionPropose",params:K,expiry:Rt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:m})])}catch(v){throw this.events.off(ze("session_connect"),p),this.events.off(ze("session_request",l),f),v}return await this.setProposal(m,ct({id:m},K)),await this.setAuthRequest(l,{request:Fi(ct({},B),{verifyContext:{}}),pairingTopic:U,transportType:o}),{uri:x??D,response:M}},this.approveSessionAuthenticate=async r=>{let{id:i,auths:n}=r,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[ps.authenticated_session_approve_started]}});try{this.isInitialized()}catch(P){throw s.setError(ma.no_internet_connection),P}let o=this.getPendingAuthRequest(i);if(!o)throw s.setError(ma.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);let a=o.transportType||Ze.relay;a===Ze.relay&&await this.confirmOnlineStateOrThrow();let h=o.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),g=Ud(h),y={type:Bd,receiverPublicKey:h,senderPublicKey:d},_=[],S=[];for(let P of n){if(!await Pg({cacao:P,projectId:this.client.core.projectId})){s.setError(ma.invalid_cacao);let j=ft("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:g,error:j,encodeOpts:y}),new Error(j.message)}s.addTrace(ps.cacaos_verified);let{p:T}=P,U=Ac(T.resources),D=[Fd(T.iss)],F=Ic(T.iss);if(U){let j=Dg(U),V=Cg(U);_.push(...j),D.push(...V)}for(let j of D)S.push(`${j}:${F}`)}let I=await this.client.core.crypto.generateSharedKey(d,h);s.addTrace(ps.create_authenticated_session_topic);let O;if(_?.length>0){O={topic:I,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:h,metadata:o.requester.metadata},controller:h,expiry:vr(ja),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Lg([...new Set(_)],[...new Set(S)]),transportType:a},s.addTrace(ps.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:a})}catch(P){throw s.setError(ma.subscribe_authenticated_session_topic_failure),P}s.addTrace(ps.subscribe_authenticated_session_topic_success),await this.client.session.set(I,O),s.addTrace(ps.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(ps.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:i,result:{cacaos:n,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:y,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(P){throw s.setError(ma.authenticated_session_approve_publish_failure),P}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:O}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();let{id:i,reason:n}=r,s=this.getPendingAuthRequest(i);if(!s)throw new Error(`Could not find pending auth request with id ${i}`);s.transportType===Ze.relay&&await this.confirmOnlineStateOrThrow();let o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),h=Ud(o),d={type:Bd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:i,topic:h,error:n,encodeOpts:d,rpcOpts:Rt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,ft("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();let{request:i,iss:n}=r;return Tg(i,n)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{let r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{let i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async r=>{var i;let{topic:n,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:h}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,ft("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),s||this.client.core.expirer.del(n),this.client.core.storage.removeItem(ax).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===n&&this.deletePendingSessionRequest(d.id,ft("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=dn.idle),o&&this.client.events.emit("session_delete",{id:a,topic:n})},this.deleteProposal=async(r,i)=>{if(i)try{let n=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:n.pairingTopic})?.setError(ls.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,ft("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=dn.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))},this.setProposal=async(r,i)=>{this.client.core.expirer.set(r,vr(Rt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)},this.setAuthRequest=async(r,i)=>{let{request:n,pairingTopic:s,transportType:o=Ze.relay}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:s,verifyContext:n.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{let{id:i,topic:n,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||vr(Rt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,a),await this.client.pendingRequest.set(i,{id:i,topic:n,params:s,verifyContext:o})},this.sendRequest=async r=>{let{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:h,throwOnFailedPublish:d,appLink:g}=r,y=kr(n,s,h),_,S=!!g;try{let P=S?za:Mc;_=await this.client.core.crypto.encode(i,y,{encoding:P})}catch(P){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),P}let I;if(gj.includes(n)){let P=Ao(JSON.stringify(y)),T=Ao(_);I=await this.client.core.verify.register({id:T,decryptedId:P})}let O=Rt[n].req;if(O.attestation=I,o&&(O.ttl=o),a&&(O.id=a),this.client.core.history.set(i,y),S){let P=Oc(g,i,_);await globalThis.Linking.openURL(P,this.client.name)}else{let P=Rt[n].req;o&&(P.ttl=o),a&&(P.id=a),d?(P.internal=Fi(ct({},P.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,_,P)):this.client.core.relayer.publish(i,_,P).catch(T=>this.client.logger.error(T))}return y.id},this.sendResult=async r=>{let{id:i,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:h}=r,d=cs(i,s),g,y=h&&typeof globalThis?.Linking<"u";try{let S=y?za:Mc;g=await this.client.core.crypto.encode(n,d,Fi(ct({},a||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),S}let _;try{_=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),S}if(y){let S=Oc(h,n,g);await globalThis.Linking.openURL(S,this.client.name)}else{let S=Rt[_.request.method].res;o?(S.internal=Fi(ct({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,g,S)):this.client.core.relayer.publish(n,g,S).catch(I=>this.client.logger.error(I))}await this.client.core.history.resolve(d)},this.sendError=async r=>{let{id:i,topic:n,error:s,encodeOpts:o,rpcOpts:a,appLink:h}=r,d=Nn(i,s),g,y=h&&typeof globalThis?.Linking<"u";try{let S=y?za:Mc;g=await this.client.core.crypto.encode(n,d,Fi(ct({},o||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),S}let _;try{_=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),S}if(y){let S=Oc(h,n,g);await globalThis.Linking.openURL(S,this.client.name)}else{let S=a||Rt[_.request.method].res;this.client.core.relayer.publish(n,g,S)}await this.client.core.history.resolve(d)},this.cleanup=async()=>{let r=[],i=[];this.client.session.getAll().forEach(n=>{let s=!1;Io(n.expiry)&&(s=!0),this.client.core.crypto.keychain.has(n.topic)||(s=!0),s&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Io(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===dn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dn.active;let r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=dn.idle},this.processRequest=async r=>{let{topic:i,payload:n,attestation:s,transportType:o,encryptedId:a}=r,h=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:h}))switch(h){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${h}`)}},this.onRelayEventResponse=async r=>{let{topic:i,payload:n,transportType:s}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{let{topic:i}=r,{message:n}=De("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=r=>{let{topic:i,requestMethod:n}=r,s=this.expectedPairingMethodMap.get(i);return!s||s.includes(n)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{let{topic:i,payload:n,attestation:s,encryptedId:o}=r,{params:a,id:h}=n;try{let d=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(ct({},n.params));let g=a.expiryTimestamp||vr(Rt.wc_sessionPropose.req.ttl),y=ct({id:h,pairingTopic:i,expiryTimestamp:g},a);await this.setProposal(h,y);let _=await this.getVerifyContext({attestationId:s,hash:Ao(JSON.stringify(n)),encryptedId:o,metadata:y.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d?.setError(rn.proposal_listener_not_found)),d?.addTrace(Ri.emit_session_proposal),this.client.events.emit("session_proposal",{id:h,params:y,verifyContext:_})}catch(d){await this.sendError({id:h,topic:i,error:d,rpcOpts:Rt.wc_sessionPropose.autoReject}),this.client.logger.error(d)}},this.onSessionProposeResponse=async(r,i,n)=>{let{id:s}=i;if(br(i)){let{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});let a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});let h=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});let d=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});let g=await this.client.core.crypto.generateSharedKey(h,d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});let y=await this.client.core.relayer.subscribe(g,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:y}),await this.client.core.pairing.activate({topic:r})}else if(_t(i)){await this.client.proposal.delete(s,ft("USER_DISCONNECTED"));let o=ze("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(ze("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(r,i)=>{let{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);let{relay:o,controller:a,expiry:h,namespaces:d,sessionProperties:g,sessionConfig:y}=i.params,_=Fi(ct(ct({topic:r,relay:o,expiry:h,namespaces:d,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},g&&{sessionProperties:g}),y&&{sessionConfig:y}),{transportType:Ze.relay}),S=ze("session_connect");if(this.events.listenerCount(S)===0)throw new Error(`emitting ${S} without any listeners 997`);this.events.emit(ze("session_connect"),{session:_}),await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,i)=>{let{id:n}=i;br(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ze("session_approve",n),{})):_t(i)&&(await this.client.session.delete(r,ft("USER_DISCONNECTED")),this.events.emit(ze("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{let{params:n,id:s}=i;try{let o=`${r}_session_update`,a=Us.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:ft("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ct({topic:r},n));try{Us.set(o,s),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(h){throw Us.delete(o),h}this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,i)=>{let{id:n}=i,s=ze("session_update",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);br(i)?this.events.emit(ze("session_update",n),{}):_t(i)&&this.events.emit(ze("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{let{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,vr(ja)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{let{id:n}=i,s=ze("session_extend",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);br(i)?this.events.emit(ze("session_extend",n),{}):_t(i)&&this.events.emit(ze("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{let{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{let{id:n}=i,s=ze("session_ping",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{br(i)?this.events.emit(ze("session_ping",n),{}):_t(i)&&this.events.emit(ze("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{let{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(St.publish,async()=>{s(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:ft("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var i,n,s;let{topic:o,payload:a,attestation:h,encryptedId:d,transportType:g}=r,{id:y,params:_}=a;try{await this.isValidRequest(ct({topic:o},_));let S=this.client.session.get(o),I=await this.getVerifyContext({attestationId:h,hash:Ao(JSON.stringify(kr("wc_sessionRequest",_,y))),encryptedId:d,metadata:S.peer.metadata,transportType:g}),O={id:y,topic:o,params:_,verifyContext:I};await this.setPendingSessionRequest(O),g===Ze.link_mode&&(i=S.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=S.peer.metadata.redirect)==null?void 0:n.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(O):(this.addSessionRequestToSessionRequestQueue(O),this.processSessionRequestQueue())}catch(S){await this.sendError({id:y,topic:o,error:S}),this.client.logger.error(S)}},this.onSessionRequestResponse=(r,i)=>{let{id:n}=i,s=ze("session_request",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);br(i)?this.events.emit(ze("session_request",n),{result:i.result}):_t(i)&&this.events.emit(ze("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{let{id:n,params:s}=i;try{let o=`${r}_session_event_${s.event.name}`,a=Us.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(ct({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),Us.set(o,n)}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,i)=>{let{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),br(i)?this.events.emit(ze("session_request",n),{result:i.result}):_t(i)&&this.events.emit(ze("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async r=>{var i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:h}=r;try{let{requester:d,authPayload:g,expiryTimestamp:y}=s.params,_=await this.getVerifyContext({attestationId:o,hash:Ao(JSON.stringify(s)),encryptedId:a,metadata:d.metadata,transportType:h}),S={requester:d,pairingTopic:n,id:s.id,authPayload:g,verifyContext:_,expiryTimestamp:y};await this.setAuthRequest(s.id,{request:S,pairingTopic:n,transportType:h}),h===Ze.link_mode&&(i=d.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:s.params,id:s.id,verifyContext:_})}catch(d){this.client.logger.error(d);let g=s.params.requester.publicKey,y=await this.client.core.crypto.generateKeyPair(),_=this.getAppLinkIfEnabled(s.params.requester.metadata,h),S={type:Bd,receiverPublicKey:g,senderPublicKey:y};await this.sendError({id:s.id,topic:n,error:d,encodeOpts:S,rpcOpts:Rt.wc_sessionAuthenticate.autoReject,appLink:_})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dn.idle,this.processSessionRequestQueue()},(0,qe.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{let n=this.client.core.history.pending;n.length>0&&n.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{let o=s.request.id,a=ze("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ze("session_request",s.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===dn.active){this.client.logger.info("session request queue is already active.");return}let r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=dn.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;let i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest({topic:r.topic,payload:kr("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async r=>{if(!ai(r)){let{message:h}=De("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(h)}let{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(Vr(i)||await this.isValidPairingTopic(i),!Z7(a,!0)){let{message:h}=De("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(h)}!Vr(n)&&Rc(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Vr(s)&&Rc(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Vr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,i)=>{let n=X7(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!ai(r))throw new Error(De("MISSING_OR_INVALID",`approve() params: ${r}`).message);let{id:i,namespaces:n,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);let a=this.client.proposal.get(i),h=zd(n,"approve()");if(h)throw new Error(h.message);let d=qg(a.requiredNamespaces,n,"approve()");if(d)throw new Error(d.message);if(!bt(s,!0)){let{message:g}=De("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(g)}Vr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!ai(r)){let{message:s}=De("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}let{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!ex(n)){let{message:s}=De("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!ai(r)){let{message:d}=De("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(d)}let{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!Bg(i)){let{message:d}=De("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}let a=W7(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);let h=zd(s,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(Io(o)){let{message:d}=De("EXPIRED","onSessionSettleRequest()");throw new Error(d)}},this.isValidUpdate=async r=>{if(!ai(r)){let{message:h}=De("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(h)}let{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);let s=this.client.session.get(i),o=zd(n,"update()");if(o)throw new Error(o.message);let a=qg(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!ai(r)){let{message:n}=De("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}let{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!ai(r)){let{message:h}=De("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(h)}let{topic:i,request:n,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);let{namespaces:a}=this.client.session.get(i);if(!Ug(a,s)){let{message:h}=De("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(h)}if(!tx(n)){let{message:h}=De("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(h)}if(!nx(a,s,n.method)){let{message:h}=De("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(h)}if(o&&!ox(o,kg)){let{message:h}=De("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${kg.min} and ${kg.max}`);throw new Error(h)}},this.isValidRespond=async r=>{var i;if(!ai(r)){let{message:o}=De("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}let{topic:n,response:s}=r;try{await this.isValidSessionTopic(n)}catch(o){throw(i=r?.response)!=null&&i.id&&this.cleanupAfterResponse(r),o}if(!rx(s)){let{message:o}=De("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!ai(r)){let{message:n}=De("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!ai(r)){let{message:a}=De("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}let{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);let{namespaces:o}=this.client.session.get(i);if(!Ug(o,s)){let{message:a}=De("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!ix(n)){let{message:a}=De("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!sx(o,s,n.name)){let{message:a}=De("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!ai(r)){let{message:n}=De("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}let{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=r=>{let{chains:i,uri:n,domain:s,nonce:o}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!bt(n,!1))throw new Error("uri is required parameter");if(!bt(s,!1))throw new Error("domain is required parameter");if(!bt(o,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(h=>Sc(h).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:a}=Sc(i[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{let{attestationId:i,hash:n,encryptedId:s,metadata:o,transportType:a}=r,h={verified:{verifyUrl:o.verifyUrl||va,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ze.link_mode){let g=this.getAppLinkIfEnabled(o,a);return h.verified.validation=g&&new URL(g).origin===new URL(o.url).origin?"VALID":"INVALID",h}let d=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:s,verifyUrl:o.verifyUrl});d&&(h.verified.origin=d.origin,h.verified.isScam=d.isScam,h.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(h)}`),h},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!bt(n,!1)){let{message:s}=De("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{let i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0,s=this.recentlyDeletedLimit/2;for(let o of this.recentlyDeletedMap.keys()){if(n++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{let i=this.recentlyDeletedMap.get(r);if(i){let{message:n}=De("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}},this.isLinkModeEnabled=(r,i)=>{var n,s,o,a,h,d,g,y,_;return!r||i!==Ze.link_mode?!1:((s=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((d=(h=this.client.metadata)==null?void 0:h.redirect)==null?void 0:d.universal)!==""&&((g=r?.redirect)==null?void 0:g.universal)!==void 0&&((y=r?.redirect)==null?void 0:y.universal)!==""&&((_=r?.redirect)==null?void 0:_.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof globalThis?.Linking<"u"},this.getAppLinkIfEnabled=(r,i)=>{var n;return this.isLinkModeEnabled(r,i)?(n=r?.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;let i=Rg(r,"topic")||"",n=decodeURIComponent(Rg(r,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:Ze.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if($7()||Og()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){let i=globalThis?.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);let n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}}isInitialized(){if(!this.initialized){let{message:e}=De("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(St.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){let{topic:r,message:i,attestation:n,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(kd)?this.client.auth.authKeys.get(kd):{responseTopic:void 0,publicKey:void 0},a=await this.client.core.crypto.decode(r,i,{receiverPublicKey:o,encoding:s===Ze.link_mode?za:Mc});try{us(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:n,transportType:s,encryptedId:Ao(i)})):Qi(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(h){this.client.logger.error(h)}}registerExpirerEvents(){this.client.core.expirer.on(jr.expired,async e=>{let{topic:r,id:i}=z7(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,De("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,De("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(nn.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(nn.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!bt(e,!1)){let{message:r}=De("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:r}=De("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Io(this.client.core.pairing.pairings.get(e).expiry)){let{message:r}=De("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!bt(e,!1)){let{message:r}=De("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:r}=De("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Io(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:r}=De("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){let{message:r}=De("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(bt(e,!1)){let{message:r}=De("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{let{message:r}=De("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Q7(e)){let{message:r}=De("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){let{message:r}=De("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Io(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:r}=De("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},$g=class extends Er{constructor(e,r){super(e,r,hj,Yg),this.core=e,this.logger=r}},jd=class extends Er{constructor(e,r){super(e,r,lj,Yg),this.core=e,this.logger=r}},Kg=class extends Er{constructor(e,r){super(e,r,bj,Yg,i=>i.id),this.core=e,this.logger=r}},Vg=class extends Er{constructor(e,r){super(e,r,yj,Kd,()=>kd),this.core=e,this.logger=r}},Hg=class extends Er{constructor(e,r){super(e,r,wj,Kd),this.core=e,this.logger=r}},Gg=class extends Er{constructor(e,r){super(e,r,xj,Kd,i=>i.id),this.core=e,this.logger=r}},Jg=class{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new Vg(this.core,this.logger),this.pairingTopics=new Hg(this.core,this.logger),this.requests=new Gg(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}},Wg=class t extends vd{constructor(e){super(e),this.protocol=ux,this.version=hx,this.name=zg.name,this.events=new $d.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||zg.name,this.metadata=e?.metadata||q7(),this.signConfig=e?.signConfig;let r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:(0,ug.default)(T9({level:e?.logger||zg.logger}));this.core=e?.core||new Cn(e),this.logger=D9(r,this.name),this.session=new jd(this.core,this.logger),this.proposal=new $g(this.core,this.logger),this.pendingRequest=new Kg(this.core,this.logger),this.engine=new jg(this),this.auth=new Jg(this.core,this.logger)}static async init(e){let r=new t(e);return await r.initialize(),r}get context(){return hg(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}},lx=jd,px=Wg;var Gd={exports:{}},$a=typeof Reflect=="object"?Reflect:null,bx=$a&&typeof $a.apply=="function"?$a.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Vd;$a&&typeof $a.ownKeys=="function"?Vd=$a.ownKeys:Object.getOwnPropertySymbols?Vd=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Vd=function(t){return Object.getOwnPropertyNames(t)};function Mj(t){console&&console.warn&&console.warn(t)}var gx=Number.isNaN||function(t){return t!==t};function We(){We.init.call(this)}Gd.exports=We,Gd.exports.once=Pj,We.EventEmitter=We,We.prototype._events=void 0,We.prototype._eventsCount=0,We.prototype._maxListeners=void 0;var vx=10;function Hd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(We,"defaultMaxListeners",{enumerable:!0,get:function(){return vx},set:function(t){if(typeof t!="number"||t<0||gx(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vx=t}}),We.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},We.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||gx(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Ix(t){return t._maxListeners===void 0?We.defaultMaxListeners:t._maxListeners}We.prototype.getMaxListeners=function(){return Ix(this)},We.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=t==="error",n=this._events;if(n!==void 0)i=i&&n.error===void 0;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var a=n[t];if(a===void 0)return!1;if(typeof a=="function")bx(a,this,e);else for(var h=a.length,d=Ax(a,h),r=0;r<h;++r)bx(d[r],this,e);return!0};function mx(t,e,r,i){var n,s,o;if(Hd(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Ix(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Mj(a)}return t}We.prototype.addListener=function(t,e){return mx(this,t,e,!1)},We.prototype.on=We.prototype.addListener,We.prototype.prependListener=function(t,e){return mx(this,t,e,!0)};function Oj(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yx(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=Oj.bind(i);return n.listener=r,i.wrapFn=n,n}We.prototype.once=function(t,e){return Hd(e),this.on(t,yx(this,t,e)),this},We.prototype.prependOnceListener=function(t,e){return Hd(e),this.prependListener(t,yx(this,t,e)),this},We.prototype.removeListener=function(t,e){var r,i,n,s,o;if(Hd(e),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,n=s;break}if(n<0)return this;n===0?r.shift():Rj(r,n),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},We.prototype.off=We.prototype.removeListener,We.prototype.removeAllListeners=function(t){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var n=Object.keys(r),s;for(i=0;i<n.length;++i)s=n[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function wx(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Nj(n):Ax(n,n.length)}We.prototype.listeners=function(t){return wx(this,t,!0)},We.prototype.rawListeners=function(t){return wx(this,t,!1)},We.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):xx.call(t,e)},We.prototype.listenerCount=xx;function xx(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}We.prototype.eventNames=function(){return this._eventsCount>0?Vd(this._events):[]};function Ax(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Rj(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Nj(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Pj(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Mx(t,e,s,{once:!0}),e!=="error"&&Tj(t,n,{once:!0})})}function Tj(t,e,r){typeof t.on=="function"&&Mx(t,"error",e,r)}function Mx(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Dj="wc";var Ox="Web3Wallet",EX=`${Dj}@2:${Ox}:`;var Ex=class extends Gd.exports{constructor(){super()}},Xg=class{constructor(e){this.opts=e}},Zg=class{constructor(e){this.client=e}},Cj=Object.defineProperty,Lj=Object.defineProperties,Fj=Object.getOwnPropertyDescriptors,_x=Object.getOwnPropertySymbols,Bj=Object.prototype.hasOwnProperty,Uj=Object.prototype.propertyIsEnumerable,Sx=(t,e,r)=>e in t?Cj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qj=(t,e)=>{for(var r in e||(e={}))Bj.call(e,r)&&Sx(t,r,e[r]);if(_x)for(var r of _x(e))Uj.call(e,r)&&Sx(t,r,e[r]);return t},zj=(t,e)=>Lj(t,Fj(e)),Qg=class extends Zg{constructor(e){super(e),this.init=async()=>{this.signClient=await px.init({core:this.client.core,metadata:this.client.metadata,signConfig:this.client.signConfig}),this.authClient=await S9.init({core:this.client.core,projectId:"",metadata:this.client.metadata})},this.pair=async r=>{await this.client.core.pairing.pair(r)},this.approveSession=async r=>{let{topic:i,acknowledged:n}=await this.signClient.approve(zj(qj({},r),{id:r.id,namespaces:r.namespaces,sessionProperties:r.sessionProperties,sessionConfig:r.sessionConfig}));return await n(),this.signClient.session.get(i)},this.rejectSession=async r=>await this.signClient.reject(r),this.updateSession=async r=>await this.signClient.update(r),this.extendSession=async r=>await this.signClient.extend(r),this.respondSessionRequest=async r=>await this.signClient.respond(r),this.disconnectSession=async r=>await this.signClient.disconnect(r),this.emitSessionEvent=async r=>await this.signClient.emit(r),this.getActiveSessions=()=>this.signClient.session.getAll().reduce((r,i)=>(r[i.topic]=i,r),{}),this.getPendingSessionProposals=()=>this.signClient.proposal.getAll(),this.getPendingSessionRequests=()=>this.signClient.getPendingSessionRequests(),this.respondAuthRequest=async(r,i)=>await this.authClient.respond(r,i),this.getPendingAuthRequests=()=>this.authClient.requests.getAll().filter(r=>"requester"in r),this.formatMessage=(r,i)=>this.authClient.formatMessage(r,i),this.approveSessionAuthenticate=async r=>await this.signClient.approveSessionAuthenticate(r),this.rejectSessionAuthenticate=async r=>await this.signClient.rejectSessionAuthenticate(r),this.formatAuthMessage=r=>this.signClient.formatAuthMessage(r),this.registerDeviceToken=r=>this.client.core.echoClient.registerDeviceToken(r),this.on=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"on"),this.client.events.on(r,i)),this.once=(r,i)=>(this.setEvent(r,"off"),this.setEvent(r,"once"),this.client.events.once(r,i)),this.off=(r,i)=>(this.setEvent(r,"off"),this.client.events.off(r,i)),this.removeListener=(r,i)=>(this.setEvent(r,"removeListener"),this.client.events.removeListener(r,i)),this.onSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onSessionProposal=r=>{this.client.events.emit("session_proposal",r)},this.onSessionDelete=r=>{this.client.events.emit("session_delete",r)},this.onAuthRequest=r=>{this.client.events.emit("auth_request",r)},this.onProposalExpire=r=>{this.client.events.emit("proposal_expire",r)},this.onSessionRequestExpire=r=>{this.client.events.emit("session_request_expire",r)},this.onSessionRequestAuthenticate=r=>{this.client.events.emit("session_authenticate",r)},this.setEvent=(r,i)=>{switch(r){case"session_request":this.signClient.events[i]("session_request",this.onSessionRequest);break;case"session_proposal":this.signClient.events[i]("session_proposal",this.onSessionProposal);break;case"session_delete":this.signClient.events[i]("session_delete",this.onSessionDelete);break;case"auth_request":this.authClient[i]("auth_request",this.onAuthRequest);break;case"proposal_expire":this.signClient.events[i]("proposal_expire",this.onProposalExpire);break;case"session_request_expire":this.signClient.events[i]("session_request_expire",this.onSessionRequestExpire);break;case"session_authenticate":this.signClient.events[i]("session_authenticate",this.onSessionRequestAuthenticate);break}},this.signClient={},this.authClient={}}},kj={decryptMessage:async t=>{let e={core:new Cn({storageOptions:t.storageOptions,storage:t.storage})};await e.core.crypto.init();let r=e.core.crypto.decode(t.topic,t.encryptedMessage);return e.core=null,r},getMetadata:async t=>{let e={core:new Cn({storageOptions:t.storageOptions,storage:t.storage}),sessionStore:null};e.sessionStore=new lx(e.core,e.core.logger),await e.sessionStore.init();let r=e.sessionStore.get(t.topic),i=r?.peer.metadata;return e.core=null,e.sessionStore=null,i}},Rx=class extends Xg{constructor(t){super(t),this.events=new Gd.exports,this.on=(e,r)=>this.engine.on(e,r),this.once=(e,r)=>this.engine.once(e,r),this.off=(e,r)=>this.engine.off(e,r),this.removeListener=(e,r)=>this.engine.removeListener(e,r),this.pair=async e=>{try{return await this.engine.pair(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSession=async e=>{try{return await this.engine.approveSession(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSession=async e=>{try{return await this.engine.rejectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.updateSession=async e=>{try{return await this.engine.updateSession(e)}catch(r){throw this.logger.error(r.message),r}},this.extendSession=async e=>{try{return await this.engine.extendSession(e)}catch(r){throw this.logger.error(r.message),r}},this.respondSessionRequest=async e=>{try{return await this.engine.respondSessionRequest(e)}catch(r){throw this.logger.error(r.message),r}},this.disconnectSession=async e=>{try{return await this.engine.disconnectSession(e)}catch(r){throw this.logger.error(r.message),r}},this.emitSessionEvent=async e=>{try{return await this.engine.emitSessionEvent(e)}catch(r){throw this.logger.error(r.message),r}},this.getActiveSessions=()=>{try{return this.engine.getActiveSessions()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionProposals=()=>{try{return this.engine.getPendingSessionProposals()}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.respondAuthRequest=async(e,r)=>{try{return await this.engine.respondAuthRequest(e,r)}catch(i){throw this.logger.error(i.message),i}},this.getPendingAuthRequests=()=>{try{return this.engine.getPendingAuthRequests()}catch(e){throw this.logger.error(e.message),e}},this.formatMessage=(e,r)=>{try{return this.engine.formatMessage(e,r)}catch(i){throw this.logger.error(i.message),i}},this.registerDeviceToken=e=>{try{return this.engine.registerDeviceToken(e)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=e=>{try{return this.engine.approveSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=e=>{try{return this.engine.rejectSessionAuthenticate(e)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(r){throw this.logger.error(r.message),r}},this.metadata=t.metadata,this.name=t.name||Ox,this.signConfig=t.signConfig,this.core=t.core,this.logger=this.core.logger,this.engine=new Qg(this)}static async init(t){let e=new Rx(t);return await e.initialize(),e}async initialize(){this.logger.trace("Initialized");try{await this.engine.init(),this.logger.info("Web3Wallet Initialization Success")}catch(t){throw this.logger.info("Web3Wallet Initialization Failure"),this.logger.error(t.message),t}}},Nx=Rx;Nx.notifications=kj;var Px=Nx;var jj="wss://relay.walletconnect.com",$j={async getItem(t){return(await chrome.storage.local.get(`wc_${t}`))[`wc_${t}`]??null},async setItem(t,e){await chrome.storage.local.set({[`wc_${t}`]:e})},async removeItem(t){await chrome.storage.local.remove(`wc_${t}`)},async getKeys(){let t=await chrome.storage.local.get(null);return Object.keys(t).filter(e=>e.startsWith("wc_")).map(e=>e.slice(3))},async getEntries(){let t=await chrome.storage.local.get(null);return Object.entries(t).filter(([e])=>e.startsWith("wc_")).map(([e,r])=>[e.slice(3),r])}},ev=class{constructor(){this.wallet=null,this.listeners={}}async init(e){let r=new Cn({projectId:e,relayUrl:jj,storage:$j});return this.wallet=await Px.init({core:r,metadata:{name:"Rusby Wallet",description:"Multi-chain wallet in pure Rust",url:"https://rusby.io",icons:["https://rusby.io/icon.png"]}}),this.wallet.on("session_proposal",i=>{this._emit("session_proposal",i)}),this.wallet.on("session_request",i=>{this._emit("session_request",i)}),this.wallet.on("session_delete",i=>{this._emit("session_delete",i)}),!0}async pair(e){if(!this.wallet)throw new Error("WC not initialized");await this.wallet.pair({uri:e})}async approveSession(e,r){if(!this.wallet)throw new Error("WC not initialized");return await this.wallet.approveSession({id:e,namespaces:r})}async rejectSession(e){if(!this.wallet)throw new Error("WC not initialized");await this.wallet.rejectSession({id:e,reason:{code:4001,message:"User rejected"}})}async respondRequest(e,r,i){if(!this.wallet)throw new Error("WC not initialized");await this.wallet.respondSessionRequest({topic:e,response:{id:r,jsonrpc:"2.0",result:i}})}async rejectRequest(e,r,i="User rejected"){if(!this.wallet)throw new Error("WC not initialized");await this.wallet.respondSessionRequest({topic:e,response:{id:r,jsonrpc:"2.0",error:{code:4001,message:i}}})}async disconnectSession(e){if(!this.wallet)throw new Error("WC not initialized");await this.wallet.disconnectSession({topic:e,reason:{code:6e3,message:"User disconnected"}})}getActiveSessions(){return this.wallet?this.wallet.getActiveSessions():{}}getPendingProposals(){return this.wallet?this.wallet.getPendingSessionProposals():{}}on(e,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(r)}off(e,r){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(i=>i!==r))}_emit(e,r){(this.listeners[e]||[]).forEach(i=>{try{i(r)}catch(n){console.error("RusbyWC event error:",n)}})}},Kj=new ev,MX=Kj;export{MX as default,Kj as rusbyWC};
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-sha3/src/sha3.js:
  (**
   * [js-sha3]{@link https://github.com/emn178/js-sha3}
   *
   * @version 0.8.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2015-2018
   * @license MIT
   *)

@walletconnect/relay-auth/dist/index.es.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@walletconnect/utils/dist/index.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
*/
